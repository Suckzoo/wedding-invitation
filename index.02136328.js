!function(){function t(t,e,n,i){Object.defineProperty(t,e,{get:n,set:i,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},r={},s=n.parcelRequireb079;function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t,e,n,i,r,s,o){try{var a=t[s](o),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(i,r)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var s=t.apply(e,n);function o(t){a(s,i,r,o,u,"next",t)}function u(t){a(s,i,r,o,u,"throw",t)}o(void 0)}))}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t,e,n){return(h=c()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&_setPrototypeOf(r,n.prototype),r}).apply(null,arguments)}function f(t,e,n){return h.apply(null,arguments)}function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function v(t,e,n){return e&&g(t.prototype,e),n&&g(t,n),t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t){return m(t)}function b(t,e,n){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n||t):r.value}})(t,e,n)}function w(t,e,n){return b(t,e,n)}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function T(t,e){return k(t,e)}function I(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}function E(t){return t&&t.constructor===Symbol?"symbol":typeof t}function S(t,e){return!e||"object"!==E(e)&&"function"!=typeof e?o(t):e}function x(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function C(t,e){return function(t){if(Array.isArray(t))return t}(t)||x(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function A(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||x(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function D(t){var e="function"==typeof Map?new Map:void 0;return D=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return f(t,arguments,y(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),T(i,t)},D(t)}function N(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=y(t);if(e){var r=y(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return S(this,n)}}null==s&&((s=function(t){if(t in i)return i[t].exports;if(t in r){var e=r[t];delete r[t];var n={id:t,exports:{}};return i[t]=n,e.call(n.exports,n,n.exports),n.exports}var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,e){r[t]=e},n.parcelRequireb079=s),s.register("iE7OH",(function(e,n){var i,r;t(e.exports,"register",(function(){return i}),(function(t){return i=t})),t(e.exports,"resolve",(function(){return r}),(function(t){return r=t}));var s={};i=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)s[e[n]]=t[e[n]]},r=function(t){var e=s[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),s.register("aNJCr",(function(e,n){var i;t(e.exports,"getBundleURL",(function(){return i}),(function(t){return i=t}));var r={};function s(t){return(""+t).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}i=function(t){var e=r[t];return e||(e=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(t)return s(t[2])}return"/"}(),r[t]=e),e}})),s("iE7OH").register(JSON.parse('{"1k32y":"index.02136328.js","iOk8V":"3.881870eb.jpg"}'));var _={},O=function(t){var e,n=Object.prototype,i=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,i){var r=e&&e.prototype instanceof p?e:p,s=Object.create(r.prototype),o=new A(i||[]);return s._invoke=function(t,e,n){var i=h;return function(r,s){if(i===d)throw new Error("Generator is already running");if(i===g){if("throw"===r)throw s;return N()}for(n.method=r,n.arg=s;;){var o=n.delegate;if(o){var a=S(o,n);if(a){if(a===v)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var u=c(t,e,n);if("normal"===u.type){if(i=n.done?g:f,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=g,n.method="throw",n.arg=u.arg)}}}(t,n,o),s}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h="suspendedStart",f="suspendedYield",d="executing",g="completed",v={};function p(){}function m(){}function y(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(D([])));k&&k!==n&&i.call(k,s)&&(b=k);var T=y.prototype=p.prototype=Object.create(b);function I(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(r,s,o,a){var u=c(t[r],t,s);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==typeof h&&i.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,o,a)}),(function(t){n("throw",t,o,a)})):e.resolve(h).then((function(t){l.value=t,o(l)}),(function(t){return n("throw",t,o,a)}))}a(u.arg)}var r;this._invoke=function(t,i){function s(){return new e((function(e,r){n(t,i,e,r)}))}return r=r?r.then(s,s):s()}}function S(t,n){var i=t.iterator[n.method];if(i===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var r=c(i,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,v;var s=r.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function D(t){if(t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}return{next:N}}function N(){return{value:e,done:!0}}return m.prototype=y,u(T,"constructor",y),u(y,"constructor",m),m.displayName=u(y,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,a,"GeneratorFunction")),t.prototype=Object.create(T),t},t.awrap=function(t){return{__await:t}},I(E.prototype),u(E.prototype,o,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,i,r,s){void 0===s&&(s=Promise);var o=new E(l(e,n,i,r),s);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},I(T),u(T,a,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=D,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(i,r){return a.type="throw",a.arg=t,n.next=i,r&&(n.method="next",n.arg=e),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=i.call(o,"catchLoc"),l=i.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;C(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:D(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),v}},t}(_);try{regeneratorRuntime=O}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=O:Function("r","regeneratorRuntime = r")(O)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var L=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var M=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(){var e=this;l(this,t),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return v(t,[{key:"wrapCallback",value:function(t){var e=this;return function(n,i){n?e.reject(n):e.resolve(i),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,i))}}}]),t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function R(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var P=function(t){"use strict";I(n,t);var e=N(n);function n(t,i,r){var s;return l(this,n),(s=e.call(this,i)).code=t,s.customData=r,s.name="FirebaseError",Object.setPrototypeOf(o(s),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(o(s),V.prototype.create),s}return n}(D(Error)),V=function(){"use strict";function t(e,n,i){l(this,t),this.service=e,this.serviceName=n,this.errors=i}return v(t,[{key:"create",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=n[0]||{},s="".concat(this.service,"/").concat(t),o=this.errors[t],a=o?F(o,r):"Error",u="".concat(this.serviceName,": ").concat(a," (").concat(s,")."),l=new P(s,u,r);return l}}]),t}();function F(t,e){return t.replace(U,(function(t,n){var i=e[n];return null!=i?String(i):"<".concat(n,"?>")}))}var U=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z(t,e){if(t===e)return!0;var n=Object.keys(t),i=Object.keys(e),r=!0,s=!1,o=void 0;try{for(var a,u=n[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=a.value;if(!i.includes(l))return!1;var c=t[l],h=e[l];if(B(c)&&B(h)){if(!z(c,h))return!1}else if(c!==h)return!1}}catch(t){s=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(s)throw o}}var f=!0,d=!1,g=void 0;try{for(var v,p=i[Symbol.iterator]();!(f=(v=p.next()).done);f=!0){var m=v.value;if(!n.includes(m))return!1}}catch(t){d=!0,g=t}finally{try{f||null==p.return||p.return()}finally{if(d)throw g}}return!0}function B(t){return null!==t&&"object"==typeof t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function G(t){return t&&t._delegate?t._delegate:t}var j=function(){"use strict";function t(e,n,i){l(this,t),this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return v(t,[{key:"setInstantiationMode",value:function(t){return this.instantiationMode=t,this}},{key:"setMultipleInstances",value:function(t){return this.multipleInstances=t,this}},{key:"setServiceProps",value:function(t){return this.serviceProps=t,this}},{key:"setInstanceCreatedCallback",value:function(t){return this.onInstanceCreated=t,this}}]),t}(),q="[DEFAULT]",H=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e,n){l(this,t),this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return v(t,[{key:"get",value:function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new M;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:e});i&&n.resolve(i)}catch(t){}}return this.instancesDeferred.get(e).promise}},{key:"getImmediate",value:function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(i)return null;throw t}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(t){if(t.name!==this.name)throw Error("Mismatching Component ".concat(t.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:q})}catch(t){}var e=!0,n=!1,i=void 0;try{for(var r,s=this.instancesDeferred.entries()[Symbol.iterator]();!(e=(r=s.next()).done);e=!0){var o=C(r.value),a=o[0],u=o[1],l=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService({instanceIdentifier:l});u.resolve(c)}catch(t){}}}catch(t){n=!0,i=t}finally{try{e||null==s.return||s.return()}finally{if(n)throw i}}}}},{key:"clearInstance",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q;this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}},{key:"delete",value:function(){return u(e(_).mark((function t(){var n;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Array.from(this.instances.values()),t.next=3,Promise.all(A(n.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()}))).concat(A(n.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))));case 3:case"end":return t.stop()}}),t,this)})).bind(this))()}},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q;return this.instances.has(t)}},{key:"getOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q;return this.instancesOptions.get(t)||{}}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.options,n=void 0===e?{}:e,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error("".concat(this.name,"(").concat(i,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var r=this.getOrInitializeService({instanceIdentifier:i,options:n}),s=!0,o=!1,a=void 0;try{for(var u,l=this.instancesDeferred.entries()[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){var c=C(u.value),h=c[0],f=c[1],d=this.normalizeInstanceIdentifier(h);i===d&&f.resolve(r)}}catch(t){o=!0,a=t}finally{try{s||null==l.return||l.return()}finally{if(o)throw a}}return r}},{key:"onInit",value:function(t,e){var n,i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);var s=this.instances.get(i);return s&&t(s,i),function(){r.delete(t)}}},{key:"invokeOnInitCallbacks",value:function(t,e){var n=this.onInitCallbacks.get(e);if(n){var i=!0,r=!1,s=void 0;try{for(var o,a=n[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var u=o.value;try{u(t,e)}catch(t){}}}catch(t){r=!0,s=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw s}}}}},{key:"getOrInitializeService",value:function(t){var e,n=t.instanceIdentifier,i=t.options,r=void 0===i?{}:i,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===q?void 0:e),options:r}),this.instances.set(n,s),this.instancesOptions.set(n,r),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(t){}return s||null}},{key:"normalizeInstanceIdentifier",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q;return this.component?this.component.multipleInstances?t:q:t}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var K,X=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e){l(this,t),this.name=e,this.providers=new Map}return v(t,[{key:"addComponent",value:function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component ".concat(t.name," has already been registered with ").concat(this.name));e.setComponent(t)}},{key:"addOrOverwriteComponent",value:function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}},{key:"getProvider",value:function(t){if(this.providers.has(t))return this.providers.get(t);var e=new H(t,this);return this.providers.set(t,e),e}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),t}(),W=[];
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(K||(K={}));var Y={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},$=K.INFO,Q=(p(et={},K.DEBUG,"log"),p(et,K.VERBOSE,"log"),p(et,K.INFO,"info"),p(et,K.WARN,"warn"),p(et,K.ERROR,"error"),et),J=function(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var s;if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=Q[e];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(e,")"));(s=console)[a].apply(s,["[".concat(o,"]  ").concat(t.name,":")].concat(A(i)))}},Z=function(){"use strict";function t(e){l(this,t),this.name=e,this._logLevel=$,this._logHandler=J,this._userLogHandler=null,W.push(this)}return v(t,[{key:"logLevel",get:function(){return this._logLevel},set:function(t){if(!(t in K))throw new TypeError('Invalid value "'.concat(t,'" assigned to `logLevel`'));this._logLevel=t}},{key:"setLogLevel",value:function(t){this._logLevel="string"==typeof t?Y[t]:t}},{key:"logHandler",get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t}},{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,K.DEBUG].concat(A(e))),this._logHandler.apply(this,[this,K.DEBUG].concat(A(e)))}},{key:"log",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,K.VERBOSE].concat(A(e))),this._logHandler.apply(this,[this,K.VERBOSE].concat(A(e)))}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,K.INFO].concat(A(e))),this._logHandler.apply(this,[this,K.INFO].concat(A(e)))}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,K.WARN].concat(A(e))),this._logHandler.apply(this,[this,K.WARN].concat(A(e)))}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,K.ERROR].concat(A(e))),this._logHandler.apply(this,[this,K.ERROR].concat(A(e)))}}]),t}();var tt=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e){l(this,t),this.container=e}return v(t,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return"".concat(e.library,"/").concat(e.version)}return null})).filter((function(t){return t})).join(" ")}}]),t}();var et,nt,it="@firebase/app",rt="0.7.17",st=new Z("@firebase/app"),ot="[DEFAULT]",at=(p(et={},it,"fire-core"),p(et,"@firebase/app-compat","fire-core-compat"),p(et,"@firebase/analytics","fire-analytics"),p(et,"@firebase/analytics-compat","fire-analytics-compat"),p(et,"@firebase/app-check","fire-app-check"),p(et,"@firebase/app-check-compat","fire-app-check-compat"),p(et,"@firebase/auth","fire-auth"),p(et,"@firebase/auth-compat","fire-auth-compat"),p(et,"@firebase/database","fire-rtdb"),p(et,"@firebase/database-compat","fire-rtdb-compat"),p(et,"@firebase/functions","fire-fn"),p(et,"@firebase/functions-compat","fire-fn-compat"),p(et,"@firebase/installations","fire-iid"),p(et,"@firebase/installations-compat","fire-iid-compat"),p(et,"@firebase/messaging","fire-fcm"),p(et,"@firebase/messaging-compat","fire-fcm-compat"),p(et,"@firebase/performance","fire-perf"),p(et,"@firebase/performance-compat","fire-perf-compat"),p(et,"@firebase/remote-config","fire-rc"),p(et,"@firebase/remote-config-compat","fire-rc-compat"),p(et,"@firebase/storage","fire-gcs"),p(et,"@firebase/storage-compat","fire-gcs-compat"),p(et,"@firebase/firestore","fire-fst"),p(et,"@firebase/firestore-compat","fire-fst-compat"),p(et,"fire-js","fire-js"),p(et,"firebase","fire-js-all"),et),ut=new Map,lt=new Map;function ct(t,e){try{t.container.addComponent(e)}catch(n){st.debug("Component ".concat(e.name," failed to register with FirebaseApp ").concat(t.name),n)}}function ht(t){var e=t.name;if(lt.has(e))return st.debug("There were multiple attempts to register component ".concat(e,".")),!1;lt.set(e,t);var n=!0,i=!1,r=void 0;try{for(var s,o=ut.values()[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){ct(s.value,t)}}catch(t){i=!0,r=t}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return!0}function ft(t,e){return t.container.getProvider(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var dt,gt=(p(nt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),p(nt,"bad-app-name","Illegal App name: '{$appName}"),p(nt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),p(nt,"app-deleted","Firebase App named '{$appName}' already deleted"),p(nt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),p(nt,"invalid-log-argument","First argument to `onLog` must be null or a function."),nt),vt=new V("app","Firebase",gt),pt=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e,n,i){var r=this;l(this,t),this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new j("app",(function(){return r}),"PUBLIC"))}return v(t,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(t){this._isDeleted=t}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw vt.create("app-deleted",{appName:this._name})}}]),t}();function mt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,e=ut.get(t);if(!e)throw vt.create("no-app",{appName:t});return e}function yt(t,e,n){var i,r=null!==(i=at[t])&&void 0!==i?i:t;n&&(r+="-".concat(n));var s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){var a=['Unable to register library "'.concat(r,'" with version "').concat(e,'":')];return s&&a.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),s&&o&&a.push("and"),o&&a.push('version name "'.concat(e,'" contains illegal characters (whitespace or "/")')),void st.warn(a.join(" "))}ht(new j("".concat(r,"-version"),(function(){return{library:r,version:e}}),"VERSION"))}dt="",ht(new j("platform-logger",(function(t){return new tt(t)}),"PRIVATE")),yt(it,rt,dt),yt(it,rt,"esm2017"),yt("fire-js","");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
yt("firebase","9.6.7","app");var bt,wt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{},kt={},Tt=Tt||{},It=wt||self;function Et(){}function St(t){var e=void 0===t?"undefined":E(t);return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function xt(t){var e=void 0===t?"undefined":E(t);return"object"==e&&null!=t||"function"==e}var Ct="closure_uid_"+(1e9*Math.random()>>>0),At=0;function Dt(t,e,n){return t.call.apply(t.bind,arguments)}function Nt(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _t(t,e,n){return(_t=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Dt:Nt).apply(null,arguments)}function Ot(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Lt(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function Mt(){this.s=this.s,this.o=this.o}var Rt={};Mt.prototype.s=!1,Mt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,Ct)&&t[Ct]||(t[Ct]=++At)}(this);delete Rt[t]}},Mt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Pt=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Vt=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var i=t.length,r="string"==typeof t?t.split(""):t,s=0;s<i;s++)s in r&&e.call(n,r[s],s,t)};function Ft(t){return Array.prototype.concat.apply([],arguments)}function Ut(t){var e=t.length;if(0<e){for(var n=Array(e),i=0;i<e;i++)n[i]=t[i];return n}return[]}function zt(t){return/^[\s\xa0]*$/.test(t)}var Bt,Gt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function jt(t,e){return-1!=t.indexOf(e)}function qt(t,e){return t<e?-1:t>e?1:0}t:{var Ht=It.navigator;if(Ht){var Kt=Ht.userAgent;if(Kt){Bt=Kt;break t}}Bt=""}function Xt(t,e,n){for(var i in t)e.call(n,t[i],i,t)}function Wt(t){var e={};for(var n in t)e[n]=t[n];return e}var Yt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $t(t,e){for(var n,i,r=1;r<arguments.length;r++){for(n in i=arguments[r])t[n]=i[n];for(var s=0;s<Yt.length;s++)n=Yt[s],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Qt(t){return Qt[" "](t),t}Qt[" "]=Et;var Jt,Zt,te=jt(Bt,"Opera"),ee=jt(Bt,"Trident")||jt(Bt,"MSIE"),ne=jt(Bt,"Edge"),ie=ne||ee,re=jt(Bt,"Gecko")&&!(jt(Bt.toLowerCase(),"webkit")&&!jt(Bt,"Edge"))&&!(jt(Bt,"Trident")||jt(Bt,"MSIE"))&&!jt(Bt,"Edge"),se=jt(Bt.toLowerCase(),"webkit")&&!jt(Bt,"Edge");function oe(){var t=It.document;return t?t.documentMode:void 0}t:{var ae="",ue=(Zt=Bt,re?/rv:([^\);]+)(\)|;)/.exec(Zt):ne?/Edge\/([\d\.]+)/.exec(Zt):ee?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Zt):se?/WebKit\/(\S+)/.exec(Zt):te?/(?:Version)[ \/]?(\S+)/.exec(Zt):void 0);if(ue&&(ae=ue?ue[1]:""),ee){var le=oe();if(null!=le&&le>parseFloat(ae)){Jt=String(le);break t}}Jt=ae}var ce,he={};function fe(){return function(t){var e=he;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=Gt(String(Jt)).split("."),n=Gt("9").split("."),i=Math.max(e.length,n.length),r=0;0==t&&r<i;r++){var s=e[r]||"",o=n[r]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==s[0].length&&0==o[0].length)break;t=qt(0==s[1].length?0:parseInt(s[1],10),0==o[1].length?0:parseInt(o[1],10))||qt(0==s[2].length,0==o[2].length)||qt(s[2],o[2]),s=s[3],o=o[3]}while(0==t)}return 0<=t}))}if(It.document&&ee){var de=oe();ce=de||(parseInt(Jt,10)||void 0)}else ce=void 0;var ge=ce,ve=function(){if(!It.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{It.addEventListener("test",Et,e),It.removeEventListener("test",Et,e)}catch(t){}return t}();function pe(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function me(t,e){if(pe.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(re){t:{try{Qt(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ye[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&me.Z.h.call(this)}}pe.prototype.h=function(){this.defaultPrevented=!0},Lt(me,pe);var ye={2:"touch",3:"pen",4:"mouse"};me.prototype.h=function(){me.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),we=0;function ke(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ia=r,this.key=++we,this.ca=this.fa=!1}function Te(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Ie(t){this.src=t,this.g={},this.h=0}function Ee(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=Pt(r,e);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Te(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Se(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==i)return r}return-1}Ie.prototype.add=function(t,e,n,i,r){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=Se(t,e,i,r);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new ke(e,this.src,s,!!i,r)).fa=n,t.push(e)),e};var xe="closure_lm_"+(1e6*Math.random()|0),Ce={};function Ae(t,e,n,i,r){if(i&&i.once)return Ne(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Ae(t,e[s],n,i,r);return null}return n=Ve(n),t&&t[be]?t.N(e,n,xt(i)?!!i.capture:!!i,r):De(t,e,n,!1,i,r)}function De(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=xt(r)?!!r.capture:!!r,a=Re(t);if(a||(t[xe]=a=new Ie(t)),(n=a.add(e,n,i,o,s)).proxy)return n;if(i=function(){function t(n){return e.call(t.src,t.listener,n)}var e=Me;return t}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)ve||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(Le(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function Ne(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Ne(t,e[s],n,i,r);return null}return n=Ve(n),t&&t[be]?t.O(e,n,xt(i)?!!i.capture:!!i,r):De(t,e,n,!0,i,r)}function _e(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)_e(t,e[s],n,i,r);else i=xt(i)?!!i.capture:!!i,n=Ve(n),t&&t[be]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=Se(s=t.g[e],n,i,r))&&(Te(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--)))):t&&(t=Re(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Se(e,n,i,r)),(n=-1<t?e[t]:null)&&Oe(n))}function Oe(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[be])Ee(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Le(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Re(e))?(Ee(n,t),0==n.h&&(n.src=null,e[xe]=null)):Te(t)}}}function Le(t){return t in Ce?Ce[t]:Ce[t]="on"+t}function Me(t,e){if(t.ca)t=!0;else{e=new me(e,this);var n=t.listener,i=t.ia||t.src;t.fa&&Oe(t),t=n.call(i,e)}return t}function Re(t){return(t=t[xe])instanceof Ie?t:null}var Pe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ve(t){return"function"==typeof t?t:(t[Pe]||(t[Pe]=function(e){return t.handleEvent(e)}),t[Pe])}function Fe(){Mt.call(this),this.i=new Ie(this),this.P=this,this.I=null}function Ue(t,e){var n,i=t.I;if(i)for(n=[];i;i=i.I)n.push(i);if(t=t.P,i=e.type||e,"string"==typeof e)e=new pe(e,t);else if(e instanceof pe)e.target=e.target||t;else{var r=e;$t(e=new pe(i,t),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=ze(o,i,!0,e)&&r}if(r=ze(o=e.g=t,i,!0,e)&&r,r=ze(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)r=ze(o=e.g=n[s],i,!1,e)&&r}function ze(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,u=o.ia||o.src;o.fa&&Ee(t.i,o),r=!1!==a.call(u,i)&&r}}return r&&!i.defaultPrevented}Lt(Fe,Mt),Fe.prototype[be]=!0,Fe.prototype.removeEventListener=function(t,e,n,i){_e(this,t,e,n,i)},Fe.prototype.M=function(){if(Fe.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)Te(n[i]);delete e.g[t],e.h--}}this.I=null},Fe.prototype.N=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},Fe.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var Be=It.JSON.stringify;function Ge(){var t=$e,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var je,qe=function(){"use strict";function t(){l(this,t),this.h=this.g=null}return v(t,[{key:"add",value:function(t,e){var n=He.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}}]),t}(),He=new(function(){"use strict";function t(e,n){l(this,t),this.i=e,this.j=n,this.h=0,this.g=null}return v(t,[{key:"get",value:function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}]),t}())((function(){return new Ke}),(function(t){return t.reset()})),Ke=function(){"use strict";function t(){l(this,t),this.next=this.g=this.h=null}return v(t,[{key:"set",value:function(t,e){this.h=t,this.g=e,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),t}();function Xe(t){It.setTimeout((function(){throw t}),0)}function We(t,e){je||function(){var t=It.Promise.resolve(void 0);je=function(){t.then(Qe)}}(),Ye||(je(),Ye=!0),$e.add(t,e)}var Ye=!1,$e=new qe;function Qe(){for(var t;t=Ge();){try{t.h.call(t.g)}catch(t){Xe(t)}var e=He;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ye=!1}function Je(t,e){Fe.call(this),this.h=t||1,this.g=e||It,this.j=_t(this.kb,this),this.l=Date.now()}function Ze(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function tn(t,e,n){if("function"==typeof t)n&&(t=_t(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_t(t.handleEvent,t)}return 2147483647<Number(e)?-1:It.setTimeout(t,e||0)}function en(t){t.g=tn((function(){t.g=null,t.i&&(t.i=!1,en(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}Lt(Je,Fe),(bt=Je.prototype).da=!1,bt.S=null,bt.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ue(this,"tick"),this.da&&(Ze(this),this.start()))}},bt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},bt.M=function(){Je.Z.M.call(this),Ze(this),delete this.g};var nn=function(t){"use strict";I(n,t);var e=N(n);function n(t,i){var r;return l(this,n),(r=e.call(this)).m=t,r.j=i,r.h=null,r.i=!1,r.g=null,r}return v(n,[{key:"l",value:function(t){this.h=arguments,this.g?this.i=!0:en(this)}},{key:"M",value:function(){w(y(n.prototype),"M",this).call(this),this.g&&(It.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Mt);function rn(t){Mt.call(this),this.h=t,this.g={}}Lt(rn,Mt);var sn=[];function on(t,e,n,i){Array.isArray(n)||(n&&(sn[0]=n.toString()),n=sn);for(var r=0;r<n.length;r++){var s=Ae(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function an(t){Xt(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Oe(t)}),t),t.g={}}function un(){this.g=!0}function ln(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return Be(n)}catch(t){return e}}(t,n)+(i?" "+i:"")}))}rn.prototype.M=function(){rn.Z.M.call(this),an(this)},rn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},un.prototype.Aa=function(){this.g=!1},un.prototype.info=function(){};var cn={},hn=null;function fn(){return hn=hn||new Fe}function dn(t){pe.call(this,cn.Ma,t)}function gn(t){var e=fn();Ue(e,new dn(e,t))}function vn(t,e){pe.call(this,cn.STAT_EVENT,t),this.stat=e}function pn(t){var e=fn();Ue(e,new vn(e,t))}function mn(t,e){pe.call(this,cn.Na,t),this.size=e}function yn(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return It.setTimeout((function(){t()}),e)}cn.Ma="serverreachability",Lt(dn,pe),cn.STAT_EVENT="statevent",Lt(vn,pe),cn.Na="timingevent",Lt(mn,pe);var bn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},wn={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function kn(){}function Tn(t){return t.h||(t.h=t.i())}function In(){}kn.prototype.h=null;var En,Sn={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function xn(){pe.call(this,"d")}function Cn(){pe.call(this,"c")}function An(){}function Dn(t,e,n,i){this.l=t,this.j=e,this.m=n,this.X=i||1,this.V=new rn(this),this.P=_n,t=ie?125:void 0,this.W=new Je(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Nn}function Nn(){this.i=null,this.g="",this.h=!1}Lt(xn,pe),Lt(Cn,pe),Lt(An,kn),An.prototype.g=function(){return new XMLHttpRequest},An.prototype.i=function(){return{}},En=new An;var _n=45e3,On={},Ln={};function Mn(t,e,n){t.K=1,t.v=ii(Qn(e)),t.s=n,t.U=!0,Rn(t,null)}function Rn(t,e){t.F=Date.now(),Un(t),t.A=Qn(t.v);var n=t.A,i=t.X;Array.isArray(i)||(i=[String(i)]),pi(n.h,"t",i),t.C=0,n=t.l.H,t.h=new Nn,t.g=mr(t.l,n?e:null,!t.s),0<t.O&&(t.L=new nn(_t(t.Ia,t,t.g),t.O)),on(t.V,t.g,"readystatechange",t.gb),e=t.H?Wt(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),gn(1),function(t,e,n,i,r,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+l+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function Pn(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function Vn(t,e,n){for(var i,r=!0;!t.I&&t.C<n.length;){if((i=Fn(t,n))==Ln){4==e&&(t.o=4,pn(14),r=!1),ln(t.j,t.m,null,"[Incomplete Response]");break}if(i==On){t.o=4,pn(15),ln(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}ln(t.j,t.m,i,null),qn(t,i)}Pn(t)&&i!=Ln&&i!=On&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,pn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),lr(e),e.L=!0,pn(11))):(ln(t.j,t.m,n,"[Invalid Chunked Response]"),jn(t),Gn(t))}function Fn(t,e){var n=t.C,i=e.indexOf("\n",n);return-1==i?Ln:(n=Number(e.substring(n,i)),isNaN(n)?On:(i+=1)+n>e.length?Ln:(e=e.substr(i,n),t.C=i+n,e))}function Un(t){t.Y=Date.now()+t.P,zn(t,t.P)}function zn(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=yn(_t(t.eb,t),e)}function Bn(t){t.B&&(It.clearTimeout(t.B),t.B=null)}function Gn(t){0==t.l.G||t.I||fr(t.l,t)}function jn(t){Bn(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Ze(t.W),an(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function qn(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Ii(n.i,t)))if(n.I=t.N,!t.J&&Ii(n.i,t)&&3==n.G){try{var i=n.Ca.g.parse(e)}catch(s){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;hr(n),tr(n)}ur(n),pn(18)}}else n.ta=r[1],0<n.ta-n.U&&37500>r[2]&&n.N&&0==n.A&&!n.v&&(n.v=yn(_t(n.ab,n),6e3));if(1>=Ti(n.i)&&n.ka){try{n.ka()}catch(s){}n.ka=void 0}}else gr(n,11)}else if((t.J||n.g==t)&&hr(n),!zt(e))for(r=n.Ca.g.parse(e),e=0;e<r.length;e++){var s=r[e];if(n.U=s[0],s=s[1],2==n.G)if("c"==s[0]){n.J=s[1],n.la=s[2];var o=s[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var a=s[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=s[5];null!=u&&"number"==typeof u&&0<u&&(i=1.5*u,n.K=i,n.h.info("backChannelRequestTimeoutMs_="+i)),i=n;var l=t.g;if(l){var c=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var h=i.i;!h.g&&(jt(c,"spdy")||jt(c,"quic")||jt(c,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Ei(h,h.h),h.h=null))}if(i.D){var f=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(i.sa=f,ni(i.F,i.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=t;if((i=n).oa=pr(i,i.H?i.la:null,i.W),d.J){Si(i.i,d);var g=d,v=i.K;v&&g.setTimeout(v),g.B&&(Bn(g),Un(g)),i.g=d}else ar(i);0<n.l.length&&ir(n)}else"stop"!=s[0]&&"close"!=s[0]||gr(n,7);else 3==n.G&&("stop"==s[0]||"close"==s[0]?"stop"==s[0]?gr(n,7):Zi(n):"noop"!=s[0]&&n.j&&n.j.wa(s),n.A=0)}gn(4)}catch(s){}}function Hn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(St(t)||"string"==typeof t)Vt(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(St(t)||"string"==typeof t){n=[];for(var i=t.length,r=0;r<i;r++)n.push(r)}else for(r in n=[],i=0,t)n[i++]=r;i=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(St(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),r=i.length;for(var s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}}function Kn(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof Kn)for(n=t.T(),i=0;i<n.length;i++)this.set(n[i],t.get(n[i]));else for(i in t)this.set(i,t[i])}function Xn(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var i=t.g[e];Wn(t.h,i)&&(t.g[n++]=i),e++}t.g.length=n}if(t.i!=t.g.length){var r={};for(n=e=0;e<t.g.length;)Wn(r,i=t.g[e])||(t.g[n++]=i,r[i]=1),e++;t.g.length=n}}function Wn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(bt=Dn.prototype).setTimeout=function(t){this.P=t},bt.gb=function(t){t=t.target;var e=this.L;e&&3==Wi(t)?e.l():this.Ia(t)},bt.Ia=function(t){try{if(t==this.g)t:{var e=Wi(this.g),n=this.g.Da(),i=this.g.ba();if(!(3>e)&&(3!=e||ie||this.g&&(this.h.h||this.g.ga()||Yi(this.g)))){this.I||4!=e||7==n||gn(8==n||0>=i?3:2),Bn(this);var r=this.g.ba();this.N=r;e:if(Pn(this)){var s=Yi(this.g);t="";var o=s.length,a=4==Wi(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){jn(this),Gn(this);var u="";break e}this.h.i=new It.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,t+=this.h.i.decode(s[n],{stream:a&&n==o-1});s.splice(0,o),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==r,function(t,e,n,i,r,s,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.X,e,r),this.i){if(this.$&&!this.J){e:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zt(l)){var h=l;break e}}h=null}if(!(r=h)){this.i=!1,this.o=3,pn(12),jn(this),Gn(this);break t}ln(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,qn(this,r)}this.U?(Vn(this,e,u),ie&&this.i&&3==e&&(on(this.V,this.W,"tick",this.fb),this.W.start())):(ln(this.j,this.m,u,null),qn(this,u)),4==e&&jn(this),this.i&&!this.I&&(4==e?fr(this.l,this):(this.i=!1,Un(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,pn(12)):(this.o=0,pn(13)),jn(this),Gn(this)}}}catch(e){}},bt.fb=function(){if(this.g){var t=Wi(this.g),e=this.g.ga();this.C<e.length&&(Bn(this),Vn(this,t,e),this.i&&4!=t&&Un(this))}},bt.cancel=function(){this.I=!0,jn(this)},bt.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(gn(3),pn(17)),jn(this),this.o=2,Gn(this)):zn(this,this.Y-t)},(bt=Kn.prototype).R=function(){Xn(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},bt.T=function(){return Xn(this),this.g.concat()},bt.get=function(t,e){return Wn(this.h,t)?this.h[t]:e},bt.set=function(t,e){Wn(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},bt.forEach=function(t,e){for(var n=this.T(),i=0;i<n.length;i++){var r=n[i],s=this.get(r);t.call(e,s,r,this)}};var Yn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function $n(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof $n){this.g=void 0!==e?e:t.g,Jn(this,t.j),this.s=t.s,Zn(this,t.i),ti(this,t.m),this.l=t.l,e=t.h;var n=new fi;n.i=e.i,e.g&&(n.g=new Kn(e.g),n.h=e.h),ei(this,n),this.o=t.o}else t&&(n=String(t).match(Yn))?(this.g=!!e,Jn(this,n[1]||"",!0),this.s=ri(n[2]||""),Zn(this,n[3]||"",!0),ti(this,n[4]),this.l=ri(n[5]||"",!0),ei(this,n[6]||"",!0),this.o=ri(n[7]||"")):(this.g=!!e,this.h=new fi(null,this.g))}function Qn(t){return new $n(t)}function Jn(t,e,n){t.j=n?ri(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Zn(t,e,n){t.i=n?ri(e,!0):e}function ti(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function ei(t,e,n){e instanceof fi?(t.h=e,function(t,e){e&&!t.j&&(di(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(gi(this,e),pi(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=si(e,ci)),t.h=new fi(e,t.g))}function ni(t,e,n){t.h.set(e,n)}function ii(t){return ni(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ri(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function si(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,oi),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function oi(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}$n.prototype.toString=function(){var t=[],e=this.j;e&&t.push(si(e,ai,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(si(e,ai,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(si(n,"/"==n.charAt(0)?li:ui,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",si(n,hi)),t.join("")};var ai=/[#\/\?@]/g,ui=/[#\?:]/g,li=/[#\?]/g,ci=/[#\?@]/g,hi=/#/g;function fi(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function di(t){t.g||(t.g=new Kn,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function gi(t,e){di(t),e=mi(t,e),Wn(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Wn((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Xn(t)))}function vi(t,e){return di(t),e=mi(t,e),Wn(t.g.h,e)}function pi(t,e,n){gi(t,e),0<n.length&&(t.i=null,t.g.set(mi(t,e),Ut(n)),t.h+=n.length)}function mi(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(bt=fi.prototype).add=function(t,e){di(this),this.i=null,t=mi(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},bt.forEach=function(t,e){di(this),this.g.forEach((function(n,i){Vt(n,(function(n){t.call(e,n,i,this)}),this)}),this)},bt.T=function(){di(this);for(var t=this.g.R(),e=this.g.T(),n=[],i=0;i<e.length;i++)for(var r=t[i],s=0;s<r.length;s++)n.push(e[i]);return n},bt.R=function(t){di(this);var e=[];if("string"==typeof t)vi(this,t)&&(e=Ft(e,this.g.get(mi(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Ft(e,t[n])}return e},bt.set=function(t,e){return di(this),this.i=null,vi(this,t=mi(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},bt.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},bt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var i=e[n],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var o=r;""!==i[s]&&(o+="="+encodeURIComponent(String(i[s]))),t.push(o)}}return this.i=t.join("&")};var yi=function t(e,n){"use strict";l(this,t),this.h=e,this.g=n};function bi(t){this.l=t||wi,It.PerformanceNavigationTiming?t=0<(t=It.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(It.g&&It.g.Ea&&It.g.Ea()&&It.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var wi=10;function ki(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Ti(t){return t.h?1:t.g?t.g.size:0}function Ii(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Ei(t,e){t.g?t.g.add(e):t.h=e}function Si(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function xi(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var e=t.i,n=!0,i=!1,r=void 0;try{for(var s,o=t.g.values()[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var a=s.value;e=e.concat(a.D)}}catch(t){i=!0,r=t}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return e}return Ut(t.i)}function Ci(){}function Ai(){this.g=new Ci}function Di(t,e,n){var i=n||"";try{Hn(t,(function(t,n){var r=t;xt(t)&&(r=Be(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(t){throw e.push(i+"type="+encodeURIComponent("_badmap")),t}}function Ni(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(t){}}function _i(t){this.l=t.$b||null,this.j=t.ib||!1}function Oi(t,e){Fe.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Li,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}bi.prototype.cancel=function(){if(this.i=xi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var t=!0,e=!1,n=void 0;try{for(var i,r=this.g.values()[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){i.value.cancel()}}catch(t){e=!0,n=t}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}this.g.clear()}},Ci.prototype.stringify=function(t){return It.JSON.stringify(t,void 0)},Ci.prototype.parse=function(t){return It.JSON.parse(t,void 0)},Lt(_i,kn),_i.prototype.g=function(){return new Oi(this.l,this.j)},_i.prototype.i=function(t){return function(){return t}}({}),Lt(Oi,Fe);var Li=0;function Mi(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Ri(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Pi(t)}function Pi(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(bt=Oi.prototype).open=function(t,e){if(this.readyState!=Li)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Pi(this)},bt.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||It).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},bt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ri(this)),this.readyState=Li},bt.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Pi(this)),this.g&&(this.readyState=3,Pi(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==It.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Mi(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},bt.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ri(this):Pi(this),3==this.readyState&&Mi(this)}},bt.Ua=function(t){this.g&&(this.response=this.responseText=t,Ri(this))},bt.Ta=function(t){this.g&&(this.response=t,Ri(this))},bt.ha=function(){this.g&&Ri(this)},bt.setRequestHeader=function(t,e){this.v.append(t,e)},bt.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},bt.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Oi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Vi=It.JSON.parse;function Fi(t){Fe.call(this),this.headers=new Kn,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ui,this.K=this.L=!1}Lt(Fi,Fe);var Ui="",zi=/^https?$/i,Bi=["POST","PUT"];function Gi(t){return"content-type"==t.toLowerCase()}function ji(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,qi(t),Ki(t)}function qi(t){t.D||(t.D=!0,Ue(t,"complete"),Ue(t,"error"))}function Hi(t){if(t.h&&void 0!==Tt&&(!t.C[1]||4!=Wi(t)||2!=t.ba()))if(t.v&&4==Wi(t))tn(t.Fa,0,t);else if(Ue(t,"readystatechange"),4==Wi(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break t;default:i=!1}if(!(e=i)){var r;if(r=0===n){var s=String(t.H).match(Yn)[1]||null;if(!s&&It.self&&It.self.location){var o=It.self.location.protocol;s=o.substr(0,o.length-1)}r=!zi.test(s?s.toLowerCase():"")}e=r}if(e)Ue(t,"complete"),Ue(t,"success");else{t.m=6;try{var a=2<Wi(t)?t.g.statusText:""}catch(t){a=""}t.j=a+" ["+t.ba()+"]",qi(t)}}finally{Ki(t)}}}function Ki(t,e){if(t.g){Xi(t);var n=t.g,i=t.C[0]?Et:null;t.g=null,t.C=null,e||Ue(t,"ready");try{n.onreadystatechange=i}catch(t){}}}function Xi(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(It.clearTimeout(t.A),t.A=null)}function Wi(t){return t.g?t.g.readyState:0}function Yi(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Ui:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function $i(t,e,n){t:{for(d in n){break t}d=!0}d||(n=function(t){var e="";return Xt(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ni(t,e,n))}function Qi(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ji(t){this.za=0,this.l=[],this.h=new un,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Qi("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Qi("baseRetryDelayMs",5e3,t),this.$a=Qi("retryDelaySeedMs",1e4,t),this.Ya=Qi("forwardChannelMaxRetries",2,t),this.ra=Qi("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new bi(t&&t.concurrentRequestLimit),this.Ca=new Ai,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Zi(t){if(er(t),3==t.G){var e=t.V++,n=Qn(t.F);ni(n,"SID",t.J),ni(n,"RID",e),ni(n,"TYPE","terminate"),sr(t,n),(e=new Dn(t,t.h,e,void 0)).K=2,e.v=ii(Qn(n)),n=!1,It.navigator&&It.navigator.sendBeacon&&(n=It.navigator.sendBeacon(e.v.toString(),"")),!n&&It.Image&&((new Image).src=e.v,n=!0),n||(e.g=mr(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Un(e)}vr(t)}function tr(t){t.g&&(lr(t),t.g.cancel(),t.g=null)}function er(t){tr(t),t.u&&(It.clearTimeout(t.u),t.u=null),hr(t),t.i.cancel(),t.m&&("number"==typeof t.m&&It.clearTimeout(t.m),t.m=null)}function nr(t,e){t.l.push(new yi(t.Za++,e)),3==t.G&&ir(t)}function ir(t){ki(t.i)||t.m||(t.m=!0,We(t.Ha,t),t.C=0)}function rr(t,e){var n;n=e?e.m:t.V++;var i=Qn(t.F);ni(i,"SID",t.J),ni(i,"RID",n),ni(i,"AID",t.U),sr(t,i),t.o&&t.s&&$i(i,t.o,t.s),n=new Dn(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=or(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Ei(t.i,n),Mn(n,i,e)}function sr(t,e){t.j&&Hn({},(function(t,n){ni(e,n,t)}))}function or(t,e,n){n=Math.min(t.l.length,n);var i=t.j?_t(t.j.Oa,t.j,t):null;t:for(var r=t.l,s=-1;;){var o=["count="+n];-1==s?0<n?(s=r[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);for(var a=!0,u=0;u<n;u++){var l=r[u].h,c=r[u].g;if(0>(l-=s))s=Math.max(0,r[u].h-100),a=!1;else try{Di(c,o,"req"+l+"_")}catch(t){i&&i(c)}}if(a){i=o.join("&");break t}}return t=t.l.splice(0,n),e.D=t,i}function ar(t){t.g||t.u||(t.Y=1,We(t.Ga,t),t.A=0)}function ur(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=yn(_t(t.Ga,t),dr(t,t.A)),t.A++,!0)}function lr(t){null!=t.B&&(It.clearTimeout(t.B),t.B=null)}function cr(t){t.g=new Dn(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Qn(t.oa);ni(e,"RID","rpc"),ni(e,"SID",t.J),ni(e,"CI",t.N?"0":"1"),ni(e,"AID",t.U),sr(t,e),ni(e,"TYPE","xmlhttp"),t.o&&t.s&&$i(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=ii(Qn(e)),n.s=null,n.U=!0,Rn(n,t)}function hr(t){null!=t.v&&(It.clearTimeout(t.v),t.v=null)}function fr(t,e){var n=null;if(t.g==e){hr(t),lr(t),t.g=null;var i=2}else{if(!Ii(t.i,e))return;n=e.D,Si(t.i,e),i=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==i){n=e.s?e.s.length:0,e=Date.now()-e.F;var r=t.C;Ue(i=fn(),new mn(i,n,e,r)),ir(t)}else ar(t);else if(3==(r=e.o)||0==r&&0<t.I||!(1==i&&function(t,e){return!(Ti(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=yn(_t(t.Ha,t,e),dr(t,t.C)),t.C++,0)))}(t,e)||2==i&&ur(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:gr(t,5);break;case 4:gr(t,10);break;case 3:gr(t,6);break;default:gr(t,2)}}function dr(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function gr(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var i=_t(t.jb,t);n||(n=new $n("//www.google.com/images/cleardot.gif"),It.location&&"http"==It.location.protocol||Jn(n,"https"),ii(n)),function(t,e){var n=new un;if(It.Image){var i=new Image;i.onload=Ot(Ni,n,i,"TestLoadImage: loaded",!0,e),i.onerror=Ot(Ni,n,i,"TestLoadImage: error",!1,e),i.onabort=Ot(Ni,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=Ot(Ni,n,i,"TestLoadImage: timeout",!1,e),It.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(n.toString(),i)}else pn(2);t.G=0,t.j&&t.j.va(e),vr(t),er(t)}function vr(t){t.G=0,t.I=-1,t.j&&(0==xi(t.i).length&&0==t.l.length||(t.i.i.length=0,Ut(t.l),t.l.length=0),t.j.ua())}function pr(t,e,n){var i=function(t){return t instanceof $n?Qn(t):new $n(t,void 0)}(n);if(""!=i.i)e&&Zn(i,e+"."+i.i),ti(i,i.m);else{var r=It.location;i=function(t,e,n,i){var r=new $n(null,void 0);return t&&Jn(r,t),e&&Zn(r,e),n&&ti(r,n),i&&(r.l=i),r}(r.protocol,e?e+"."+r.hostname:r.hostname,+r.port,n)}return t.aa&&Xt(t.aa,(function(t,e){ni(i,e,t)})),e=t.D,n=t.sa,e&&n&&ni(i,e,n),ni(i,"VER",t.ma),sr(t,i),i}function mr(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new Fi(new _i({ib:!0})):new Fi(t.qa)).L=t.H,e}function yr(){}function br(){if(ee&&!(10<=Number(ge)))throw Error("Environmental error: no available transport.")}function wr(t,e){Fe.call(this),this.g=new Ji(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!zt(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!zt(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new Ir(this)}function kr(t){xn.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Tr(){Cn.call(this),this.status=1}function Ir(t){this.g=t}(bt=Fi.prototype).ea=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():En.g(),this.C=this.u?Tn(this.u):Tn(En),this.g.onreadystatechange=_t(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void ji(this,t)}t=n||"";var r=new Kn(this.headers);i&&Hn(i,(function(t,e){r.set(e,t)})),i=function(t){t:{for(var e=Gi,n=t.length,i="string"==typeof t?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t)){e=r;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(r.T()),n=It.FormData&&t instanceof It.FormData,!(0<=Pt(Bi,e))||i||n||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Xi(this),0<this.B&&((this.K=function(t){return ee&&fe()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_t(this.pa,this)):this.A=tn(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){ji(this,t)}},bt.pa=function(){void 0!==Tt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ue(this,"timeout"),this.abort(8))},bt.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ue(this,"complete"),Ue(this,"abort"),Ki(this))},bt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ki(this,!0)),Fi.Z.M.call(this)},bt.Fa=function(){this.s||(this.F||this.v||this.l?Hi(this):this.cb())},bt.cb=function(){Hi(this)},bt.ba=function(){try{return 2<Wi(this)?this.g.status:-1}catch(t){return-1}},bt.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},bt.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Vi(e)}},bt.Da=function(){return this.m},bt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(bt=Ji.prototype).ma=8,bt.G=1,bt.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},bt.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new Dn(this,this.h,t,void 0),n=this.s;if(this.P&&(n?$t(n=Wt(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var i=0,r=0;r<this.l.length;r++){var s=this.l[r];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(i+=s)){i=r;break t}if(4096===i||r===this.l.length-1){i=r+1;break t}}i=1e3}else i=1e3;i=or(this,e,i),ni(r=Qn(this.F),"RID",t),ni(r,"CVER",22),this.D&&ni(r,"X-HTTP-Session-Id",this.D),sr(this,r),this.o&&n&&$i(r,this.o,n),Ei(this.i,e),this.Ra&&ni(r,"TYPE","init"),this.ja?(ni(r,"$req",i),ni(r,"SID","null"),e.$=!0,Mn(e,r,null)):Mn(e,r,i),this.G=2}}else 3==this.G&&(t?rr(this,t):0==this.l.length||ki(this.i)||rr(this))},bt.Ga=function(){if(this.u=null,cr(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=yn(_t(this.bb,this),t)}},bt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,pn(10),tr(this),cr(this))},bt.ab=function(){null!=this.v&&(this.v=null,tr(this),ur(this),pn(19))},bt.jb=function(t){t?(this.h.info("Successfully pinged google.com"),pn(2)):(this.h.info("Failed to ping google.com"),pn(1))},(bt=yr.prototype).xa=function(){},bt.wa=function(){},bt.va=function(){},bt.ua=function(){},bt.Oa=function(){},br.prototype.g=function(t,e){return new wr(t,e)},Lt(wr,Fe),wr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),We(_t(t.hb,t,e))),pn(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=pr(t,null,t.W),ir(t)},wr.prototype.close=function(){Zi(this.g)},wr.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,nr(this.g,e)}else this.v?((e={}).__data__=Be(t),nr(this.g,e)):nr(this.g,t)},wr.prototype.M=function(){this.g.j=null,delete this.j,Zi(this.g),delete this.g,wr.Z.M.call(this)},Lt(kr,xn),Lt(Tr,Cn),Lt(Ir,yr),Ir.prototype.xa=function(){Ue(this.g,"a")},Ir.prototype.wa=function(t){Ue(this.g,new kr(t))},Ir.prototype.va=function(t){Ue(this.g,new Tr(t))},Ir.prototype.ua=function(){Ue(this.g,"b")},br.prototype.createWebChannel=br.prototype.g,wr.prototype.send=wr.prototype.u,wr.prototype.open=wr.prototype.m,wr.prototype.close=wr.prototype.close,bn.NO_ERROR=0,bn.TIMEOUT=8,bn.HTTP_ERROR=6,wn.COMPLETE="complete",In.EventType=Sn,Sn.OPEN="a",Sn.CLOSE="b",Sn.ERROR="c",Sn.MESSAGE="d",Fe.prototype.listen=Fe.prototype.N,Fi.prototype.listenOnce=Fi.prototype.O,Fi.prototype.getLastError=Fi.prototype.La,Fi.prototype.getLastErrorCode=Fi.prototype.Da,Fi.prototype.getStatus=Fi.prototype.ba,Fi.prototype.getResponseJson=Fi.prototype.Qa,Fi.prototype.getResponseText=Fi.prototype.ga,Fi.prototype.send=Fi.prototype.ea;var Er,Sr,xr=kt.createWebChannelTransport=function(){return new br},Cr=kt.getStatEventTarget=function(){return fn()},Ar=kt.ErrorCode=bn,Dr=kt.EventType=wn,Nr=kt.Event=cn,_r=kt.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Or=kt.FetchXmlHttpFactory=_i,Lr=kt.WebChannel=In,Mr=kt.XhrIo=Fi,Rr={};function Pr(){throw new Error("setTimeout has not been defined")}function Vr(){throw new Error("clearTimeout has not been defined")}function Fr(t){if(Er===setTimeout)return setTimeout(t,0);if((Er===Pr||!Er)&&setTimeout)return Er=setTimeout,setTimeout(t,0);try{return Er(t,0)}catch(e){try{return Er.call(null,t,0)}catch(e){return Er.call(this,t,0)}}}!function(){try{Er="function"==typeof setTimeout?setTimeout:Pr}catch(t){Er=Pr}try{Sr="function"==typeof clearTimeout?clearTimeout:Vr}catch(t){Sr=Vr}}();var Ur,zr=[],Br=!1,Gr=-1;function jr(){Br&&Ur&&(Br=!1,Ur.length?zr=Ur.concat(zr):Gr=-1,zr.length&&qr())}function qr(){if(!Br){var t=Fr(jr);Br=!0;for(var e=zr.length;e;){for(Ur=zr,zr=[];++Gr<e;)Ur&&Ur[Gr].run();Gr=-1,e=zr.length}Ur=null,Br=!1,function(t){if(Sr===clearTimeout)return clearTimeout(t);if((Sr===Vr||!Sr)&&clearTimeout)return Sr=clearTimeout,clearTimeout(t);try{Sr(t)}catch(e){try{return Sr.call(null,t)}catch(e){return Sr.call(this,t)}}}(t)}}function Hr(t,e){this.fun=t,this.array=e}function Kr(){}Rr.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];zr.push(new Hr(t,e)),1!==zr.length||Br||Fr(qr)},Hr.prototype.run=function(){this.fun.apply(null,this.array)},Rr.title="browser",Rr.browser=!0,Rr.env={},Rr.argv=[],Rr.version="",Rr.versions={},Rr.on=Kr,Rr.addListener=Kr,Rr.once=Kr,Rr.off=Kr,Rr.removeListener=Kr,Rr.removeAllListeners=Kr,Rr.emit=Kr,Rr.prependListener=Kr,Rr.prependOnceListener=Kr,Rr.listeners=function(t){return[]},Rr.binding=function(t){throw new Error("process.binding is not supported")},Rr.cwd=function(){return"/"},Rr.chdir=function(t){throw new Error("process.chdir is not supported")},Rr.umask=function(){return 0};var Xr="@firebase/firestore",Wr=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e){l(this,t),this.uid=e}return v(t,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(t){return t.uid===this.uid}}]),t}();Wr.UNAUTHENTICATED=new Wr(null),Wr.GOOGLE_CREDENTIALS=new Wr("google-credentials-uid"),Wr.FIRST_PARTY=new Wr("first-party-uid"),Wr.MOCK_USER=new Wr("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Yr="9.6.7",$r=new Z("@firebase/firestore");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(){return $r.logLevel}function Jr(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if($r.logLevel<=K.DEBUG){var r,s=n.map(es);(r=$r).debug.apply(r,["Firestore (".concat(Yr,"): ").concat(t)].concat(A(s)))}}function Zr(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if($r.logLevel<=K.ERROR){var r,s=n.map(es);(r=$r).error.apply(r,["Firestore (".concat(Yr,"): ").concat(t)].concat(A(s)))}}function ts(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if($r.logLevel<=K.WARN){var r,s=n.map(es);(r=$r).warn.apply(r,["Firestore (".concat(Yr,"): ").concat(t)].concat(A(s)))}}function es(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",e="FIRESTORE (".concat(Yr,") INTERNAL ASSERTION FAILED: ")+t;throw Zr(e),new Error(e)}function is(t,e){t||ns()}function rs(t,e){return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ss={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},os=function(t){"use strict";I(n,t);var e=N(n);function n(t,i){var r;return l(this,n),(r=e.call(this,t,i)).code=t,r.message=i,r.toString=function(){return"".concat(r.name,": [code=").concat(r.code,"]: ").concat(r.message)},S(r)}return n}(P),as=function t(){"use strict";var e=this;l(this,t),this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},us=function t(e,n){"use strict";l(this,t),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))},ls=function(){"use strict";function t(){l(this,t)}return v(t,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(t,e){t.enqueueRetryable((function(){return e(Wr.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),t}(),cs=function(){"use strict";function t(e){l(this,t),this.t=e,this.currentUser=Wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return v(t,[{key:"start",value:function(t,n){var i=this,r=this.i,s=function(t){return i.i!==r?(r=i.i,n(t)):Promise.resolve()},o=new as;this.o=function(){var e=i;i.i++,i.currentUser=i.u(),o.resolve(),o=new as,t.enqueueRetryable((function(){return s(e.currentUser)}))};var a=function(){var n,r=i,a=o;t.enqueueRetryable((n=u(e(_).mark((function t(){return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.promise;case 2:return t.next=4,s(r.currentUser);case 4:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)}))},l=function(t){Jr("FirebaseAuthCredentialsProvider","Auth detected"),i.auth=t,i.auth.addAuthTokenListener(i.o),a()};this.t.onInit((function(t){return l(t)})),setTimeout((function(){if(!i.auth){var t=i.t.getImmediate({optional:!0});t?l(t):(Jr("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new as)}}),0),a()}},{key:"getToken",value:function(){var t=this,e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.i!==e?(Jr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(is("string"==typeof n.accessToken),new us(n.accessToken,t.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var t=this.auth&&this.auth.getUid();return is(null===t||"string"==typeof t),new Wr(t)}}]),t}(),hs=function t(e,n,i){"use strict";l(this,t),this.type="FirstParty",this.user=Wr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var r=e.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)},fs=function(){"use strict";function t(e,n,i){l(this,t),this.h=e,this.l=n,this.m=i}return v(t,[{key:"getToken",value:function(){return Promise.resolve(new hs(this.h,this.l,this.m))}},{key:"start",value:function(t,e){t.enqueueRetryable((function(){return e(Wr.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),t}(),ds=function t(e){"use strict";l(this,t),this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)},gs=function(){"use strict";function t(e){l(this,t),this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}return v(t,[{key:"start",value:function(t,e){var n=this;this.o=function(i){t.enqueueRetryable((function(){return function(t){null!=t.error&&Jr("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(t.error.message));var i=t.token!==n.p;return n.p=t.token,Jr("FirebaseAppCheckTokenProvider","Received ".concat(i?"new":"existing"," token.")),i?e(t.token):Promise.resolve()}(i)}))};var i=function(t){Jr("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=t,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(t){return i(t)})),setTimeout((function(){if(!n.appCheck){var t=n.g.getImmediate({optional:!0});t?i(t):Jr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var t=this,e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((function(e){return e?(is("string"==typeof e.token),t.p=e.token,new ds(e.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),t}(),vs=
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e,n){var i=this;l(this,t),this.previousValue=e,n&&(n.sequenceNumberHandler=function(t){return i.I(t)},this.T=function(t){return n.writeSequenceNumber(t)})}return v(t,[{key:"I",value:function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}},{key:"next",value:function(){var t=++this.previousValue;return this.T&&this.T(t),t}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ps(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vs.A=-1;var ms=function(){"use strict";function t(){l(this,t)}return v(t,null,[{key:"R",value:function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var i=ps(40),r=0;r<i.length;++r)n.length<20&&i[r]<e&&(n+=t.charAt(i[r]%t.length));return n}}]),t}();function ys(t,e){return t<e?-1:t>e?1:0}function bs(t,e,n){return t.length===e.length&&t.every((function(t,i){return n(t,e[i])}))}var ws=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e,n){if(l(this,t),this.seconds=e,this.nanoseconds=n,n<0)throw new os(ss.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new os(ss.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new os(ss.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new os(ss.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return v(t,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(t){return this.seconds===t.seconds?ys(this.nanoseconds,t.nanoseconds):ys(this.seconds,t.seconds)}},{key:"isEqual",value:function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return t.fromMillis(Date.now())}},{key:"fromDate",value:function(e){return t.fromMillis(e.getTime())}},{key:"fromMillis",value:function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))}}]),t}(),ks=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e){l(this,t),this.timestamp=e}return v(t,[{key:"compareTo",value:function(t){return this.timestamp._compareTo(t.timestamp)}},{key:"isEqual",value:function(t){return this.timestamp.isEqual(t.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(e){return new t(e)}},{key:"min",value:function(){return new t(new ws(0,0))}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ts(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Is(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Es(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ss=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e,n,i){l(this,t),void 0===n?n=0:n>e.length&&ns(),void 0===i?i=e.length-n:i>e.length-n&&ns(),this.segments=e,this.offset=n,this.len=i}return v(t,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(e){return 0===t.comparator(this,e)}},{key:"child",value:function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(t){return this.segments[this.offset+t]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}},{key:"isImmediateParentOf",value:function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}},{key:"forEach",value:function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(t,e){for(var n=Math.min(t.length,e.length),i=0;i<n;i++){var r=t.get(i),s=e.get(i);if(r<s)return-1;if(r>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}]),t}(),xs=function(t){"use strict";I(n,t);var e=N(n);function n(){return l(this,n),e.apply(this,arguments)}return v(n,[{key:"construct",value:function(t,e,i){return new n(t,e,i)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var r=[],s=!0,o=!1,a=void 0;try{for(var u,l=e[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){var c,h=u.value;if(h.indexOf("//")>=0)throw new os(ss.INVALID_ARGUMENT,"Invalid segment (".concat(h,"). Paths must not contain // in them."));(c=r).push.apply(c,A(h.split("/").filter((function(t){return t.length>0}))))}}catch(t){o=!0,a=t}finally{try{s||null==l.return||l.return()}finally{if(o)throw a}}return new n(r)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ss),Cs=/^[_a-zA-Z][_a-zA-Z0-9]*$/,As=function(t){"use strict";I(n,t);var e=N(n);function n(){return l(this,n),e.apply(this,arguments)}return v(n,[{key:"construct",value:function(t,e,i){return new n(t,e,i)}},{key:"canonicalString",value:function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(t){return Cs.test(t)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(t){for(var e=[],i="",r=0,s=function(){if(0===i.length)throw new os(ss.INVALID_ARGUMENT,"Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));e.push(i),i=""},o=!1;r<t.length;){var a=t[r];if("\\"===a){if(r+1===t.length)throw new os(ss.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[r+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new os(ss.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,r+=2}else"`"===a?(o=!o,r++):"."!==a||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new os(ss.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ss),Ds=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e){l(this,t),this.fields=e,e.sort(As.comparator)}return v(t,[{key:"covers",value:function(t){var e=!0,n=!1,i=void 0;try{for(var r,s=this.fields[Symbol.iterator]();!(e=(r=s.next()).done);e=!0){if(r.value.isPrefixOf(t))return!0}}catch(t){n=!0,i=t}finally{try{e||null==s.return||s.return()}finally{if(n)throw i}}return!1}},{key:"isEqual",value:function(t){return bs(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))}}]),t}();var Ns=Symbol.iterator,_s=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e){l(this,t),this.binaryString=e}return v(t,[{key:Ns,value:function(){var t=this,e=0;return{next:function(){return e<t.binaryString.length?{value:t.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){var t;return t=this.binaryString,btoa(t)}},{key:"toUint8Array",value:function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(t){return ys(this.binaryString,t.binaryString)}},{key:"isEqual",value:function(t){return this.binaryString===t.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))}}]),t}();_s.EMPTY_BYTE_STRING=new _s("");var Os=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ls(t){if(is(!!t),"string"==typeof t){var e=0,n=Os.exec(t);if(is(!!n),n[1]){var i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}var r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ms(t.seconds),nanos:Ms(t.nanos)}}function Ms(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Rs(t){return"string"==typeof t?_s.fromBase64String(t):_s.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Vs(t){var e=t.mapValue.fields.__previous_value__;return Ps(e)?Vs(e):e}function Fs(t){var e=Ls(t.mapValue.fields.__local_write_time__.timestampValue);return new ws(e.seconds,e.nanos)}var Us=function t(e,n,i,r,s,o,a,u){"use strict";l(this,t),this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=u},zs=function(){"use strict";function t(e,n){l(this,t),this.projectId=e,this.database=n||"(default)"}return v(t,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}}],[{key:"empty",value:function(){return new t("","")}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Bs(t){return null==t}function Gs(t){return 0===t&&1/t==-1/0}function js(t){return"number"==typeof t&&Number.isInteger(t)&&!Gs(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var qs=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e){l(this,t),this.path=e}return v(t,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(t){return null!==t&&0===xs.comparator(this.path,t.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(e){return new t(xs.fromString(e))}},{key:"fromName",value:function(e){return new t(xs.fromString(e).popFirst(5))}},{key:"empty",value:function(){return new t(xs.emptyPath())}},{key:"comparator",value:function(t,e){return xs.comparator(t.path,e.path)}},{key:"isDocumentKey",value:function(t){return t.length%2==0}},{key:"fromSegments",value:function(e){return new t(new xs(e.slice()))}}]),t}(),Hs={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ps(t)?4:10:ns()}function Xs(t,e){if(t===e)return!0;var n,i=Ks(t);if(i!==Ks(e))return!1;switch(i){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fs(t).isEqual(Fs(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Ls(t.timestampValue),i=Ls(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return n=e,Rs(t.bytesValue).isEqual(Rs(n.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ms(t.geoPointValue.latitude)===Ms(e.geoPointValue.latitude)&&Ms(t.geoPointValue.longitude)===Ms(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ms(t.integerValue)===Ms(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Ms(t.doubleValue),i=Ms(e.doubleValue);return n===i?Gs(n)===Gs(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return bs(t.arrayValue.values||[],e.arrayValue.values||[],Xs);case 10:return function(t,e){var n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(Ts(n)!==Ts(i))return!1;for(var r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!Xs(n[r],i[r])))return!1;return!0}(t,e);default:return ns()}}function Ws(t,e){return void 0!==(t.values||[]).find((function(t){return Xs(t,e)}))}function Ys(t,e){if(t===e)return 0;var n,i,r,s,o=Ks(t),a=Ks(e);if(o!==a)return ys(o,a);switch(o){case 0:return 0;case 1:return ys(t.booleanValue,e.booleanValue);case 2:return i=e,r=Ms((n=t).integerValue||n.doubleValue),s=Ms(i.integerValue||i.doubleValue),r<s?-1:r>s?1:r===s?0:isNaN(r)?isNaN(s)?0:-1:1;case 3:return $s(t.timestampValue,e.timestampValue);case 4:return $s(Fs(t),Fs(e));case 5:return ys(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Rs(t),i=Rs(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),i=e.split("/"),r=0;r<n.length&&r<i.length;r++){var s=ys(n[r],i[r]);if(0!==s)return s}return ys(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=ys(Ms(t.latitude),Ms(e.latitude));return 0!==n?n:ys(Ms(t.longitude),Ms(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],i=e.values||[],r=0;r<n.length&&r<i.length;++r){var s=Ys(n[r],i[r]);if(s)return s}return ys(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(var o=0;o<i.length&&o<s.length;++o){var a=ys(i[o],s[o]);if(0!==a)return a;var u=Ys(n[i[o]],r[s[o]]);if(0!==u)return u}return ys(i.length,s.length)}(t.mapValue,e.mapValue);default:throw ns()}}function $s(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ys(t,e);var n=Ls(t),i=Ls(e),r=ys(n.seconds,i.seconds);return 0!==r?r:ys(n.nanos,i.nanos)}function Qs(t){return Js(t)}function Js(t){var e,n,i,r;return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(i=t.timestampValue,r=Ls(i),"time(".concat(r.seconds,",").concat(r.nanos,")")):"stringValue"in t?t.stringValue:"bytesValue"in t?Rs(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,qs.fromName(n).toString()):"geoPointValue"in t?"geo(".concat((e=t.geoPointValue).latitude,",").concat(e.longitude,")"):"arrayValue"in t?function(t){var e="[",n=!0,i=!0,r=!1,s=void 0;try{for(var o,a=(t.values||[])[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var u=o.value;n?n=!1:e+=",",e+=Js(u)}}catch(t){r=!0,s=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw s}}return e+"]"}(t.arrayValue):"mapValue"in t?function(t){var e=Object.keys(t.fields||{}).sort(),n="{",i=!0,r=!0,s=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=a.value;i?i=!1:n+=",",n+="".concat(l,":").concat(Js(t.fields[l]))}}catch(t){s=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(s)throw o}}return n+"}"}(t.mapValue):ns()}function Zs(t,e){return{referenceValue:"projects/".concat(t.projectId,"/databases/").concat(t.database,"/documents/").concat(e.path.canonicalString())}}function to(t){return!!t&&"integerValue"in t}function eo(t){return!!t&&"arrayValue"in t}function no(t){return!!t&&"nullValue"in t}function io(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ro(t){return!!t&&"mapValue"in t}function so(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return Is(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=so(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},i=0;i<(t.arrayValue.values||[]).length;++i)n.arrayValue.values[i]=so(t.arrayValue.values[i]);return n}return Object.assign({},t)}var oo=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e){l(this,t),this.value=e}return v(t,[{key:"field",value:function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!ro(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null}},{key:"set",value:function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=so(e)}},{key:"setAll",value:function(t){var e=this,n=As.emptyPath(),i={},r=[];t.forEach((function(t,s){if(!n.isImmediateParentOf(s)){var o=e.getFieldsMap(n);e.applyChanges(o,i,r),i={},r=[],n=s.popLast()}t?i[s.lastSegment()]=so(t):r.push(s.lastSegment())}));var s=this.getFieldsMap(n);this.applyChanges(s,i,r)}},{key:"delete",value:function(t){var e=this.field(t.popLast());ro(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}},{key:"isEqual",value:function(t){return Xs(this.value,t.value)}},{key:"getFieldsMap",value:function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var i=e.mapValue.fields[t.get(n)];ro(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}},{key:"applyChanges",value:function(t,e,n){Is(e,(function(e,n){return t[e]=n}));var i=!0,r=!1,s=void 0;try{for(var o,a=n[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var u=o.value;delete t[u]}}catch(t){r=!0,s=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw s}}}},{key:"clone",value:function(){return new t(so(this.value))}}],[{key:"empty",value:function(){return new t({mapValue:{}})}}]),t}();function ao(t){var e=[];return Is(t.fields,(function(t,n){var i=new As([t]);if(ro(n)){var r=ao(n.mapValue).fields,s=!0,o=!1,a=void 0;if(0===r.length)e.push(i);else try{for(var u,l=r[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){var c=u.value;e.push(i.child(c))}}catch(t){o=!0,a=t}finally{try{s||null==l.return||l.return()}finally{if(o)throw a}}}else e.push(i)})),new Ds(e)}var uo=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e,n,i,r,s,o){l(this,t),this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.data=s,this.documentState=o}return v(t,[{key:"convertToFoundDocument",value:function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}},{key:"convertToNoDocument",value:function(t){return this.version=t,this.documentType=2,this.data=oo.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(t){return this.version=t,this.documentType=3,this.data=oo.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(t){return this.readTime=t,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}},{key:"mutableCopy",value:function(){return new t(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(e){return new t(e,0,ks.min(),ks.min(),oo.empty(),0)}},{key:"newFoundDocument",value:function(e,n,i){return new t(e,1,n,ks.min(),i,0)}},{key:"newNoDocument",value:function(e,n){return new t(e,2,n,ks.min(),oo.empty(),0)}},{key:"newUnknownDocument",value:function(e,n){return new t(e,3,n,ks.min(),oo.empty(),2)}}]),t}(),lo=function t(e,n,i,r){"use strict";l(this,t),this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r};lo.UNKNOWN_ID=-1;var co=function t(e){"use strict";var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;l(this,t),this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.P=null};function ho(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new co(t,e,n,i,r,s,o)}function fo(t){var e=rs(t);if(null===e.P){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){var e;return(e=t).field.canonicalString()+e.op.toString()+Qs(e.value)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.canonicalString()+e.dir;var e})).join(","),Bs(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((function(t){return Qs(t)})).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((function(t){return Qs(t)})).join(",")),e.P=n}return e.P}function go(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Co(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var i=0;i<t.filters.length;i++)if(r=t.filters[i],s=e.filters[i],r.op!==s.op||!r.field.isEqual(s.field)||!Xs(r.value,s.value))return!1;var r,s;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Do(t.startAt,e.startAt)&&Do(t.endAt,e.endAt)}function vo(t){return qs.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var po=function(t){"use strict";I(n,(function t(){l(this,t)}));var e=N(n);function n(t,i,r){var s;return l(this,n),(s=e.call(this)).field=t,s.op=i,s.value=r,S(s)}return v(n,[{key:"matches",value:function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.V(Ys(e,this.value)):null!==e&&Ks(this.value)===Ks(e)&&this.V(Ys(e,this.value))}},{key:"V",value:function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ns()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.v(t,e,i):new mo(t,e,i):"array-contains"===e?new ko(t,i):"in"===e?new To(t,i):"not-in"===e?new Io(t,i):"array-contains-any"===e?new Eo(t,i):new n(t,e,i)}},{key:"v",value:function(t,e,n){return"in"===e?new yo(t,n):new bo(t,n)}}]),n}(),mo=function(t){"use strict";I(n,t);var e=N(n);function n(t,i,r){var s;return l(this,n),(s=e.call(this,t,i,r)).key=qs.fromName(r.referenceValue),S(s)}return v(n,[{key:"matches",value:function(t){var e=qs.comparator(t.key,this.key);return this.V(e)}}]),n}(po),yo=function(t){"use strict";I(n,t);var e=N(n);function n(t,i){var r;return l(this,n),(r=e.call(this,t,"in",i)).keys=wo("in",i),S(r)}return v(n,[{key:"matches",value:function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))}}]),n}(po),bo=function(t){"use strict";I(n,t);var e=N(n);function n(t,i){var r;return l(this,n),(r=e.call(this,t,"not-in",i)).keys=wo("not-in",i),S(r)}return v(n,[{key:"matches",value:function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))}}]),n}(po);function wo(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return qs.fromName(t.referenceValue)}))}var ko=function(t){"use strict";I(n,t);var e=N(n);function n(t,i){return l(this,n),e.call(this,t,"array-contains",i)}return v(n,[{key:"matches",value:function(t){var e=t.data.field(this.field);return eo(e)&&Ws(e.arrayValue,this.value)}}]),n}(po),To=function(t){"use strict";I(n,t);var e=N(n);function n(t,i){return l(this,n),e.call(this,t,"in",i)}return v(n,[{key:"matches",value:function(t){var e=t.data.field(this.field);return null!==e&&Ws(this.value.arrayValue,e)}}]),n}(po),Io=function(t){"use strict";I(n,t);var e=N(n);function n(t,i){return l(this,n),e.call(this,t,"not-in",i)}return v(n,[{key:"matches",value:function(t){if(Ws(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Ws(this.value.arrayValue,e)}}]),n}(po),Eo=function(t){"use strict";I(n,t);var e=N(n);function n(t,i){return l(this,n),e.call(this,t,"array-contains-any",i)}return v(n,[{key:"matches",value:function(t){var e=this,n=t.data.field(this.field);return!(!eo(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Ws(e.value.arrayValue,t)}))}}]),n}(po),So=function t(e,n){"use strict";l(this,t),this.position=e,this.inclusive=n},xo=function t(e){"use strict";var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";l(this,t),this.field=e,this.dir=n};function Co(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Ao(t,e,n){for(var i=0,r=0;r<t.position.length;r++){var s=e[r],o=t.position[r];if(i=s.field.isKeyField()?qs.comparator(qs.fromName(o.referenceValue),n.key):Ys(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function Do(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Xs(t.position[n],e.position[n]))return!1;return!0}var No=function t(e){"use strict";var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;l(this,t),this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.D=null,this.C=null,this.startAt,this.endAt};function _o(t,e,n,i,r,s,o,a){return new No(t,e,n,i,r,s,o,a)}function Oo(t){return new No(t)}function Lo(t){return!Bs(t.limit)&&"F"===t.limitType}function Mo(t){return!Bs(t.limit)&&"L"===t.limitType}function Ro(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Po(t){var e=!0,n=!1,i=void 0;try{for(var r,s=t.filters[Symbol.iterator]();!(e=(r=s.next()).done);e=!0){var o=r.value;if(o.S())return o.field}}catch(t){n=!0,i=t}finally{try{e||null==s.return||s.return()}finally{if(n)throw i}}return null}function Vo(t){return null!==t.collectionGroup}function Fo(t){var e=rs(t);if(null===e.D){e.D=[];var n=Po(e),i=Ro(e);if(null!==n&&null===i)n.isKeyField()||e.D.push(new xo(n)),e.D.push(new xo(As.keyField(),"asc"));else{var r=!1,s=!0,o=!1,a=void 0;try{for(var u,l=e.explicitOrderBy[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){var c=u.value;e.D.push(c),c.field.isKeyField()&&(r=!0)}}catch(t){o=!0,a=t}finally{try{s||null==l.return||l.return()}finally{if(o)throw a}}if(!r){var h=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new xo(As.keyField(),h))}}}return e.D}function Uo(t){var e=rs(t);if(!e.C)if("F"===e.limitType)e.C=ho(e.path,e.collectionGroup,Fo(e),e.filters,e.limit,e.startAt,e.endAt);else{var n=[],i=!0,r=!1,s=void 0;try{for(var o,a=Fo(e)[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var u=o.value,l="desc"===u.dir?"asc":"desc";n.push(new xo(u.field,l))}}catch(t){r=!0,s=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw s}}var c=e.endAt?new So(e.endAt.position,!e.endAt.inclusive):null,h=e.startAt?new So(e.startAt.position,!e.startAt.inclusive):null;e.C=ho(e.path,e.collectionGroup,n,e.filters,e.limit,c,h)}return e.C}function zo(t,e,n){return new No(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bo(t,e){return go(Uo(t),Uo(e))&&t.limitType===e.limitType}function Go(t){return"".concat(fo(Uo(t)),"|lt:").concat(t.limitType)}function jo(t){return"Query(target=".concat((e=Uo(t),n=e.path.canonicalString(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=", filters: [".concat(e.filters.map((function(t){var e;return"".concat((e=t).field.canonicalString()," ").concat(e.op," ").concat(Qs(e.value))})).join(", "),"]")),Bs(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=", orderBy: [".concat(e.orderBy.map((function(t){return"".concat((e=t).field.canonicalString()," (").concat(e.dir,")");var e})).join(", "),"]")),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((function(t){return Qs(t)})).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((function(t){return Qs(t)})).join(",")),"Target(".concat(n,")")),"; limitType=").concat(t.limitType,")");var e,n}function qo(t,e){return e.isFoundDocument()&&(r=t,o=(s=e).key.path,null!==r.collectionGroup?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):qs.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o))&&function(t,e){var n=!0,i=!1,r=void 0;try{for(var s,o=t.explicitOrderBy[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var a=s.value;if(!a.field.isKeyField()&&null===e.data.field(a.field))return!1}}catch(t){i=!0,r=t}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return!0}(t,e)&&function(t,e){var n=!0,i=!1,r=void 0;try{for(var s,o=t.filters[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){if(!s.value.matches(e))return!1}}catch(t){i=!0,r=t}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return!0}(t,e)&&(i=e,!((n=t).startAt&&!function(t,e,n){var i=Ao(t,e,n);return t.inclusive?i<=0:i<0}(n.startAt,Fo(n),i)||n.endAt&&!function(t,e,n){var i=Ao(t,e,n);return t.inclusive?i>=0:i>0}(n.endAt,Fo(n),i)));var n,i,r,s,o}function Ho(t){return function(e,n){var i=!1,r=!0,s=!1,o=void 0;try{for(var a,u=Fo(t)[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=a.value,c=Ko(l,e,n);if(0!==c)return c;i=i||l.field.isKeyField()}}catch(t){s=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(s)throw o}}return 0}}function Ko(t,e,n){var i,r,s,o,a=t.field.isKeyField()?qs.comparator(e.key,n.key):(i=t.field,r=n,s=e.data.field(i),o=r.data.field(i),null!==s&&null!==o?Ys(s,o):ns());switch(t.dir){case"asc":return a;case"desc":return-1*a;default:return ns()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(t,e){if(t.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gs(e)?"-0":e}}function Wo(t){return{integerValue:""+t}}function Yo(t,e){return js(e)?Wo(e):Xo(t,e)}var $o=function t(){"use strict";l(this,t),this._=void 0};function Qo(t,e,n){return t instanceof ta?(r=e,s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(i=n).seconds,nanos:i.nanoseconds}}}},r&&(s.fields.__previous_value__=r),{mapValue:s}):t instanceof ea?na(t,e):t instanceof ia?ra(t,e):function(t,e){var n=Zo(t,e),i=oa(n)+oa(t.k);return to(n)&&to(t.k)?Wo(i):Xo(t.O,i)}(t,e);var i,r,s}function Jo(t,e,n){return t instanceof ea?na(t,e):t instanceof ia?ra(t,e):n}function Zo(t,e){var n,i;return t instanceof sa?to(n=e)||(i=n)&&"doubleValue"in i?e:{integerValue:0}:null}var ta=function(t){"use strict";I(n,t);var e=N(n);function n(){return l(this,n),e.apply(this,arguments)}return n}($o),ea=function(t){"use strict";I(n,t);var e=N(n);function n(t){var i;return l(this,n),(i=e.call(this)).elements=t,S(i)}return n}($o);function na(t,e){var n=aa(e),i=!0,r=!1,s=void 0;try{for(var o,a=function(t,e){var i=e.value;n.some((function(t){return Xs(t,i)}))||n.push(i)},u=t.elements[Symbol.iterator]();!(i=(o=u.next()).done);i=!0)a(0,o)}catch(t){r=!0,s=t}finally{try{i||null==u.return||u.return()}finally{if(r)throw s}}return{arrayValue:{values:n}}}var ia=function(t){"use strict";I(n,t);var e=N(n);function n(t){var i;return l(this,n),(i=e.call(this)).elements=t,S(i)}return n}($o);function ra(t,e){var n=aa(e),i=!0,r=!1,s=void 0;try{for(var o,a=function(t,e){var i=e.value;n=n.filter((function(t){return!Xs(t,i)}))},u=t.elements[Symbol.iterator]();!(i=(o=u.next()).done);i=!0)a(0,o)}catch(t){r=!0,s=t}finally{try{i||null==u.return||u.return()}finally{if(r)throw s}}return{arrayValue:{values:n}}}var sa=function(t){"use strict";I(n,t);var e=N(n);function n(t,i){var r;return l(this,n),(r=e.call(this)).O=t,r.k=i,S(r)}return n}($o);function oa(t){return Ms(t.integerValue||t.doubleValue)}function aa(t){return eo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ua=function t(e,n){"use strict";l(this,t),this.version=e,this.transformResults=n},la=function(){"use strict";function t(e,n){l(this,t),this.updateTime=e,this.exists=n}return v(t,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}],[{key:"none",value:function(){return new t}},{key:"exists",value:function(e){return new t(void 0,e)}},{key:"updateTime",value:function(e){return new t(e)}}]),t}();function ca(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var ha=function t(){"use strict";l(this,t)};function fa(t,e,n){var i,r,s,o,a;t instanceof ma?(r=e,s=n,o=(i=t).value.clone(),a=wa(i.fieldTransforms,r,s.transformResults),o.setAll(a),r.convertToFoundDocument(s.version,o).setHasCommittedMutations()):t instanceof ya?function(t,e,n){if(ca(t.precondition,e)){var i=wa(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(ba(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function da(t,e,n){var i;t instanceof ma?function(t,e,n){if(ca(t.precondition,e)){var i=t.value.clone(),r=ka(t.fieldTransforms,n,e);i.setAll(r),e.convertToFoundDocument(pa(e),i).setHasLocalMutations()}}(t,e,n):t instanceof ya?function(t,e,n){if(ca(t.precondition,e)){var i=ka(t.fieldTransforms,n,e),r=e.data;r.setAll(ba(t)),r.setAll(i),e.convertToFoundDocument(pa(e),r).setHasLocalMutations()}}(t,e,n):(i=e,ca(t.precondition,i)&&i.convertToNoDocument(ks.min()))}function ga(t,e){var n=null,i=!0,r=!1,s=void 0;try{for(var o,a=t.fieldTransforms[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var u=o.value,l=e.data.field(u.field),c=Zo(u.transform,l||null);null!=c&&(null==n&&(n=oo.empty()),n.set(u.field,c))}}catch(t){r=!0,s=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw s}}return n||null}function va(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,i=e.fieldTransforms,!!(void 0===n&&void 0===i||n&&i&&bs(n,i,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&(n=t.transform,i=e.transform,n instanceof ea&&i instanceof ea||n instanceof ia&&i instanceof ia?bs(n.elements,i.elements,Xs):n instanceof sa&&i instanceof sa?Xs(n.k,i.k):n instanceof ta&&i instanceof ta);var n,i}(t,e)}))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,i}function pa(t){return t.isFoundDocument()?t.version:ks.min()}var ma=function(t){"use strict";I(n,t);var e=N(n);function n(t,i,r){var s,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return l(this,n),(s=e.call(this)).key=t,s.value=i,s.precondition=r,s.fieldTransforms=o,s.type=0,S(s)}return n}(ha),ya=function(t){"use strict";I(n,t);var e=N(n);function n(t,i,r,s){var o,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return l(this,n),(o=e.call(this)).key=t,o.data=i,o.fieldMask=r,o.precondition=s,o.fieldTransforms=a,o.type=1,S(o)}return n}(ha);function ba(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var i=t.data.field(n);e.set(n,i)}})),e}function wa(t,e,n){var i=new Map;is(t.length===n.length);for(var r=0;r<n.length;r++){var s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,Jo(o,a,n[r]))}return i}function ka(t,e,n){var i=new Map,r=!0,s=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=a.value,c=l.transform,h=n.data.field(l.field);i.set(l.field,Qo(c,h,e))}}catch(t){s=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(s)throw o}}return i}var Ta,Ia,Ea=function(t){"use strict";I(n,t);var e=N(n);function n(t,i){var r;return l(this,n),(r=e.call(this)).key=t,r.precondition=i,r.type=2,r.fieldTransforms=[],S(r)}return n}(ha),Sa=function(t){"use strict";I(n,t);var e=N(n);function n(t,i){var r;return l(this,n),(r=e.call(this)).key=t,r.precondition=i,r.type=3,r.fieldTransforms=[],S(r)}return n}(ha),xa=function t(e){"use strict";l(this,t),this.count=e};function Ca(t){switch(t){default:return ns();case ss.CANCELLED:case ss.UNKNOWN:case ss.DEADLINE_EXCEEDED:case ss.RESOURCE_EXHAUSTED:case ss.INTERNAL:case ss.UNAVAILABLE:case ss.UNAUTHENTICATED:return!1;case ss.INVALID_ARGUMENT:case ss.NOT_FOUND:case ss.ALREADY_EXISTS:case ss.PERMISSION_DENIED:case ss.FAILED_PRECONDITION:case ss.ABORTED:case ss.OUT_OF_RANGE:case ss.UNIMPLEMENTED:case ss.DATA_LOSS:return!0}}function Aa(t){if(void 0===t)return Zr("GRPC error has no .code"),ss.UNKNOWN;switch(t){case Ta.OK:return ss.OK;case Ta.CANCELLED:return ss.CANCELLED;case Ta.UNKNOWN:return ss.UNKNOWN;case Ta.DEADLINE_EXCEEDED:return ss.DEADLINE_EXCEEDED;case Ta.RESOURCE_EXHAUSTED:return ss.RESOURCE_EXHAUSTED;case Ta.INTERNAL:return ss.INTERNAL;case Ta.UNAVAILABLE:return ss.UNAVAILABLE;case Ta.UNAUTHENTICATED:return ss.UNAUTHENTICATED;case Ta.INVALID_ARGUMENT:return ss.INVALID_ARGUMENT;case Ta.NOT_FOUND:return ss.NOT_FOUND;case Ta.ALREADY_EXISTS:return ss.ALREADY_EXISTS;case Ta.PERMISSION_DENIED:return ss.PERMISSION_DENIED;case Ta.FAILED_PRECONDITION:return ss.FAILED_PRECONDITION;case Ta.ABORTED:return ss.ABORTED;case Ta.OUT_OF_RANGE:return ss.OUT_OF_RANGE;case Ta.UNIMPLEMENTED:return ss.UNIMPLEMENTED;case Ta.DATA_LOSS:return ss.DATA_LOSS;default:return ns()}}(Ia=Ta||(Ta={}))[Ia.OK=0]="OK",Ia[Ia.CANCELLED=1]="CANCELLED",Ia[Ia.UNKNOWN=2]="UNKNOWN",Ia[Ia.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ia[Ia.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ia[Ia.NOT_FOUND=5]="NOT_FOUND",Ia[Ia.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ia[Ia.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ia[Ia.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ia[Ia.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ia[Ia.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ia[Ia.ABORTED=10]="ABORTED",Ia[Ia.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ia[Ia.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ia[Ia.INTERNAL=13]="INTERNAL",Ia[Ia.UNAVAILABLE=14]="UNAVAILABLE",Ia[Ia.DATA_LOSS=15]="DATA_LOSS";var Da=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e,n){l(this,t),this.comparator=e,this.root=n||_a.EMPTY}return v(t,[{key:"insert",value:function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_a.BLACK,null,null))}},{key:"remove",value:function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_a.BLACK,null,null))}},{key:"get",value:function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}},{key:"indexOf",value:function(t){for(var e=0,n=this.root;!n.isEmpty();){var i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(t){return this.root.inorderTraversal(t)}},{key:"forEach",value:function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))}},{key:"toString",value:function(){var t=[];return this.inorderTraversal((function(e,n){return t.push("".concat(e,":").concat(n)),!1})),"{".concat(t.join(", "),"}")}},{key:"reverseTraversal",value:function(t){return this.root.reverseTraversal(t)}},{key:"getIterator",value:function(){return new Na(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(t){return new Na(this.root,t,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Na(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(t){return new Na(this.root,t,this.comparator,!0)}}]),t}(),Na=function(){"use strict";function t(e,n,i,r){l(this,t),this.isReverse=r,this.nodeStack=[];for(var s=1;!e.isEmpty();)if(s=n?i(e.key,n):1,r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return v(t,[{key:"getNext",value:function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}]),t}(),_a=function(){"use strict";function t(e,n,i,r,s){l(this,t),this.key=e,this.value=n,this.color=null!=i?i:t.RED,this.left=null!=r?r:t.EMPTY,this.right=null!=s?s:t.EMPTY,this.size=this.left.size+1+this.right.size}return v(t,[{key:"copy",value:function(e,n,i,r,s){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=s?s:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}},{key:"reverseTraversal",value:function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(t,e,n){var i=this,r=n(t,i.key);return(i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(e,n){var i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===n(e,r.key)){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}},{key:"moveRedLeft",value:function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t}},{key:"moveRedRight",value:function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t}},{key:"rotateLeft",value:function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}},{key:"rotateRight",value:function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}},{key:"colorFlip",value:function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}},{key:"checkMaxDepth",value:function(){var t=this.check();return Math.pow(2,t)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw ns();if(this.right.isRed())throw ns();var t=this.left.check();if(t!==this.right.check())throw ns();return t+(this.isRed()?0:1)}}]),t}();_a.EMPTY=null,_a.RED=!0,_a.BLACK=!1,_a.EMPTY=new(function(){"use strict";function t(){l(this,t),this.size=0}return v(t,[{key:"key",get:function(){throw ns()}},{key:"value",get:function(){throw ns()}},{key:"color",get:function(){throw ns()}},{key:"left",get:function(){throw ns()}},{key:"right",get:function(){throw ns()}},{key:"copy",value:function(t,e,n,i,r){return this}},{key:"insert",value:function(t,e,n){return new _a(t,e)}},{key:"remove",value:function(t,e){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(t){return!1}},{key:"reverseTraversal",value:function(t){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),t}());var Oa=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e){l(this,t),this.comparator=e,this.data=new Da(this.comparator)}return v(t,[{key:"has",value:function(t){return null!==this.data.get(t)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(t){return this.data.indexOf(t)}},{key:"forEach",value:function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))}},{key:"forEachInRange",value:function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}},{key:"forEachWhile",value:function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}},{key:"getIterator",value:function(){return new La(this.data.getIterator())}},{key:"getIteratorFrom",value:function(t){return new La(this.data.getIteratorFrom(t))}},{key:"add",value:function(t){return this.copy(this.data.remove(t).insert(t,!0))}},{key:"delete",value:function(t){return this.has(t)?this.copy(this.data.remove(t)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e}},{key:"isEqual",value:function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),i=e.data.getIterator();n.hasNext();){var r=n.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}},{key:"toArray",value:function(){var t=[];return this.forEach((function(e){t.push(e)})),t}},{key:"toString",value:function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"}},{key:"copy",value:function(e){var n=new t(this.comparator);return n.data=e,n}}]),t}(),La=function(){"use strict";function t(e){l(this,t),this.iter=e}return v(t,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ma=new Da(qs.comparator);function Ra(){return Ma}var Pa=new Da(qs.comparator);function Va(){return Pa}var Fa=new Da(qs.comparator),Ua=new Oa(qs.comparator);function za(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=Ua,r=!0,s=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=a.value;i=i.add(l)}}catch(t){s=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(s)throw o}}return i}var Ba=new Oa(ys);function Ga(){return Ba}var ja=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e,n,i,r,s){l(this,t),this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}return v(t,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(e,n){var i=new Map;return i.set(e,qa.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(ks.min(),i,Ga(),Ra(),za())}}]),t}(),qa=function(){"use strict";function t(e,n,i,r,s){l(this,t),this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}return v(t,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(e,n){return new t(_s.EMPTY_BYTE_STRING,n,za(),za(),za())}}]),t}(),Ha=function t(e,n,i,r){"use strict";l(this,t),this.M=e,this.removedTargetIds=n,this.key=i,this.$=r},Ka=function t(e,n){"use strict";l(this,t),this.targetId=e,this.F=n},Xa=function t(e,n){"use strict";var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_s.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;l(this,t),this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r},Wa=function(){"use strict";function t(){l(this,t),this.B=0,this.L=Qa(),this.U=_s.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return v(t,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(t){t.approximateByteSize()>0&&(this.K=!0,this.U=t)}},{key:"H",value:function(){var t=za(),e=za(),n=za();return this.L.forEach((function(i,r){switch(r){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:ns()}})),new qa(this.U,this.q,t,e,n)}},{key:"J",value:function(){this.K=!1,this.L=Qa()}},{key:"Y",value:function(t,e){this.K=!0,this.L=this.L.insert(t,e)}},{key:"X",value:function(t){this.K=!0,this.L=this.L.remove(t)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),t}(),Ya=function(){"use strict";function t(e){l(this,t),this.nt=e,this.st=new Map,this.it=Ra(),this.rt=$a(),this.ot=new Oa(ys)}return v(t,[{key:"ct",value:function(t){var e=!0,n=!1,i=void 0;try{for(var r,s=t.M[Symbol.iterator]();!(e=(r=s.next()).done);e=!0){var o=r.value;t.$&&t.$.isFoundDocument()?this.ut(o,t.$):this.at(o,t.key,t.$)}}catch(t){n=!0,i=t}finally{try{e||null==s.return||s.return()}finally{if(n)throw i}}var a=!0,u=!1,l=void 0;try{for(var c,h=t.removedTargetIds[Symbol.iterator]();!(a=(c=h.next()).done);a=!0){var f=c.value;this.at(f,t.key,t.$)}}catch(t){u=!0,l=t}finally{try{a||null==h.return||h.return()}finally{if(u)throw l}}}},{key:"ht",value:function(t){var e=this;this.forEachTarget(t,(function(n){var i=e.lt(n);switch(t.state){case 0:e.ft(n)&&i.W(t.resumeToken);break;case 1:i.tt(),i.G||i.J(),i.W(t.resumeToken);break;case 2:i.tt(),i.G||e.removeTarget(n);break;case 3:e.ft(n)&&(i.et(),i.W(t.resumeToken));break;case 4:e.ft(n)&&(e.dt(n),i.W(t.resumeToken));break;default:ns()}}))}},{key:"forEachTarget",value:function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.st.forEach((function(t,i){n.ft(i)&&e(i)}))}},{key:"_t",value:function(t){var e=t.targetId,n=t.F.count,i=this.wt(e);if(i){var r=i.target;if(vo(r))if(0===n){var s=new qs(r.path);this.at(e,s,uo.newNoDocument(s,ks.min()))}else is(1===n);else this.gt(e)!==n&&(this.dt(e),this.ot=this.ot.add(e))}}},{key:"yt",value:function(t){var e=this,n=new Map;this.st.forEach((function(i,r){var s=e.wt(r);if(s){if(i.current&&vo(s.target)){var o=new qs(s.target.path);null!==e.it.get(o)||e.It(r,o)||e.at(r,o,uo.newNoDocument(o,t))}i.j&&(n.set(r,i.H()),i.J())}}));var i=za();this.rt.forEach((function(t,n){var r=e,s=!0;n.forEachWhile((function(t){var e=r.wt(t);return!e||2===e.purpose||(s=!1,!1)})),s&&(i=i.add(t))})),this.it.forEach((function(e,n){return n.setReadTime(t)}));var r=new ja(t,n,this.ot,this.it,i);return this.it=Ra(),this.rt=$a(),this.ot=new Oa(ys),r}},{key:"ut",value:function(t,e){if(this.ft(t)){var n=this.It(t,e.key)?2:0;this.lt(t).Y(e.key,n),this.it=this.it.insert(e.key,e),this.rt=this.rt.insert(e.key,this.Et(e.key).add(t))}}},{key:"at",value:function(t,e,n){if(this.ft(t)){var i=this.lt(t);this.It(t,e)?i.Y(e,1):i.X(e),this.rt=this.rt.insert(e,this.Et(e).delete(t)),n&&(this.it=this.it.insert(e,n))}}},{key:"removeTarget",value:function(t){this.st.delete(t)}},{key:"gt",value:function(t){var e=this.lt(t).H();return this.nt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}},{key:"Z",value:function(t){this.lt(t).Z()}},{key:"lt",value:function(t){var e=this.st.get(t);return e||(e=new Wa,this.st.set(t,e)),e}},{key:"Et",value:function(t){var e=this.rt.get(t);return e||(e=new Oa(ys),this.rt=this.rt.insert(t,e)),e}},{key:"ft",value:function(t){var e=null!==this.wt(t);return e||Jr("WatchChangeAggregator","Detected inactive target",t),e}},{key:"wt",value:function(t){var e=this.st.get(t);return e&&e.G?null:this.nt.Tt(t)}},{key:"dt",value:function(t){var e=this;this.st.set(t,new Wa),this.nt.getRemoteKeysForTarget(t).forEach((function(n){e.at(t,n,null)}))}},{key:"It",value:function(t,e){return this.nt.getRemoteKeysForTarget(t).has(e)}}]),t}();function $a(){return new Da(qs.comparator)}function Qa(){return new Da(qs.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ja={asc:"ASCENDING",desc:"DESCENDING"},Za={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tu=function t(e,n){"use strict";l(this,t),this.databaseId=e,this.N=n};function eu(t,e){return t.N?"".concat(new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+e.nanoseconds).slice(-9),"Z"):{seconds:""+e.seconds,nanos:e.nanoseconds}}function nu(t,e){return t.N?e.toBase64():e.toUint8Array()}function iu(t,e){return eu(t,e.toTimestamp())}function ru(t){return is(!!t),ks.fromTimestamp((e=Ls(t),new ws(e.seconds,e.nanos)));var e}function su(t,e){return(n=t,new xs(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function ou(t){var e=xs.fromString(t);return is(Eu(e)),e}function au(t,e){return su(t.databaseId,e.path)}function uu(t,e){var n=ou(e);if(n.get(1)!==t.databaseId.projectId)throw new os(ss.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new os(ss.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new qs(fu(n))}function lu(t,e){return su(t.databaseId,e)}function cu(t){var e=ou(t);return 4===e.length?xs.emptyPath():fu(e)}function hu(t){return new xs(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function fu(t){return is(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function du(t,e,n){return{name:au(t,e),fields:n.value.mapValue.fields}}function gu(t,e){var n,i,r;if(e instanceof ma)n={update:du(t,e.key,e.value)};else if(e instanceof Ea)n={delete:au(t,e.key)};else if(e instanceof ya)n={update:du(t,e.key,e.data),updateMask:(i=e.fieldMask,r=[],i.fields.forEach((function(t){return r.push(t.canonicalString())})),{fieldPaths:r})};else{if(!(e instanceof Sa))return ns();n={verify:au(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof ta)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ea)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ia)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof sa)return{fieldPath:e.field.canonicalString(),increment:n.k};throw ns()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:iu(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:ns()}(t,e.precondition)),n}function vu(t,e){return{documents:[lu(t,e.path)]}}function pu(t,e){var n={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(n.parent=lu(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=lu(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);var r=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(io(t.value))return{unaryFilter:{field:ku(t.field),op:"IS_NAN"}};if(no(t.value))return{unaryFilter:{field:ku(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(io(t.value))return{unaryFilter:{field:ku(t.field),op:"IS_NOT_NAN"}};if(no(t.value))return{unaryFilter:{field:ku(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ku(t.field),op:wu(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);r&&(n.structuredQuery.where=r);var s=function(t){if(0!==t.length)return t.map((function(t){return{field:ku((e=t).field),direction:bu(e.dir)};var e}))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);var o,a,u,l=(o=t,a=e.limit,o.N||Bs(a)?a:{value:a});return null!==l&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),n}function mu(t){var e=cu(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){is(1===i);var s=n.from[0];s.allDescendants?r=s.collectionId:e=e.child(s.collectionId)}var o=[];n.where&&(o=yu(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return new xo(Tu((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var u,l,c=null;n.limit&&(u=n.limit,c=Bs(l="object"==typeof u?u.value:u)?null:l);var h=null;n.startAt&&(h=function(t){var e=!!t.before,n=t.values||[];return new So(n,e)}(n.startAt));var f=null;return n.endAt&&(f=function(t){var e=!t.before,n=t.values||[];return new So(n,e)}(n.endAt)),_o(e,r,a,o,c,"F",h,f)}function yu(t){return t?void 0!==t.unaryFilter?[Iu(t)]:void 0!==t.fieldFilter?[(e=t,po.create(Tu(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ns()}}(e.fieldFilter.op),e.fieldFilter.value))]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return yu(t)})).reduce((function(t,e){return t.concat(e)})):ns():[];var e}function bu(t){return Ja[t]}function wu(t){return Za[t]}function ku(t){return{fieldPath:t.canonicalString()}}function Tu(t){return As.fromServerFormat(t.fieldPath)}function Iu(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Tu(t.unaryFilter.field);return po.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Tu(t.unaryFilter.field);return po.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var i=Tu(t.unaryFilter.field);return po.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var r=Tu(t.unaryFilter.field);return po.create(r,"!=",{nullValue:"NULL_VALUE"});default:return ns()}}function Eu(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Cu(e)),e=xu(t.get(n),e);return Cu(e)}function xu(t,e){for(var n=e,i=t.length,r=0;r<i;r++){var s=t.charAt(r);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Cu(t){return t+""}var Au=function t(e,n,i){"use strict";l(this,t),this.ownerId=e,this.allowTabSynchronization=n,this.leaseTimestampMs=i};Au.store="owner",Au.key="owner";var Du=function t(e,n,i){"use strict";l(this,t),this.userId=e,this.lastAcknowledgedBatchId=n,this.lastStreamToken=i};Du.store="mutationQueues",Du.keyPath="userId";var Nu=function t(e,n,i,r,s){"use strict";l(this,t),this.userId=e,this.batchId=n,this.localWriteTimeMs=i,this.baseMutations=r,this.mutations=s};Nu.store="mutations",Nu.keyPath="batchId",Nu.userMutationsIndex="userMutationsIndex",Nu.userMutationsKeyPath=["userId","batchId"];var _u=function(){"use strict";function t(){l(this,t)}return v(t,null,[{key:"prefixForUser",value:function(t){return[t]}},{key:"prefixForPath",value:function(t,e){return[t,Su(e)]}},{key:"key",value:function(t,e,n){return[t,Su(e),n]}}]),t}();_u.store="documentMutations",_u.PLACEHOLDER=new _u;var Ou=function t(e,n,i,r,s,o){"use strict";l(this,t),this.unknownDocument=e,this.noDocument=n,this.document=i,this.hasCommittedMutations=r,this.readTime=s,this.parentPath=o};Ou.store="remoteDocuments",Ou.readTimeIndex="readTimeIndex",Ou.readTimeIndexPath="readTime",Ou.collectionReadTimeIndex="collectionReadTimeIndex",Ou.collectionReadTimeIndexPath=["parentPath","readTime"];var Lu=function t(e){"use strict";l(this,t),this.byteSize=e};Lu.store="remoteDocumentGlobal",Lu.key="remoteDocumentGlobalKey";var Mu=function t(e,n,i,r,s,o,a){"use strict";l(this,t),this.targetId=e,this.canonicalId=n,this.readTime=i,this.resumeToken=r,this.lastListenSequenceNumber=s,this.lastLimboFreeSnapshotVersion=o,this.query=a};Mu.store="targets",Mu.keyPath="targetId",Mu.queryTargetsIndexName="queryTargetsIndex",Mu.queryTargetsKeyPath=["canonicalId","targetId"];var Ru=function t(e,n,i){"use strict";l(this,t),this.targetId=e,this.path=n,this.sequenceNumber=i};Ru.store="targetDocuments",Ru.keyPath=["targetId","path"],Ru.documentTargetsIndex="documentTargetsIndex",Ru.documentTargetsKeyPath=["path","targetId"];var Pu=function t(e,n,i,r){"use strict";l(this,t),this.highestTargetId=e,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=i,this.targetCount=r};Pu.key="targetGlobalKey",Pu.store="targetGlobal";var Vu=function t(e,n){"use strict";l(this,t),this.collectionId=e,this.parent=n};Vu.store="collectionParents",Vu.keyPath=["collectionId","parent"];var Fu=function t(e,n,i,r){"use strict";l(this,t),this.clientId=e,this.updateTimeMs=n,this.networkEnabled=i,this.inForeground=r};Fu.store="clientMetadata",Fu.keyPath="clientId";var Uu=function t(e,n,i){"use strict";l(this,t),this.bundleId=e,this.createTime=n,this.version=i};Uu.store="bundles",Uu.keyPath="bundleId";var zu=function t(e,n,i){"use strict";l(this,t),this.name=e,this.readTime=n,this.bundledQuery=i};zu.store="namedQueries",zu.keyPath="name";var Bu=function t(e,n,i){"use strict";l(this,t),this.indexId=e,this.collectionGroup=n,this.fields=i};Bu.store="indexConfiguration",Bu.keyPath="indexId",Bu.collectionGroupIndex="collectionGroupIndex",Bu.collectionGroupIndexPath="collectionGroup";var Gu=function t(e,n,i,r,s,o){"use strict";l(this,t),this.indexId=e,this.uid=n,this.sequenceNumber=i,this.readTime=r,this.documentKey=s,this.largestBatchId=o};Gu.store="indexState",Gu.keyPath=["indexId","uid"],Gu.sequenceNumberIndex="sequenceNumberIndex",Gu.sequenceNumberIndexPath=["uid","sequenceNumber"];var ju=function t(e,n,i,r,s){"use strict";l(this,t),this.indexId=e,this.uid=n,this.arrayValue=i,this.directionalValue=r,this.documentKey=s};ju.store="indexEntries",ju.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],ju.documentKeyIndex="documentKeyIndex",ju.documentKeyIndexPath=["indexId","uid","documentKey"];var qu=function t(e,n,i,r,s,o){"use strict";l(this,t),this.userId=e,this.collectionPath=n,this.documentId=i,this.collectionGroup=r,this.largestBatchId=s,this.overlayMutation=o};qu.store="documentOverlays",qu.keyPath=["userId","collectionPath","documentId"],qu.collectionPathOverlayIndex="collectionPathOverlayIndex",qu.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],qu.collectionGroupOverlayIndex="collectionGroupOverlayIndex",qu.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];var Hu=[Du.store,Nu.store,_u.store,Ou.store,Mu.store,Au.store,Pu.store,Ru.store,Fu.store,Lu.store,Vu.store,Uu.store,zu.store],Ku=A(Hu).concat([qu.store]),Xu=(A(Ku).concat([Bu.store,Gu.store,ju.store]),"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."),Wu=function(){"use strict";function t(){l(this,t),this.onCommittedListeners=[]}return v(t,[{key:"addOnCommittedListener",value:function(t){this.onCommittedListeners.push(t)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(t){return t()}))}}]),t}(),Yu=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e){var n=this;l(this,t),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(t){n.isDone=!0,n.result=t,n.nextCallback&&n.nextCallback(t)}),(function(t){n.isDone=!0,n.error=t,n.catchCallback&&n.catchCallback(t)}))}return v(t,[{key:"catch",value:function(t){return this.next(void 0,t)}},{key:"next",value:function(e,n){var i=this;return this.callbackAttached&&ns(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,r){var s=i;i.nextCallback=function(n){s.wrapSuccess(e,n).next(t,r)},i.catchCallback=function(e){s.wrapFailure(n,e).next(t,r)}}))}},{key:"toPromise",value:function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))}},{key:"wrapUserFunction",value:function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}}},{key:"wrapSuccess",value:function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)}},{key:"wrapFailure",value:function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)}}],[{key:"resolve",value:function(e){return new t((function(t,n){t(e)}))}},{key:"reject",value:function(e){return new t((function(t,n){n(e)}))}},{key:"waitFor",value:function(e){return new t((function(t,n){var i=0,r=0,s=!1;e.forEach((function(e){++i,e.next((function(){++r,s&&r===i&&t()}),(function(t){return n(t)}))})),s=!0,r===i&&t()}))}},{key:"or",value:function(e){var n=t.resolve(!1),i=!0,r=!1,s=void 0;try{for(var o,a=function(e,i){var r=i.value;n=n.next((function(e){return e?t.resolve(e):r()}))},u=e[Symbol.iterator]();!(i=(o=u.next()).done);i=!0)a(0,o)}catch(t){r=!0,s=t}finally{try{i||null==u.return||u.return()}finally{if(r)throw s}}return n}},{key:"forEach",value:function(t,e){var n=this,i=[];return t.forEach((function(t,r){i.push(e.call(n,t,r))})),this.waitFor(i)}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(t){return"IndexedDbTransactionError"===t.name}var Qu=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e,n,i,r){l(this,t),this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}return v(t,[{key:"applyToRemoteDocument",value:function(t,e){for(var n=e.mutationResults,i=0;i<this.mutations.length;i++){var r=this.mutations[i];r.key.isEqual(t.key)&&fa(r,t,n[i])}}},{key:"applyToLocalView",value:function(t){var e=!0,n=!1,i=void 0;try{for(var r,s=this.baseMutations[Symbol.iterator]();!(e=(r=s.next()).done);e=!0){var o=r.value;o.key.isEqual(t.key)&&da(o,t,this.localWriteTime)}}catch(t){n=!0,i=t}finally{try{e||null==s.return||s.return()}finally{if(n)throw i}}var a=!0,u=!1,l=void 0;try{for(var c,h=this.mutations[Symbol.iterator]();!(a=(c=h.next()).done);a=!0){var f=c.value;f.key.isEqual(t.key)&&da(f,t,this.localWriteTime)}}catch(t){u=!0,l=t}finally{try{a||null==h.return||h.return()}finally{if(u)throw l}}}},{key:"applyToLocalDocumentSet",value:function(t){var e=this;this.mutations.forEach((function(n){var i=t.get(n.key),r=i;e.applyToLocalView(r),i.isValidDocument()||r.convertToNoDocument(ks.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),za())}},{key:"isEqual",value:function(t){return this.batchId===t.batchId&&bs(this.mutations,t.mutations,(function(t,e){return va(t,e)}))&&bs(this.baseMutations,t.baseMutations,(function(t,e){return va(t,e)}))}}]),t}(),Ju=function(){"use strict";function t(e,n,i,r){l(this,t),this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}return v(t,null,[{key:"from",value:function(e,n,i){is(e.mutations.length===i.length);for(var r=Fa,s=e.mutations,o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new t(e,n,i,r)}}]),t}(),Zu=
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e,n){l(this,t),this.largestBatchId=e,this.mutation=n}return v(t,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(t){return null!==t&&this.mutation===t.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),t}(),tl=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e,n,i,r){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ks.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ks.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:_s.EMPTY_BYTE_STRING;l(this,t),this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return v(t,[{key:"withSequenceNumber",value:function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}},{key:"withLastLimboFreeSnapshotVersion",value:function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}]),t}(),el=function t(e){"use strict";l(this,t),this.Ht=e};function nl(t){var e=mu({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?zo(e,e.limit,"L"):e}var il=
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(){l(this,t)}return v(t,[{key:"Xt",value:function(t,e){this.Zt(t,e),e.te()}},{key:"Zt",value:function(t,e){if("nullValue"in t)this.ee(e,5);else if("booleanValue"in t)this.ee(e,10),e.ne(t.booleanValue?1:0);else if("integerValue"in t)this.ee(e,15),e.ne(Ms(t.integerValue));else if("doubleValue"in t){var n=Ms(t.doubleValue);isNaN(n)?this.ee(e,13):(this.ee(e,15),Gs(n)?e.ne(0):e.ne(n))}else if("timestampValue"in t){var i=t.timestampValue;this.ee(e,20),"string"==typeof i?e.se(i):(e.se("".concat(i.seconds||"")),e.ne(i.nanos||0))}else if("stringValue"in t)this.ie(t.stringValue,e),this.re(e);else if("bytesValue"in t)this.ee(e,30),e.oe(Rs(t.bytesValue)),this.re(e);else if("referenceValue"in t)this.ce(t.referenceValue,e);else if("geoPointValue"in t){var r=t.geoPointValue;this.ee(e,45),e.ne(r.latitude||0),e.ne(r.longitude||0)}else"mapValue"in t?Xs(t,Hs)?this.ee(e,Number.MAX_SAFE_INTEGER):(this.ue(t.mapValue,e),this.re(e)):"arrayValue"in t?(this.ae(t.arrayValue,e),this.re(e)):ns()}},{key:"ie",value:function(t,e){this.ee(e,25),this.he(t,e)}},{key:"he",value:function(t,e){e.se(t)}},{key:"ue",value:function(t,e){var n=t.fields||{};this.ee(e,55);var i=!0,r=!1,s=void 0;try{for(var o,a=Object.keys(n)[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var u=o.value;this.ie(u,e),this.Zt(n[u],e)}}catch(t){r=!0,s=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw s}}}},{key:"ae",value:function(t,e){var n=t.values||[];this.ee(e,50);var i=!0,r=!1,s=void 0;try{for(var o,a=n[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var u=o.value;this.Zt(u,e)}}catch(t){r=!0,s=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw s}}}},{key:"ce",value:function(t,e){var n=this;this.ee(e,37),qs.fromName(t).path.forEach((function(t){n.ee(e,60),n.he(t,e)}))}},{key:"ee",value:function(t,e){t.ne(e)}},{key:"re",value:function(t){t.ne(2)}}]),t}();il.le=new il;var rl=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(){l(this,t),this.xe=new sl}return v(t,[{key:"addToCollectionParentIndex",value:function(t,e){return this.xe.add(e),Yu.resolve()}},{key:"getCollectionParents",value:function(t,e){return Yu.resolve(this.xe.getEntries(e))}},{key:"addFieldIndex",value:function(t,e){return Yu.resolve()}},{key:"deleteFieldIndex",value:function(t,e){return Yu.resolve()}},{key:"getDocumentsMatchingTarget",value:function(t,e,n){return Yu.resolve(za())}},{key:"getFieldIndex",value:function(t,e){return Yu.resolve(null)}},{key:"getFieldIndexes",value:function(t,e){return Yu.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(t){return Yu.resolve(null)}},{key:"updateCollectionGroup",value:function(t,e,n){return Yu.resolve()}},{key:"updateIndexEntries",value:function(t,e){return Yu.resolve()}}]),t}(),sl=function(){"use strict";function t(){l(this,t),this.index={}}return v(t,[{key:"add",value:function(t){var e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new Oa(xs.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}},{key:"has",value:function(t){var e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}},{key:"getEntries",value:function(t){return(this.index[t]||new Oa(xs.comparator)).toArray()}}]),t}();
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ol=function(){"use strict";function t(e,n,i){l(this,t),this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}return v(t,null,[{key:"withCacheSize",value:function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ol.DEFAULT_COLLECTION_PERCENTILE=10,ol.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ol.DEFAULT=new ol(41943040,ol.DEFAULT_COLLECTION_PERCENTILE,ol.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ol.DISABLED=new ol(-1,0,0);var al=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e){l(this,t),this.ze=e}return v(t,[{key:"next",value:function(){return this.ze+=2,this.ze}}],[{key:"He",value:function(){return new t(0)}},{key:"Je",value:function(){return new t(-1)}}]),t}();function ul(t){return ll.apply(this,arguments)}function ll(){return(ll=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
u(e(_).mark((function t(n){return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.code===ss.FAILED_PRECONDITION&&n.message===Xu){t.next=2;break}throw n;case 2:Jr("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cl=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e,n){l(this,t),this.mapKeyFn=e,this.equalsFn=n,this.inner={}}return v(t,[{key:"get",value:function(t){var e=this.mapKeyFn(t),n=this.inner[e],i=!0,r=!1,s=void 0;if(void 0!==n)try{for(var o,a=n[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var u=C(o.value),l=u[0],c=u[1];if(this.equalsFn(l,t))return c}}catch(t){r=!0,s=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw s}}}},{key:"has",value:function(t){return void 0!==this.get(t)}},{key:"set",value:function(t,e){var n=this.mapKeyFn(t),i=this.inner[n];if(void 0!==i){for(var r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,e]);i.push([t,e])}else this.inner[n]=[[t,e]]}},{key:"delete",value:function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),!0;return!1}},{key:"forEach",value:function(t){Is(this.inner,(function(e,n){var i=!0,r=!1,s=void 0;try{for(var o,a=n[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var u=C(o.value),l=u[0],c=u[1];t(l,c)}}catch(t){r=!0,s=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw s}}}))}},{key:"isEmpty",value:function(){return Es(this.inner)}}]),t}(),hl=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(){l(this,t),this.changes=new cl((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return v(t,[{key:"addEntry",value:function(t){this.assertNotApplied(),this.changes.set(t.key,t)}},{key:"removeEntry",value:function(t,e){this.assertNotApplied(),this.changes.set(t,uo.newInvalidDocument(t).setReadTime(e))}},{key:"getEntry",value:function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Yu.resolve(n):this.getFromCache(t,e)}},{key:"getEntries",value:function(t,e){return this.getAllFromCache(t,e)}},{key:"apply",value:function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}},{key:"assertNotApplied",value:function(){}}]),t}();var fl=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e,n,i){l(this,t),this.qn=e,this.gs=n,this.indexManager=i}return v(t,[{key:"ys",value:function(t,e){var n=this;return this.gs.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(i){return n.ps(t,e,i)}))}},{key:"ps",value:function(t,e,n){return this.qn.getEntry(t,e).next((function(t){var e=!0,i=!1,r=void 0;try{for(var s,o=n[Symbol.iterator]();!(e=(s=o.next()).done);e=!0){s.value.applyToLocalView(t)}}catch(t){i=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(i)throw r}}return t}))}},{key:"Is",value:function(t,e){t.forEach((function(t,n){var i=!0,r=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){o.value.applyToLocalView(n)}}catch(t){r=!0,s=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw s}}}))}},{key:"Es",value:function(t,e){var n=this;return this.qn.getEntries(t,e).next((function(e){return n.Ts(t,e).next((function(){return e}))}))}},{key:"Ts",value:function(t,e){var n=this;return this.gs.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.Is(e,t)}))}},{key:"As",value:function(t,e,n){return i=e,qs.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length?this.Rs(t,e.path):Vo(e)?this.Ps(t,e,n):this.bs(t,e,n);var i}},{key:"Rs",value:function(t,e){return this.ys(t,new qs(e)).next((function(t){var e=Va();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}},{key:"Ps",value:function(t,e,n){var i=this,r=e.collectionGroup,s=Va();return this.indexManager.getCollectionParents(t,r).next((function(o){return Yu.forEach(o,(function(o){var a,u,l=(a=e,u=o.child(r),new No(u,null,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt));return i.bs(t,l,n).next((function(t){t.forEach((function(t,e){s=s.insert(t,e)}))}))})).next((function(){return s}))}))}},{key:"bs",value:function(t,e,n){var i,r=this;return this.qn.getAll(t,e.path,n).next((function(n){return i=n,r.gs.getAllMutationBatchesAffectingQuery(t,e)})).next((function(t){var e=!0,n=!1,r=void 0,s=!0,o=!1,a=void 0;try{for(var u,l=t[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){var c=u.value;try{for(var h,f=c.mutations[Symbol.iterator]();!(e=(h=f.next()).done);e=!0){var d=h.value,g=d.key,v=i.get(g);null==v&&(v=uo.newInvalidDocument(g),i=i.insert(g,v)),da(d,v,c.localWriteTime),v.isFoundDocument()||(i=i.remove(g))}}catch(t){n=!0,r=t}finally{try{e||null==f.return||f.return()}finally{if(n)throw r}}}}catch(t){o=!0,a=t}finally{try{s||null==l.return||l.return()}finally{if(o)throw a}}})).next((function(){return i.forEach((function(t,n){qo(e,n)||(i=i.remove(t))})),i}))}}]),t}(),dl=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e,n,i,r){l(this,t),this.targetId=e,this.fromCache=n,this.vs=i,this.Vs=r}return v(t,null,[{key:"Ss",value:function(e,n){var i=za(),r=za(),s=!0,o=!1,a=void 0;try{for(var u,l=n.docChanges[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){var c=u.value;switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:r=r.add(c.doc.key)}}}catch(t){o=!0,a=t}finally{try{s||null==l.return||l.return()}finally{if(o)throw a}}return new t(e,n.fromCache,i,r)}}]),t}(),gl=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(){l(this,t)}return v(t,[{key:"Ds",value:function(t){this.Cs=t}},{key:"As",value:function(t,e,n,i){var r,s=this;return 0===(r=e).filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())||n.isEqual(ks.min())?this.Ns(t,e):this.Cs.Es(t,i).next((function(r){var o=s.xs(e,r);return(Lo(e)||Mo(e))&&s.ks(e.limitType,o,i,n)?s.Ns(t,e):(Qr()<=K.DEBUG&&Jr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),jo(e)),s.Cs.As(t,e,n).next((function(t){return o.forEach((function(e){t=t.insert(e.key,e)})),t})))}))}},{key:"xs",value:function(t,e){var n=new Oa(Ho(t));return e.forEach((function(e,i){qo(t,i)&&(n=n.add(i))})),n}},{key:"ks",value:function(t,e,n,i){if(n.size!==e.size)return!0;var r="F"===t?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}},{key:"Ns",value:function(t,e){return Qr()<=K.DEBUG&&Jr("QueryEngine","Using full collection scan to execute query:",jo(e)),this.Cs.As(t,e,ks.min())}}]),t}(),vl=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e,n,i,r){l(this,t),this.persistence=e,this.Os=n,this.O=r,this.Ms=new Da(ys),this.$s=new cl((function(t){return fo(t)}),go),this.Fs=ks.min(),this.Bs=e.getRemoteDocumentCache(),this.Un=e.getTargetCache(),this.Kn=e.getBundleCache(),this.Ls(i)}return v(t,[{key:"Ls",value:function(t){this.indexManager=this.persistence.getIndexManager(t),this.gs=this.persistence.getMutationQueue(t,this.indexManager),this.Us=new fl(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}},{key:"collectGarbage",value:function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Ms)}))}}]),t}();function pl(t,e,n,i){return new vl(t,e,n,i)}function ml(t,e){return yl.apply(this,arguments)}function yl(){return(yl=u(e(_).mark((function t(n,i){var r;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=rs(n),t.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(t){var e;return r.gs.getAllMutationBatches(t).next((function(n){return e=n,r.Ls(i),r.gs.getAllMutationBatches(t)})).next((function(n){var i=[],s=[],o=za(),a=!0,u=!1,l=void 0;try{for(var c,h=e[Symbol.iterator]();!(a=(c=h.next()).done);a=!0){var f=c.value;i.push(f.batchId);var d=!0,g=!1,v=void 0;try{for(var p,m=f.mutations[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var y=p.value;o=o.add(y.key)}}catch(t){g=!0,v=t}finally{try{d||null==m.return||m.return()}finally{if(g)throw v}}}}catch(t){u=!0,l=t}finally{try{a||null==h.return||h.return()}finally{if(u)throw l}}var b=!0,w=!1,k=void 0;try{for(var T,I=n[Symbol.iterator]();!(b=(T=I.next()).done);b=!0){var E=T.value;s.push(E.batchId);var S=!0,x=!1,C=void 0;try{for(var A,D=E.mutations[Symbol.iterator]();!(S=(A=D.next()).done);S=!0){var N=A.value;o=o.add(N.key)}}catch(t){x=!0,C=t}finally{try{S||null==D.return||D.return()}finally{if(x)throw C}}}}catch(t){w=!0,k=t}finally{try{b||null==I.return||I.return()}finally{if(w)throw k}}return r.Us.Es(t,o).next((function(t){return{qs:t,removedBatchIds:i,addedBatchIds:s}}))}))}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function bl(t,e){var n=rs(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var i,r,s,o,a,u,l,c=e.batch.keys(),h=n.Bs.newChangeBuffer({trackRemovals:!0});return(i=n,r=t,s=e,o=h,a=s.batch,u=a.keys(),l=Yu.resolve(),u.forEach((function(t){l=l.next((function(){return o.getEntry(r,t)})).next((function(e){var n=s.docVersions.get(t);is(null!==n),e.version.compareTo(n)<0&&(a.applyToRemoteDocument(e,s),e.isValidDocument()&&(e.setReadTime(s.commitVersion),o.addEntry(e)))}))})),l.next((function(){return i.gs.removeMutationBatch(r,a)}))).next((function(){return h.apply(t)})).next((function(){return n.gs.performConsistencyCheck(t)})).next((function(){return n.Us.Es(t,c)}))}))}function wl(t){var e=rs(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.Un.getLastRemoteSnapshotVersion(t)}))}function kl(t,e){var n=rs(t),i=e.snapshotVersion,r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var s=n.Bs.newChangeBuffer({trackRemovals:!0});r=n.Ms;var o=[];e.targetChanges.forEach((function(s,a){var u=r.get(a);if(u){o.push(n.Un.removeMatchingKeys(t,s.removedDocuments,a).next((function(){return n.Un.addMatchingKeys(t,s.addedDocuments,a)})));var l,c,h,f=u.withSequenceNumber(t.currentSequenceNumber);e.targetMismatches.has(a)?f=f.withResumeToken(_s.EMPTY_BYTE_STRING,ks.min()).withLastLimboFreeSnapshotVersion(ks.min()):s.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(s.resumeToken,i)),r=r.insert(a,f),c=f,h=s,(0===(l=u).resumeToken.approximateByteSize()||c.snapshotVersion.toMicroseconds()-l.snapshotVersion.toMicroseconds()>=3e8||h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size>0)&&o.push(n.Un.updateTargetData(t,f))}}));var a=Ra();if(e.documentUpdates.forEach((function(i){e.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,i))})),o.push(Tl(t,s,e.documentUpdates).next((function(t){a=t}))),!i.isEqual(ks.min())){var u=n.Un.getLastRemoteSnapshotVersion(t).next((function(e){return n.Un.setTargetsMetadata(t,t.currentSequenceNumber,i)}));o.push(u)}return Yu.waitFor(o).next((function(){return s.apply(t)})).next((function(){return n.Us.Ts(t,a)})).next((function(){return a}))})).then((function(t){return n.Ms=r,t}))}function Tl(t,e,n){var i=za();return n.forEach((function(t){return i=i.add(t)})),e.getEntries(t,i).next((function(t){var i=Ra();return n.forEach((function(n,r){var s=t.get(n);r.isNoDocument()&&r.version.isEqual(ks.min())?(e.removeEntry(n,r.readTime),i=i.insert(n,r)):!s.isValidDocument()||r.version.compareTo(s.version)>0||0===r.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(r),i=i.insert(n,r)):Jr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",r.version)})),i}))}function Il(t,e){var n=rs(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.gs.getNextMutationBatchAfterBatchId(t,e)}))}function El(t,e){var n=rs(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var i;return n.Un.getTargetData(t,e).next((function(r){return r?(i=r,Yu.resolve(i)):n.Un.allocateTargetId(t).next((function(r){return i=new tl(e,r,0,t.currentSequenceNumber),n.Un.addTargetData(t,i).next((function(){return i}))}))}))})).then((function(t){var i=n.Ms.get(t.targetId);return(null===i||t.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(t.targetId,t),n.$s.set(e,t.targetId)),t}))}function Sl(t,e,n){return xl.apply(this,arguments)}function xl(){return(xl=u(e(_).mark((function t(n,i,r){var s,o,a;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=rs(n),o=s.Ms.get(i),a=r?"readwrite":"readwrite-primary",t.prev=1,t.t0=r,t.t0){t.next=6;break}return t.next=6,s.persistence.runTransaction("Release target",a,(function(t){return s.persistence.referenceDelegate.removeTarget(t,o)}));case 6:t.next=13;break;case 8:if(t.prev=8,t.t1=t.catch(1),$u(t.t1)){t.next=12;break}throw t.t1;case 12:Jr("LocalStore","Failed to update sequence numbers for target ".concat(i,": ").concat(t.t1));case 13:s.Ms=s.Ms.remove(i),s.$s.delete(o.target);case 14:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}function Cl(t,e,n){var i=rs(t),r=ks.min(),s=za();return i.persistence.runTransaction("Execute query","readonly",(function(t){return(o=i,a=t,u=Uo(e),l=rs(o),c=l.$s.get(u),void 0!==c?Yu.resolve(l.Ms.get(c)):l.Un.getTargetData(a,u)).next((function(e){if(e)return r=e.lastLimboFreeSnapshotVersion,i.Un.getMatchingKeysForTargetId(t,e.targetId).next((function(t){s=t}))})).next((function(){return i.Os.As(t,e,n?r:ks.min(),n?s:za())})).next((function(t){return{documents:t,Ks:s}}));var o,a,u,l,c}))}var Al=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e){l(this,t),this.O=e,this.Ws=new Map,this.zs=new Map}return v(t,[{key:"getBundleMetadata",value:function(t,e){return Yu.resolve(this.Ws.get(e))}},{key:"saveBundleMetadata",value:function(t,e){var n;return this.Ws.set(e.id,{id:(n=e).id,version:n.version,createTime:ru(n.createTime)}),Yu.resolve()}},{key:"getNamedQuery",value:function(t,e){return Yu.resolve(this.zs.get(e))}},{key:"saveNamedQuery",value:function(t,e){return this.zs.set(e.name,{name:(n=e).name,query:nl(n.bundledQuery),readTime:ru(n.readTime)}),Yu.resolve();var n}}]),t}(),Dl=
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(){l(this,t),this.overlays=new Da(qs.comparator),this.Hs=new Map}return v(t,[{key:"getOverlay",value:function(t,e){return Yu.resolve(this.overlays.get(e))}},{key:"saveOverlays",value:function(t,e,n){var i=this;return n.forEach((function(n){i.Yt(t,e,n)})),Yu.resolve()}},{key:"removeOverlaysForBatchId",value:function(t,e,n){var i=this,r=this.Hs.get(n);return void 0!==r&&(r.forEach((function(t){return i.overlays=i.overlays.remove(t)})),this.Hs.delete(n)),Yu.resolve()}},{key:"getOverlaysForCollection",value:function(t,e,n){for(var i=new Map,r=e.length+1,s=new qs(e.child("")),o=this.overlays.getIteratorFrom(s);o.hasNext();){var a=o.getNext().value,u=a.getKey();if(!e.isPrefixOf(u.path))break;u.path.length===r&&a.largestBatchId>n&&i.set(a.getKey(),a)}return Yu.resolve(i)}},{key:"getOverlaysForCollectionGroup",value:function(t,e,n,i){for(var r=new Da((function(t,e){return t-e})),s=this.overlays.getIterator();s.hasNext();){var o=s.getNext().value;if(o.getKey().getCollectionGroup()===e&&o.largestBatchId>n){var a=r.get(o.largestBatchId);null===a&&(a=new Map,r=r.insert(o.largestBatchId,a)),a.set(o.getKey(),o)}}for(var u=new Map,l=r.getIterator();l.hasNext()&&(l.getNext().value.forEach((function(t,e){return u.set(e,t)})),!(u.size>=i)););return Yu.resolve(u)}},{key:"Yt",value:function(t,e,n){if(null!==n){var i=this.overlays.get(n.key);null!==i&&this.Hs.get(i.largestBatchId).delete(n.key),this.overlays=this.overlays.insert(n.key,new Zu(e,n));var r=this.Hs.get(e);void 0===r&&(r=new Set,this.Hs.set(e,r)),r.add(n.key)}}}]),t}(),Nl=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(){l(this,t),this.Js=new Oa(_l.Ys),this.Xs=new Oa(_l.Zs)}return v(t,[{key:"isEmpty",value:function(){return this.Js.isEmpty()}},{key:"addReference",value:function(t,e){var n=new _l(t,e);this.Js=this.Js.add(n),this.Xs=this.Xs.add(n)}},{key:"ti",value:function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))}},{key:"removeReference",value:function(t,e){this.ei(new _l(t,e))}},{key:"ni",value:function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))}},{key:"si",value:function(t){var e=this,n=new qs(new xs([])),i=new _l(n,t),r=new _l(n,t+1),s=[];return this.Xs.forEachInRange([i,r],(function(t){e.ei(t),s.push(t.key)})),s}},{key:"ii",value:function(){var t=this;this.Js.forEach((function(e){return t.ei(e)}))}},{key:"ei",value:function(t){this.Js=this.Js.delete(t),this.Xs=this.Xs.delete(t)}},{key:"ri",value:function(t){var e=new qs(new xs([])),n=new _l(e,t),i=new _l(e,t+1),r=za();return this.Xs.forEachInRange([n,i],(function(t){r=r.add(t.key)})),r}},{key:"containsKey",value:function(t){var e=new _l(t,0),n=this.Js.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}]),t}(),_l=function(){"use strict";function t(e,n){l(this,t),this.key=e,this.oi=n}return v(t,null,[{key:"Ys",value:function(t,e){return qs.comparator(t.key,e.key)||ys(t.oi,e.oi)}},{key:"Zs",value:function(t,e){return ys(t.oi,e.oi)||qs.comparator(t.key,e.key)}}]),t}(),Ol=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e,n){l(this,t),this.indexManager=e,this.referenceDelegate=n,this.gs=[],this.ci=1,this.ui=new Oa(_l.Ys)}return v(t,[{key:"checkEmpty",value:function(t){return Yu.resolve(0===this.gs.length)}},{key:"addMutationBatch",value:function(t,e,n,i){var r=this.ci;this.ci++,this.gs.length>0&&this.gs[this.gs.length-1];var s=new Qu(r,e,n,i);this.gs.push(s);var o=!0,a=!1,u=void 0;try{for(var l,c=i[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var h=l.value;this.ui=this.ui.add(new _l(h.key,r)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast())}}catch(t){a=!0,u=t}finally{try{o||null==c.return||c.return()}finally{if(a)throw u}}return Yu.resolve(s)}},{key:"lookupMutationBatch",value:function(t,e){return Yu.resolve(this.ai(e))}},{key:"getNextMutationBatchAfterBatchId",value:function(t,e){var n=e+1,i=this.hi(n),r=i<0?0:i;return Yu.resolve(this.gs.length>r?this.gs[r]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Yu.resolve(0===this.gs.length?-1:this.ci-1)}},{key:"getAllMutationBatches",value:function(t){return Yu.resolve(this.gs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(t,e){var n=this,i=new _l(e,0),r=new _l(e,Number.POSITIVE_INFINITY),s=[];return this.ui.forEachInRange([i,r],(function(t){var e=n.ai(t.oi);s.push(e)})),Yu.resolve(s)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(t,e){var n=this,i=new Oa(ys);return e.forEach((function(t){var e=new _l(t,0),r=new _l(t,Number.POSITIVE_INFINITY);n.ui.forEachInRange([e,r],(function(t){i=i.add(t.oi)}))})),Yu.resolve(this.li(i))}},{key:"getAllMutationBatchesAffectingQuery",value:function(t,e){var n=e.path,i=n.length+1,r=n;qs.isDocumentKey(r)||(r=r.child(""));var s=new _l(new qs(r),0),o=new Oa(ys);return this.ui.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.oi)),!0)}),s),Yu.resolve(this.li(o))}},{key:"li",value:function(t){var e=this,n=[];return t.forEach((function(t){var i=e.ai(t);null!==i&&n.push(i)})),n}},{key:"removeMutationBatch",value:function(t,e){var n=this;is(0===this.fi(e.batchId,"removed")),this.gs.shift();var i=this.ui;return Yu.forEach(e.mutations,(function(r){var s=new _l(r.key,e.batchId);return i=i.delete(s),n.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((function(){n.ui=i}))}},{key:"Qe",value:function(t){}},{key:"containsKey",value:function(t,e){var n=new _l(e,0),i=this.ui.firstAfterOrEqual(n);return Yu.resolve(e.isEqual(i&&i.key))}},{key:"performConsistencyCheck",value:function(t){return this.gs.length,Yu.resolve()}},{key:"fi",value:function(t,e){return this.hi(t)}},{key:"hi",value:function(t){return 0===this.gs.length?0:t-this.gs[0].batchId}},{key:"ai",value:function(t){var e=this.hi(t);return e<0||e>=this.gs.length?null:this.gs[e]}}]),t}(),Ll=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e){l(this,t),this.di=e,this.docs=new Da(qs.comparator),this.size=0}return v(t,[{key:"setIndexManager",value:function(t){this.indexManager=t}},{key:"addEntry",value:function(t,e){var n=e.key,i=this.docs.get(n),r=i?i.size:0,s=this.di(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}},{key:"removeEntry",value:function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}},{key:"getEntry",value:function(t,e){var n=this.docs.get(e);return Yu.resolve(n?n.document.mutableCopy():uo.newInvalidDocument(e))}},{key:"getEntries",value:function(t,e){var n=this,i=Ra();return e.forEach((function(t){var e=n.docs.get(t);i=i.insert(t,e?e.document.mutableCopy():uo.newInvalidDocument(t))})),Yu.resolve(i)}},{key:"getAll",value:function(t,e,n){for(var i=Ra(),r=new qs(e.child("")),s=this.docs.getIteratorFrom(r);s.hasNext();){var o=s.getNext(),a=o.key,u=o.value.document;if(!e.isPrefixOf(a.path))break;a.path.length>e.length+1||u.readTime.compareTo(n)<=0||(i=i.insert(u.key,u.mutableCopy()))}return Yu.resolve(i)}},{key:"_i",value:function(t,e){return Yu.forEach(this.docs,(function(t){return e(t)}))}},{key:"newChangeBuffer",value:function(t){return new Ml(this)}},{key:"getSize",value:function(t){return Yu.resolve(this.size)}}]),t}(),Ml=function(t){"use strict";I(n,t);var e=N(n);function n(t){var i;return l(this,n),(i=e.call(this)).Tn=t,S(i)}return v(n,[{key:"applyChanges",value:function(t){var e=this,n=[];return this.changes.forEach((function(i,r){r.isValidDocument()?n.push(e.Tn.addEntry(t,r)):e.Tn.removeEntry(i)})),Yu.waitFor(n)}},{key:"getFromCache",value:function(t,e){return this.Tn.getEntry(t,e)}},{key:"getAllFromCache",value:function(t,e){return this.Tn.getEntries(t,e)}}]),n}(hl),Rl=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e){l(this,t),this.persistence=e,this.wi=new cl((function(t){return fo(t)}),go),this.lastRemoteSnapshotVersion=ks.min(),this.highestTargetId=0,this.mi=0,this.gi=new Nl,this.targetCount=0,this.yi=al.He()}return v(t,[{key:"forEachTarget",value:function(t,e){return this.wi.forEach((function(t,n){return e(n)})),Yu.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(t){return Yu.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(t){return Yu.resolve(this.mi)}},{key:"allocateTargetId",value:function(t){return this.highestTargetId=this.yi.next(),Yu.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.mi&&(this.mi=e),Yu.resolve()}},{key:"Ze",value:function(t){this.wi.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.yi=new al(e),this.highestTargetId=e),t.sequenceNumber>this.mi&&(this.mi=t.sequenceNumber)}},{key:"addTargetData",value:function(t,e){return this.Ze(e),this.targetCount+=1,Yu.resolve()}},{key:"updateTargetData",value:function(t,e){return this.Ze(e),Yu.resolve()}},{key:"removeTargetData",value:function(t,e){return this.wi.delete(e.target),this.gi.si(e.targetId),this.targetCount-=1,Yu.resolve()}},{key:"removeTargets",value:function(t,e,n){var i=this,r=0,s=[];return this.wi.forEach((function(o,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i.wi.delete(o),s.push(i.removeMatchingKeysForTargetId(t,a.targetId)),r++)})),Yu.waitFor(s).next((function(){return r}))}},{key:"getTargetCount",value:function(t){return Yu.resolve(this.targetCount)}},{key:"getTargetData",value:function(t,e){var n=this.wi.get(e)||null;return Yu.resolve(n)}},{key:"addMatchingKeys",value:function(t,e,n){return this.gi.ti(e,n),Yu.resolve()}},{key:"removeMatchingKeys",value:function(t,e,n){this.gi.ni(e,n);var i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((function(e){r.push(i.markPotentiallyOrphaned(t,e))})),Yu.waitFor(r)}},{key:"removeMatchingKeysForTargetId",value:function(t,e){return this.gi.si(e),Yu.resolve()}},{key:"getMatchingKeysForTargetId",value:function(t,e){var n=this.gi.ri(e);return Yu.resolve(n)}},{key:"containsKey",value:function(t,e){return Yu.resolve(this.gi.containsKey(e))}}]),t}(),Pl=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e,n){var i=this;l(this,t),this.pi={},this.overlays={},this.Nn=new vs(0),this.xn=!1,this.xn=!0,this.referenceDelegate=e(this),this.Un=new Rl(this),this.indexManager=new rl,this.qn=new Ll((function(t){return i.referenceDelegate.Ii(t)})),this.O=new el(n),this.Kn=new Al(this.O)}return v(t,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.xn=!1,Promise.resolve()}},{key:"started",get:function(){return this.xn}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(t){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(t){var e=this.overlays[t.toKey()];return e||(e=new Dl,this.overlays[t.toKey()]=e),e}},{key:"getMutationQueue",value:function(t,e){var n=this.pi[t.toKey()];return n||(n=new Ol(e,this.referenceDelegate),this.pi[t.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Un}},{key:"getRemoteDocumentCache",value:function(){return this.qn}},{key:"getBundleCache",value:function(){return this.Kn}},{key:"runTransaction",value:function(t,e,n){var i=this;Jr("MemoryPersistence","Starting transaction:",t);var r=new Vl(this.Nn.next());return this.referenceDelegate.Ei(),n(r).next((function(t){return i.referenceDelegate.Ti(r).next((function(){return t}))})).toPromise().then((function(t){return r.raiseOnCommittedEvent(),t}))}},{key:"Ai",value:function(t,e){return Yu.or(Object.values(this.pi).map((function(n){return function(){return n.containsKey(t,e)}})))}}]),t}(),Vl=function(t){"use strict";I(n,t);var e=N(n);function n(t){var i;return l(this,n),(i=e.call(this)).currentSequenceNumber=t,S(i)}return n}(Wu),Fl=function(){"use strict";function t(e){l(this,t),this.persistence=e,this.Ri=new Nl,this.Pi=null}return v(t,[{key:"vi",get:function(){if(this.Pi)return this.Pi;throw ns()}},{key:"addReference",value:function(t,e,n){return this.Ri.addReference(n,e),this.vi.delete(n.toString()),Yu.resolve()}},{key:"removeReference",value:function(t,e,n){return this.Ri.removeReference(n,e),this.vi.add(n.toString()),Yu.resolve()}},{key:"markPotentiallyOrphaned",value:function(t,e){return this.vi.add(e.toString()),Yu.resolve()}},{key:"removeTarget",value:function(t,e){var n=this;this.Ri.si(e.targetId).forEach((function(t){return n.vi.add(t.toString())}));var i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next((function(t){var e=n;t.forEach((function(t){return e.vi.add(t.toString())}))})).next((function(){return i.removeTargetData(t,e)}))}},{key:"Ei",value:function(){this.Pi=new Set}},{key:"Ti",value:function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Yu.forEach(this.vi,(function(i){var r=qs.fromPath(i);return e.Vi(t,r).next((function(t){t||n.removeEntry(r,ks.min())}))})).next((function(){return e.Pi=null,n.apply(t)}))}},{key:"updateLimboDocument",value:function(t,e){var n=this;return this.Vi(t,e).next((function(t){t?n.vi.delete(e.toString()):n.vi.add(e.toString())}))}},{key:"Ii",value:function(t){return 0}},{key:"Vi",value:function(t,e){var n=this;return Yu.or([function(){return Yu.resolve(n.Ri.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Ai(t,e)}])}}],[{key:"bi",value:function(e){return new t(e)}}]),t}();var Ul=function(){"use strict";function t(){l(this,t),this.activeTargetIds=Ga()}return v(t,[{key:"Ci",value:function(t){this.activeTargetIds=this.activeTargetIds.add(t)}},{key:"Ni",value:function(t){this.activeTargetIds=this.activeTargetIds.delete(t)}},{key:"Di",value:function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}]),t}(),zl=function(){"use strict";function t(){l(this,t),this._r=new Ul,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return v(t,[{key:"addPendingMutation",value:function(t){}},{key:"updateMutationState",value:function(t,e,n){}},{key:"addLocalQueryTarget",value:function(t){return this._r.Ci(t),this.wr[t]||"not-current"}},{key:"updateQueryState",value:function(t,e,n){this.wr[t]=e}},{key:"removeLocalQueryTarget",value:function(t){this._r.Ni(t)}},{key:"isLocalQueryTarget",value:function(t){return this._r.activeTargetIds.has(t)}},{key:"clearQueryState",value:function(t){delete this.wr[t]}},{key:"getAllActiveQueryTargets",value:function(){return this._r.activeTargetIds}},{key:"isActiveQueryTarget",value:function(t){return this._r.activeTargetIds.has(t)}},{key:"start",value:function(){return this._r=new Ul,Promise.resolve()}},{key:"handleUserChange",value:function(t,e,n){}},{key:"setOnlineState",value:function(t){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(t){}},{key:"notifyBundleLoaded",value:function(){}}]),t}(),Bl=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(){l(this,t)}return v(t,[{key:"mr",value:function(t){}},{key:"shutdown",value:function(){}}]),t}(),Gl=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(){var e=this;l(this,t),this.gr=function(){return e.yr()},this.pr=function(){return e.Ir()},this.Er=[],this.Tr()}return v(t,[{key:"mr",value:function(t){this.Er.push(t)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}},{key:"Tr",value:function(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}},{key:"yr",value:function(){Jr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var t=!0,e=!1,n=void 0;try{for(var i,r=this.Er[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){(0,i.value)(0)}}catch(t){e=!0,n=t}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}}},{key:"Ir",value:function(){Jr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var t=!0,e=!1,n=void 0;try{for(var i,r=this.Er[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){(0,i.value)(1)}}catch(t){e=!0,n=t}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}}}],[{key:"Vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),t}(),jl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},ql=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e){l(this,t),this.Ar=e.Ar,this.Rr=e.Rr}return v(t,[{key:"Pr",value:function(t){this.br=t}},{key:"vr",value:function(t){this.Vr=t}},{key:"onMessage",value:function(t){this.Sr=t}},{key:"close",value:function(){this.Rr()}},{key:"send",value:function(t){this.Ar(t)}},{key:"Dr",value:function(){this.br()}},{key:"Cr",value:function(t){this.Vr(t)}},{key:"Nr",value:function(t){this.Sr(t)}}]),t}(),Hl=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(t){"use strict";I(n,t);var e=N(n);function n(t){var i;return l(this,n),(i=e.call(this,t)).forceLongPolling=t.forceLongPolling,i.autoDetectLongPolling=t.autoDetectLongPolling,i.useFetchStreams=t.useFetchStreams,S(i)}return v(n,[{key:"Br",value:function(t,e,n,i){return new Promise((function(r,s){var o=new Mr;o.listenOnce(Dr.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Ar.NO_ERROR:var e=o.getResponseJson();Jr("Connection","XHR received:",JSON.stringify(e)),r(e);break;case Ar.TIMEOUT:Jr("Connection",'RPC "'+t+'" timed out'),s(new os(ss.DEADLINE_EXCEEDED,"Request time out"));break;case Ar.HTTP_ERROR:var n=o.getStatus();if(Jr("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var i=o.getResponseJson().error;if(i&&i.status&&i.message){var a=(u=i.status,l=u.toLowerCase().replace(/_/g,"-"),Object.values(ss).indexOf(l)>=0?l:ss.UNKNOWN);s(new os(a,i.message))}else s(new os(ss.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new os(ss.UNAVAILABLE,"Connection failed."));break;default:ns()}}finally{Jr("Connection",'RPC "'+t+'" completed.')}var u,l}));var a=JSON.stringify(i);o.send(e,"POST",a,n,15)}))}},{key:"Ur",value:function(t,e,n){var i,r,s=[this.kr,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=xr(),a=Cr(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new Or({})),this.Fr(u.initMessageHeaders,e,n),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(R())||"object"==typeof navigator&&"ReactNative"===navigator.product||R().indexOf("Electron/")>=0||((r=R()).indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0)||R().indexOf("MSAppHost/")>=0||"object"==typeof(i="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==i.id||(u.httpHeadersOverwriteParam="$httpHeaders");var l=s.join("");Jr("Connection","Creating WebChannel: "+l,u);var c=o.createWebChannel(l,u),h=!1,f=!1,d=new ql({Ar:function(t){f?Jr("Connection","Not sending because WebChannel is closed:",t):(h||(Jr("Connection","Opening WebChannel transport."),c.open(),h=!0),Jr("Connection","WebChannel sending:",t),c.send(t))},Rr:function(){return c.close()}}),g=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return g(c,Lr.EventType.OPEN,(function(){f||Jr("Connection","WebChannel transport opened.")})),g(c,Lr.EventType.CLOSE,(function(){f||(f=!0,Jr("Connection","WebChannel transport closed"),d.Cr())})),g(c,Lr.EventType.ERROR,(function(t){f||(f=!0,ts("Connection","WebChannel transport errored:",t),d.Cr(new os(ss.UNAVAILABLE,"The operation could not be completed")))})),g(c,Lr.EventType.MESSAGE,(function(t){var e;if(!f){var n=t.data[0];is(!!n);var i=n,r=i.error||(null===(e=i[0])||void 0===e?void 0:e.error);if(r){Jr("Connection","WebChannel received error:",r);var s=r.status,o=function(t){var e=Ta[t];if(void 0!==e)return Aa(e)}(s),a=r.message;void 0===o&&(o=ss.INTERNAL,a="Unknown error status: "+s+" with message "+r.message),f=!0,d.Cr(new os(o,a)),c.close()}else Jr("Connection","WebChannel received:",n),d.Nr(n)}})),g(a,Nr.STAT_EVENT,(function(t){t.stat===_r.PROXY?Jr("Connection","Detected buffering proxy"):t.stat===_r.NOPROXY&&Jr("Connection","Detected no buffering proxy")})),setTimeout((function(){d.Dr()}),0),d}}]),n}(function(){"use strict";function t(e){l(this,t),this.databaseInfo=e,this.databaseId=e.databaseId;var n=e.ssl?"https":"http";this.kr=n+"://"+e.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return v(t,[{key:"Mr",value:function(t,e,n,i,r){var s=this.$r(t,e);Jr("RestConnection","Sending: ",s,n);var o={};return this.Fr(o,i,r),this.Br(t,s,o,n).then((function(t){return Jr("RestConnection","Received: ",t),t}),(function(e){throw ts("RestConnection","".concat(t," failed with error: "),e,"url: ",s,"request:",n),e}))}},{key:"Lr",value:function(t,e,n,i,r){return this.Mr(t,e,n,i,r)}},{key:"Fr",value:function(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+Yr,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((function(e,n){return t[n]=e})),n&&n.headers.forEach((function(e,n){return t[n]=e}))}},{key:"$r",value:function(t,e){var n=jl[t];return"".concat(this.kr,"/v1/").concat(e,":").concat(n)}}]),t}());function Kl(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(t){return new tu(t,!0)}var Wl=function(){"use strict";function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;l(this,t),this.Sn=e,this.timerId=n,this.qr=i,this.Kr=r,this.Gr=s,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}return v(t,[{key:"reset",value:function(){this.jr=0}},{key:"zr",value:function(){this.jr=this.Gr}},{key:"Hr",value:function(t){var e=this;this.cancel();var n=Math.floor(this.jr+this.Jr()),i=Math.max(0,Date.now()-this.Wr),r=Math.max(0,n-i);r>0&&Jr("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.jr," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(i," ms ago)")),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,r,(function(){return e.Wr=Date.now(),t()})),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}},{key:"Yr",value:function(){null!==this.Qr&&(this.Qr.skipDelay(),this.Qr=null)}},{key:"cancel",value:function(){null!==this.Qr&&(this.Qr.cancel(),this.Qr=null)}},{key:"Jr",value:function(){return(Math.random()-.5)*this.jr}}]),t}(),Yl=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e,n,i,r,s,o,a,u){l(this,t),this.Sn=e,this.Xr=i,this.Zr=r,this.eo=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new Wl(e,n)}return v(t,[{key:"oo",value:function(){return 1===this.state||5===this.state||this.co()}},{key:"co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.uo()}},{key:"stop",value:function(){return u(e(_).mark((function t(){return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.oo(),!t.t0){t.next=4;break}return t.next=4,this.close(0);case 4:case"end":return t.stop()}}),t,this)})).bind(this))()}},{key:"ao",value:function(){this.state=0,this.ro.reset()}},{key:"ho",value:function(){var t=this;this.co()&&null===this.so&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,(function(){return t.lo()})))}},{key:"fo",value:function(t){this._o(),this.stream.send(t)}},{key:"lo",value:function(){return u(e(_).mark((function t(){return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.co()){t.next=2;break}return t.abrupt("return",this.close(0));case 2:case"end":return t.stop()}}),t,this)})).bind(this))()}},{key:"_o",value:function(){this.so&&(this.so.cancel(),this.so=null)}},{key:"wo",value:function(){this.io&&(this.io.cancel(),this.io=null)}},{key:"close",value:function(t,n){return u(e(_).mark((function i(){return e(_).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._o(),this.wo(),this.ro.cancel(),this.no++,4!==t?this.ro.reset():n&&n.code===ss.RESOURCE_EXHAUSTED?(Zr(n.toString()),Zr("Using maximum backoff delay to prevent overloading the backend."),this.ro.zr()):n&&n.code===ss.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.mo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.vr(n);case 9:case"end":return e.stop()}}),i,this)})).bind(this))()}},{key:"mo",value:function(){}},{key:"auth",value:function(){var t=this;this.state=1;var e=this.yo(this.no),n=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(e){var i=C(e),r=i[0],s=i[1];t.no===n&&t.po(r,s)}),(function(n){var i=t;e((function(){var t=new os(ss.UNKNOWN,"Fetching auth token failed: "+n.message);return i.Io(t)}))}))}},{key:"po",value:function(t,e){var n=this,i=this.yo(this.no);this.stream=this.Eo(t,e),this.stream.Pr((function(){var t=n;i((function(){return t.state=2,t.io=t.Sn.enqueueAfterDelay(t.Zr,1e4,(function(){return t.co()&&(t.state=3),Promise.resolve()})),t.listener.Pr()}))})),this.stream.vr((function(t){var e=n;i((function(){return e.Io(t)}))})),this.stream.onMessage((function(t){var e=n;i((function(){return e.onMessage(t)}))}))}},{key:"uo",value:function(){var t,n=this;this.state=5,this.ro.Hr((t=u(e(_).mark((function t(){return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.state=0,n.start();case 1:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)}))}},{key:"Io",value:function(t){return Jr("PersistentStream","close with error: ".concat(t)),this.stream=null,this.close(4,t)}},{key:"yo",value:function(t){var e=this;return function(n){var i=e;e.Sn.enqueueAndForget((function(){return i.no===t?n():(Jr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),t}(),$l=function(t){"use strict";I(n,t);var e=N(n);function n(t,i,r,s,o,a){var u;return l(this,n),(u=e.call(this,t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,r,s,a)).O=o,S(u)}return v(n,[{key:"Eo",value:function(t,e){return this.eo.Ur("Listen",t,e)}},{key:"onMessage",value:function(t){this.ro.reset();var e=function(t,e){var n,i;if("targetChange"in e){e.targetChange;var r="NO_CHANGE"===(i=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===i?1:"REMOVE"===i?2:"CURRENT"===i?3:"RESET"===i?4:ns(),s=e.targetChange.targetIds||[],o=function(t,e){return t.N?(is(void 0===e||"string"==typeof e),_s.fromBase64String(e||"")):(is(void 0===e||e instanceof Uint8Array),_s.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(t){var e=void 0===t.code?ss.UNKNOWN:Aa(t.code);return new os(e,t.message||"")}(a);n=new Xa(r,s,o,u||null)}else if("documentChange"in e){e.documentChange;var l=e.documentChange;l.document,l.document.name,l.document.updateTime;var c=uu(t,l.document.name),h=ru(l.document.updateTime),f=new oo({mapValue:{fields:l.document.fields}}),d=uo.newFoundDocument(c,h,f),g=l.targetIds||[],v=l.removedTargetIds||[];n=new Ha(g,v,d.key,d)}else if("documentDelete"in e){e.documentDelete;var p=e.documentDelete;p.document;var m=uu(t,p.document),y=p.readTime?ru(p.readTime):ks.min(),b=uo.newNoDocument(m,y),w=p.removedTargetIds||[];n=new Ha([],w,b.key,b)}else if("documentRemove"in e){e.documentRemove;var k=e.documentRemove;k.document;var T=uu(t,k.document),I=k.removedTargetIds||[];n=new Ha([],I,T,null)}else{if(!("filter"in e))return ns();e.filter;var E=e.filter;E.targetId;var S=E.count||0,x=new xa(S),C=E.targetId;n=new Ka(C,x)}return n}(this.O,t),n=function(t){if(!("targetChange"in t))return ks.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?ks.min():e.readTime?ru(e.readTime):ks.min()}(t);return this.listener.To(e,n)}},{key:"Ao",value:function(t){var e,n,i,r,s={};s.database=hu(this.O),s.addTarget=(e=this.O,r=(n=t).target,(i=vo(r)?{documents:vu(e,r)}:{query:pu(e,r)}).targetId=n.targetId,n.resumeToken.approximateByteSize()>0?i.resumeToken=nu(e,n.resumeToken):n.snapshotVersion.compareTo(ks.min())>0&&(i.readTime=eu(e,n.snapshotVersion.toTimestamp())),i);var o=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ns()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.O,t);o&&(s.labels=o),this.fo(s)}},{key:"Ro",value:function(t){var e={};e.database=hu(this.O),e.removeTarget=t,this.fo(e)}}]),n}(Yl),Ql=function(t){"use strict";I(n,t);var e=N(n);function n(t,i,r,s,o,a){var u;return l(this,n),(u=e.call(this,t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,r,s,a)).O=o,u.Po=!1,S(u)}return v(n,[{key:"bo",get:function(){return this.Po}},{key:"start",value:function(){this.Po=!1,this.lastStreamToken=void 0,w(y(n.prototype),"start",this).call(this)}},{key:"mo",value:function(){this.Po&&this.vo([])}},{key:"Eo",value:function(t,e){return this.eo.Ur("Write",t,e)}},{key:"onMessage",value:function(t){if(is(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Po){this.ro.reset();var e=(i=t.writeResults,r=t.commitTime,i&&i.length>0?(is(void 0!==r),i.map((function(t){return n=r,(i=(e=t).updateTime?ru(e.updateTime):ru(n)).isEqual(ks.min())&&(i=ru(n)),new ua(i,e.transformResults||[]);var e,n,i}))):[]),n=ru(t.commitTime);return this.listener.Vo(n,e)}var i,r;return is(!t.writeResults||0===t.writeResults.length),this.Po=!0,this.listener.So()}},{key:"Do",value:function(){var t={};t.database=hu(this.O),this.fo(t)}},{key:"vo",value:function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return gu(e.O,t)}))};this.fo(n)}}]),n}(Yl),Jl=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(t){"use strict";I(n,(function t(){l(this,t)}));var e=N(n);function n(t,i,r,s){var o;return l(this,n),(o=e.call(this)).authCredentials=t,o.appCheckCredentials=i,o.eo=r,o.O=s,o.Co=!1,S(o)}return v(n,[{key:"No",value:function(){if(this.Co)throw new os(ss.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Mr",value:function(t,e,n){var i=this;return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(r){var s=C(r),o=s[0],a=s[1];return i.eo.Mr(t,e,n,o,a)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===ss.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),t):new os(ss.UNKNOWN,t.toString())}))}},{key:"Lr",value:function(t,e,n){var i=this;return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(r){var s=C(r),o=s[0],a=s[1];return i.eo.Lr(t,e,n,o,a)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===ss.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),t):new os(ss.UNKNOWN,t.toString())}))}},{key:"terminate",value:function(){this.Co=!0}}]),n}(),Zl=function(){"use strict";function t(e,n){l(this,t),this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}return v(t,[{key:"Mo",value:function(){var t=this;0===this.xo&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.ko=null,t.Fo("Backend didn't respond within 10 seconds."),t.$o("Offline"),Promise.resolve()})))}},{key:"Bo",value:function(t){"Online"===this.state?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo("Connection failed 1 times. Most recent error: ".concat(t.toString())),this.$o("Offline")))}},{key:"set",value:function(t){this.Lo(),this.xo=0,"Online"===t&&(this.Oo=!1),this.$o(t)}},{key:"$o",value:function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}},{key:"Fo",value:function(t){var e="Could not reach Cloud Firestore backend. ".concat(t,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.Oo?(Zr(e),this.Oo=!1):Jr("OnlineStateTracker",e)}},{key:"Lo",value:function(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}}]),t}(),tc=function t(n,i,r,s,o){"use strict";var a=this;l(this,t),this.localStore=n,this.datastore=i,this.asyncQueue=r,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=o,this.jo.mr((function(t){var n,i=a;r.enqueueAndForget((n=u(e(_).mark((function t(){return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=hc(i),!t.t0){t.next=5;break}return Jr("RemoteStore","Restarting streams for network reachability change."),t.next=5,u(e(_).mark((function t(n){var i;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=rs(n)).Ko.add(4),t.next=4,ic(i);case 4:return i.Qo.set("Unknown"),i.Ko.delete(4),t.next=8,ec(i);case 8:case"end":return t.stop()}}),t)})))(i);case 5:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)}))})),this.Qo=new Zl(r,s)};function ec(t){return nc.apply(this,arguments)}function nc(){return(nc=u(e(_).mark((function t(n){var i,r,s,o,a,u;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=!0,r=!1,s=void 0,!hc(n)){t.next=25;break}t.prev=2,o=n.Go[Symbol.iterator]();case 4:if(i=(a=o.next()).done){t.next=11;break}return u=a.value,t.next=8,u(!0);case 8:i=!0,t.next=4;break;case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(2),r=!0,s=t.t0;case 17:t.prev=17,t.prev=18,i||null==o.return||o.return();case 20:if(t.prev=20,!r){t.next=23;break}throw s;case 23:return t.finish(20);case 24:return t.finish(17);case 25:case"end":return t.stop()}}),t,null,[[2,13,17,25],[18,,20,24]])})))).apply(this,arguments)}function ic(t){return rc.apply(this,arguments)}function rc(){return(rc=u(e(_).mark((function t(n){var i,r,s,o,a,u;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=!0,r=!1,s=void 0,t.prev=1,o=n.Go[Symbol.iterator]();case 3:if(i=(a=o.next()).done){t.next=10;break}return u=a.value,t.next=7,u(!1);case 7:i=!0,t.next=3;break;case 10:t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),r=!0,s=t.t0;case 16:t.prev=16,t.prev=17,i||null==o.return||o.return();case 19:if(t.prev=19,!r){t.next=22;break}throw s;case 22:return t.finish(19);case 23:return t.finish(16);case 24:case"end":return t.stop()}}),t,null,[[1,12,16,24],[17,,19,23]])})))).apply(this,arguments)}function sc(t,e){var n=rs(t);n.qo.has(e.targetId)||(n.qo.set(e.targetId,e),cc(n)?lc(n):zc(n).co()&&ac(n,e))}function oc(t,e){var n=rs(t),i=zc(n);n.qo.delete(e),i.co()&&uc(n,e),0===n.qo.size&&(i.co()?i.ho():hc(n)&&n.Qo.set("Unknown"))}function ac(t,e){t.Wo.Z(e.targetId),zc(t).Ao(e)}function uc(t,e){t.Wo.Z(e),zc(t).Ro(e)}function lc(t){t.Wo=new Ya({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},Tt:function(e){return t.qo.get(e)||null}}),zc(t).start(),t.Qo.Mo()}function cc(t){return hc(t)&&!zc(t).oo()&&t.qo.size>0}function hc(t){return 0===rs(t).Ko.size}function fc(t){t.Wo=void 0}function dc(t){return gc.apply(this,arguments)}function gc(){return(gc=u(e(_).mark((function t(n){return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.qo.forEach((function(t,e){ac(n,t)}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function vc(t,e){return pc.apply(this,arguments)}function pc(){return(pc=u(e(_).mark((function t(n,i){return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:fc(n),cc(n)?(n.Qo.Bo(i),lc(n)):n.Qo.set("Unknown");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function mc(t,e,n){return yc.apply(this,arguments)}function yc(){return(yc=u(e(_).mark((function t(n,i,r){var s;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.Qo.set("Online"),!(i instanceof Xa&&2===i.state&&i.cause)){t.next=13;break}return t.prev=1,t.next=4,u(e(_).mark((function t(n,i){var r,s,o,a,u,l,c;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=i.cause,s=!0,o=!1,a=void 0,t.prev=2,u=i.targetIds[Symbol.iterator]();case 4:if(s=(l=u.next()).done){t.next=15;break}if(c=l.value,t.t0=n.qo.has(c),!t.t0){t.next=12;break}return t.next=10,n.remoteSyncer.rejectListen(c,r);case 10:n.qo.delete(c),n.Wo.removeTarget(c);case 12:s=!0,t.next=4;break;case 15:t.next=21;break;case 17:t.prev=17,t.t1=t.catch(2),o=!0,a=t.t1;case 21:t.prev=21,t.prev=22,s||null==u.return||u.return();case 24:if(t.prev=24,!o){t.next=27;break}throw a;case 27:return t.finish(24);case 28:return t.finish(21);case 29:case"end":return t.stop()}}),t,null,[[2,17,21,29],[22,,24,28]])})))(n,i);case 4:t.next=11;break;case 6:return t.prev=6,t.t0=t.catch(1),Jr("RemoteStore","Failed to remove targets %s: %s ",i.targetIds.join(","),t.t0),t.next=11,bc(n,t.t0);case 11:case 22:t.next=29;break;case 13:if(i instanceof Ha?n.Wo.ct(i):i instanceof Ka?n.Wo._t(i):n.Wo.ht(i),r.isEqual(ks.min())){t.next=29;break}return t.prev=14,t.next=17,wl(n.localStore);case 17:if(s=t.sent,t.t1=r.compareTo(s)>=0,!t.t1){t.next=22;break}return t.next=22,function(t,e){var n=t.Wo.yt(e);return n.targetChanges.forEach((function(n,i){if(n.resumeToken.approximateByteSize()>0){var r=t.qo.get(i);r&&t.qo.set(i,r.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.qo.get(e);if(n){t.qo.set(e,n.withResumeToken(_s.EMPTY_BYTE_STRING,n.snapshotVersion)),uc(t,e);var i=new tl(n.target,e,1,n.sequenceNumber);ac(t,i)}})),t.remoteSyncer.applyRemoteEvent(n)}(n,r);case 24:return t.prev=24,t.t2=t.catch(14),Jr("RemoteStore","Failed to raise snapshot:",t.t2),t.next=29,bc(n,t.t2);case 29:case"end":return t.stop()}}),t,null,[[1,6],[14,24]])})))).apply(this,arguments)}function bc(t,e,n){return wc.apply(this,arguments)}function wc(){return(wc=u(e(_).mark((function t(n,i,r){return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if($u(i)){t.next=2;break}throw i;case 2:return n.Ko.add(1),t.next=5,ic(n);case 5:n.Qo.set("Offline"),r||(r=function(){return wl(n.localStore)}),n.asyncQueue.enqueueRetryable(u(e(_).mark((function t(){return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Jr("RemoteStore","Retrying IndexedDB access"),t.next=3,r();case 3:return n.Ko.delete(1),t.next=6,ec(n);case 6:case"end":return t.stop()}}),t)}))));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function kc(t,e){return e().catch((function(n){return bc(t,n,e)}))}function Tc(t){return Ic.apply(this,arguments)}function Ic(){return(Ic=u(e(_).mark((function t(n){var i,r,s,o;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=rs(n),r=Bc(i),s=i.Uo.length>0?i.Uo[i.Uo.length-1].batchId:-1;case 2:if(!Ec(i)){t.next=19;break}return t.prev=3,t.next=6,Il(i.localStore,s);case 6:if(null!==(o=t.sent)){t.next=10;break}return 0===i.Uo.length&&r.ho(),t.abrupt("break",19);case 10:s=o.batchId,Sc(i,o),t.next=17;break;case 13:return t.prev=13,t.t0=t.catch(3),t.next=17,bc(i,t.t0);case 17:t.next=2;break;case 19:xc(i)&&Cc(i);case 20:case"end":return t.stop()}}),t,null,[[3,13]])})))).apply(this,arguments)}function Ec(t){return hc(t)&&t.Uo.length<10}function Sc(t,e){t.Uo.push(e);var n=Bc(t);n.co()&&n.bo&&n.vo(e.mutations)}function xc(t){return hc(t)&&!Bc(t).oo()&&t.Uo.length>0}function Cc(t){Bc(t).start()}function Ac(t){return Dc.apply(this,arguments)}function Dc(){return(Dc=u(e(_).mark((function t(n){return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Bc(n).Do();case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Nc(t){return _c.apply(this,arguments)}function _c(){return(_c=u(e(_).mark((function t(n){var i,r,s,o,a,u,l;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(i=Bc(n),r=!0,s=!1,o=void 0,t.prev=2,a=n.Uo[Symbol.iterator]();!(r=(u=a.next()).done);r=!0)l=u.value,i.vo(l.mutations);t.next=10;break;case 6:t.prev=6,t.t0=t.catch(2),s=!0,o=t.t0;case 10:t.prev=10,t.prev=11,r||null==a.return||a.return();case 13:if(t.prev=13,!s){t.next=16;break}throw o;case 16:return t.finish(13);case 17:return t.finish(10);case 18:case"end":return t.stop()}}),t,null,[[2,6,10,18],[11,,13,17]])})))).apply(this,arguments)}function Oc(t,e,n){return Lc.apply(this,arguments)}function Lc(){return(Lc=u(e(_).mark((function t(n,i,r){var s,o;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=n.Uo.shift(),o=Ju.from(s,i,r),t.next=3,kc(n,(function(){return n.remoteSyncer.applySuccessfulWrite(o)}));case 3:return t.next=5,Tc(n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Mc(t,e){return Rc.apply(this,arguments)}function Rc(){return(Rc=u(e(_).mark((function t(n,i){return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=i&&Bc(n).bo,!t.t0){t.next=4;break}return t.next=4,u(e(_).mark((function t(n,i){var r,s;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Ca(s=i.code)||s===ss.ABORTED){t.next=7;break}return r=n.Uo.shift(),Bc(n).ao(),t.next=5,kc(n,(function(){return n.remoteSyncer.rejectFailedWrite(r.batchId,i)}));case 5:return t.next=7,Tc(n);case 7:case 8:case"end":return t.stop()}}),t)})))(n,i);case 4:xc(n)&&Cc(n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Pc(t,e){return Vc.apply(this,arguments)}function Vc(){return(Vc=u(e(_).mark((function t(n,i){var r,s;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=rs(n)).asyncQueue.verifyOperationInProgress(),Jr("RemoteStore","RemoteStore received new credentials"),s=hc(r),r.Ko.add(3),t.next=6,ic(r);case 6:return s&&r.Qo.set("Unknown"),t.next=9,r.remoteSyncer.handleCredentialChange(i);case 9:return r.Ko.delete(3),t.next=12,ec(r);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Fc(t,e){return Uc.apply(this,arguments)}function Uc(){return(Uc=u(e(_).mark((function t(n,i){var r;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=rs(n),!i){t.next=7;break}return r.Ko.delete(2),t.next=5,ec(r);case 5:t.next=13;break;case 7:if(t.t0=i,t.t0){t.next=13;break}return r.Ko.add(2),t.next=12,ic(r);case 12:r.Qo.set("Unknown");case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function zc(t){return t.zo||(t.zo=(n=t.datastore,i=t.asyncQueue,r={Pr:dc.bind(null,t),vr:vc.bind(null,t),To:mc.bind(null,t)},(s=rs(n)).No(),new $l(i,s.eo,s.authCredentials,s.appCheckCredentials,s.O,r)),t.Go.push(u(e(_).mark((function n(i){return e(_).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=4;break}t.zo.ao(),cc(t)?lc(t):t.Qo.set("Unknown"),e.next=7;break;case 4:return e.next=6,t.zo.stop();case 6:fc(t);case 7:case"end":return e.stop()}}),n)}))))),t.zo;var n,i,r,s}function Bc(t){return t.Ho||(t.Ho=(n=t.datastore,i=t.asyncQueue,r={Pr:Ac.bind(null,t),vr:Mc.bind(null,t),So:Nc.bind(null,t),Vo:Oc.bind(null,t)},(s=rs(n)).No(),new Ql(i,s.eo,s.authCredentials,s.appCheckCredentials,s.O,r)),t.Go.push(u(e(_).mark((function n(i){return e(_).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=6;break}return t.Ho.ao(),e.next=4,Tc(t);case 4:e.next=9;break;case 6:return e.next=8,t.Ho.stop();case 8:t.Uo.length>0&&(Jr("RemoteStore","Stopping write stream with ".concat(t.Uo.length," pending writes")),t.Uo=[]);case 9:case"end":return e.stop()}}),n)}))))),t.Ho;var n,i,r,s}var Gc=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e,n,i,r,s){l(this,t),this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new as,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return v(t,[{key:"start",value:function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new os(ss.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}},{key:"handleDelayElapsed",value:function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}],[{key:"createAndSchedule",value:function(e,n,i,r,s){var o=new t(e,n,Date.now()+i,r,s);return o.start(i),o}}]),t}();function jc(t,e){if(Zr("AsyncQueue","".concat(e,": ").concat(t)),$u(t))return new os(ss.UNAVAILABLE,"".concat(e,": ").concat(t));throw t}var qc=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e){l(this,t),this.comparator=e?function(t,n){return e(t,n)||qs.comparator(t.key,n.key)}:function(t,e){return qs.comparator(t.key,e.key)},this.keyedMap=Va(),this.sortedSet=new Da(this.comparator)}return v(t,[{key:"has",value:function(t){return null!=this.keyedMap.get(t)}},{key:"get",value:function(t){return this.keyedMap.get(t)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))}},{key:"add",value:function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}},{key:"delete",value:function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}},{key:"isEqual",value:function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();n.hasNext();){var r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}},{key:"toString",value:function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}},{key:"copy",value:function(e,n){var i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}],[{key:"emptySet",value:function(e){return new t(e.comparator)}}]),t}(),Hc=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(){l(this,t),this.Jo=new Da(qs.comparator)}return v(t,[{key:"track",value:function(t){var e=t.doc.key,n=this.Jo.get(e);n?0!==t.type&&3===n.type?this.Jo=this.Jo.insert(e,t):3===t.type&&1!==n.type?this.Jo=this.Jo.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Jo=this.Jo.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Jo=this.Jo.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Jo=this.Jo.remove(e):1===t.type&&2===n.type?this.Jo=this.Jo.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Jo=this.Jo.insert(e,{type:2,doc:t.doc}):ns():this.Jo=this.Jo.insert(e,t)}},{key:"Yo",value:function(){var t=[];return this.Jo.inorderTraversal((function(e,n){t.push(n)})),t}}]),t}(),Kc=function(){"use strict";function t(e,n,i,r,s,o,a,u){l(this,t),this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u}return v(t,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Bo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var i=0;i<e.length;i++)if(e[i].type!==n[i].type||!e[i].doc.isEqual(n[i].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(e,n,i,r){var s=[];return n.forEach((function(t){s.push({type:0,doc:t})})),new t(e,n,qc.emptySet(n),s,i,r,!0,!1)}}]),t}(),Xc=function t(){"use strict";l(this,t),this.Xo=void 0,this.listeners=[]},Wc=function t(){"use strict";l(this,t),this.queries=new cl((function(t){return Go(t)}),Bo),this.onlineState="Unknown",this.Zo=new Set};function Yc(t,e){return $c.apply(this,arguments)}function $c(){return($c=u(e(_).mark((function t(n,i){var r,s,o,a,u;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=rs(n),s=i.query,o=!1,(a=r.queries.get(s))||(o=!0,a=new Xc),!o){t.next=13;break}return t.prev=3,t.next=6,r.onListen(s);case 6:a.Xo=t.sent,t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(3),u=jc(t.t0,"Initialization of query '".concat(jo(i.query),"' failed")),t.abrupt("return",void i.onError(u));case 13:r.queries.set(s,a),a.listeners.push(i),i.tc(r.onlineState),a.Xo&&i.ec(a.Xo)&&eh(r);case 14:case"end":return t.stop()}}),t,null,[[3,9]])})))).apply(this,arguments)}function Qc(t,e){return Jc.apply(this,arguments)}function Jc(){return(Jc=u(e(_).mark((function t(n,i){var r,s,o,a,u;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=rs(n),s=i.query,o=!1,(a=r.queries.get(s))&&(u=a.listeners.indexOf(i))>=0&&(a.listeners.splice(u,1),o=0===a.listeners.length),!o){t.next=6;break}return t.abrupt("return",(r.queries.delete(s),r.onUnlisten(s)));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Zc(t,e){var n=rs(t),i=!1,r=!0,s=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=a.value,c=l.query,h=n.queries.get(c);if(h){var f=!0,d=!1,g=void 0;try{for(var v,p=h.listeners[Symbol.iterator]();!(f=(v=p.next()).done);f=!0){v.value.ec(l)&&(i=!0)}}catch(t){d=!0,g=t}finally{try{f||null==p.return||p.return()}finally{if(d)throw g}}h.Xo=l}}}catch(t){s=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(s)throw o}}i&&eh(n)}function th(t,e,n){var i=rs(t),r=i.queries.get(e),s=!0,o=!1,a=void 0;if(r)try{for(var u,l=r.listeners[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){u.value.onError(n)}}catch(t){o=!0,a=t}finally{try{s||null==l.return||l.return()}finally{if(o)throw a}}i.queries.delete(e)}function eh(t){t.Zo.forEach((function(t){t.next()}))}var nh=function(){"use strict";function t(e,n,i){l(this,t),this.query=e,this.nc=n,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=i||{}}return v(t,[{key:"ec",value:function(t){if(!this.options.includeMetadataChanges){var e=[],n=!0,i=!1,r=void 0;try{for(var s,o=t.docChanges[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var a=s.value;3!==a.type&&e.push(a)}}catch(t){i=!0,r=t}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}t=new Kc(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var u=!1;return this.sc?this.rc(t)&&(this.nc.next(t),u=!0):this.oc(t,this.onlineState)&&(this.cc(t),u=!0),this.ic=t,u}},{key:"onError",value:function(t){this.nc.error(t)}},{key:"tc",value:function(t){this.onlineState=t;var e=!1;return this.ic&&!this.sc&&this.oc(this.ic,t)&&(this.cc(this.ic),e=!0),e}},{key:"oc",value:function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.uc&&n||t.docs.isEmpty()&&"Offline"!==e)}},{key:"rc",value:function(t){if(t.docChanges.length>0)return!0;var e=this.ic&&this.ic.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}},{key:"cc",value:function(t){t=Kc.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.sc=!0,this.nc.next(t)}}]),t}();var ih=function t(e){"use strict";l(this,t),this.key=e},rh=function t(e){"use strict";l(this,t),this.key=e},sh=function(){"use strict";function t(e,n){l(this,t),this.query=e,this.dc=n,this._c=null,this.current=!1,this.wc=za(),this.mutatedKeys=za(),this.mc=Ho(e),this.gc=new qc(this.mc)}return v(t,[{key:"yc",get:function(){return this.dc}},{key:"Ic",value:function(t,e){var n=this,i=e?e.Ec:new Hc,r=e?e.gc:this.gc,s=e?e.mutatedKeys:this.mutatedKeys,o=r,a=!1,u=Lo(this.query)&&r.size===this.query.limit?r.last():null,l=Mo(this.query)&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((function(t,e){var c=r.get(t),h=qo(n.query,e)?e:null,f=!!c&&n.mutatedKeys.has(c.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),g=!1;c&&h?c.data.isEqual(h.data)?f!==d&&(i.track({type:3,doc:h}),g=!0):n.Tc(c,h)||(i.track({type:2,doc:h}),g=!0,(u&&n.mc(h,u)>0||l&&n.mc(h,l)<0)&&(a=!0)):!c&&h?(i.track({type:0,doc:h}),g=!0):c&&!h&&(i.track({type:1,doc:c}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=d?s.add(t):s.delete(t)):(o=o.delete(t),s=s.delete(t)))})),Lo(this.query)||Mo(this.query))for(;o.size>this.query.limit;){var c=Lo(this.query)?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),i.track({type:1,doc:c})}return{gc:o,Ec:i,ks:a,mutatedKeys:s}}},{key:"Tc",value:function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}},{key:"applyChanges",value:function(t,e,n){var i=this,r=this.gc;this.gc=t.gc,this.mutatedKeys=t.mutatedKeys;var s=t.Ec.Yo();s.sort((function(t,e){return n=t.type,r=e.type,(s=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ns()}})(n)-s(r)||i.mc(t.doc,e.doc);var n,r,s})),this.Ac(n);var o=e?this.Rc():[],a=0===this.wc.size&&this.current?1:0,u=a!==this._c;return this._c=a,0!==s.length||u?{snapshot:new Kc(this.query,t.gc,r,s,t.mutatedKeys,0===a,u,!1),Pc:o}:{Pc:o}}},{key:"tc",value:function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new Hc,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}},{key:"bc",value:function(t){return!this.dc.has(t)&&!!this.gc.has(t)&&!this.gc.get(t).hasLocalMutations}},{key:"Ac",value:function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.dc=e.dc.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.dc=e.dc.delete(t)})),this.current=t.current)}},{key:"Rc",value:function(){var t=this;if(!this.current)return[];var e=this.wc;this.wc=za(),this.gc.forEach((function(e){t.bc(e.key)&&(t.wc=t.wc.add(e.key))}));var n=[];return e.forEach((function(e){t.wc.has(e)||n.push(new rh(e))})),this.wc.forEach((function(t){e.has(t)||n.push(new ih(t))})),n}},{key:"vc",value:function(t){this.dc=t.Ks,this.wc=za();var e=this.Ic(t.documents);return this.applyChanges(e,!0)}},{key:"Vc",value:function(){return Kc.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,0===this._c)}}]),t}(),oh=function t(e,n,i){"use strict";l(this,t),this.query=e,this.targetId=n,this.view=i},ah=function t(e){"use strict";l(this,t),this.key=e,this.Sc=!1},uh=function(){"use strict";function t(e,n,i,r,s,o){l(this,t),this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Dc={},this.Cc=new cl((function(t){return Go(t)}),Bo),this.Nc=new Map,this.xc=new Set,this.kc=new Da(qs.comparator),this.Oc=new Map,this.Mc=new Nl,this.$c={},this.Fc=new Map,this.Bc=al.Je(),this.onlineState="Unknown",this.Lc=void 0}return v(t,[{key:"isPrimaryClient",get:function(){return!0===this.Lc}}]),t}();function lh(t,e){return ch.apply(this,arguments)}function ch(){return(ch=u(e(_).mark((function t(n,i){var r,s,o,a,u,l;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Fh(n),!(a=r.Cc.get(i))){t.next=7;break}s=a.targetId,r.sharedClientState.addLocalQueryTarget(s),o=a.view.Vc(),t.next=16;break;case 7:return t.next=9,El(r.localStore,Uo(i));case 9:return u=t.sent,r.isPrimaryClient&&sc(r.remoteStore,u),l=r.sharedClientState.addLocalQueryTarget(u.targetId),s=u.targetId,t.next=15,hh(r,i,s,"current"===l);case 15:o=t.sent;case 16:return t.abrupt("return",o);case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function hh(t,e,n,i){return fh.apply(this,arguments)}function fh(){return fh=u(e(_).mark((function t(n,i,r,s){var o,a,l,c,h,f;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.Uc=function(t,i,r){return u(e(_).mark((function t(n,i,r,s){var o,a,u;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=i.view.Ic(r),t.t0=o.ks,!t.t0){t.next=6;break}return t.next=5,Cl(n.localStore,i.query,!1).then((function(t){var e=t.documents;return i.view.Ic(e,o)}));case 5:o=t.sent;case 6:return a=s&&s.targetChanges.get(i.targetId),u=i.view.applyChanges(o,n.isPrimaryClient,a),t.abrupt("return",(Nh(n,i.targetId,u.Pc),u.snapshot));case 8:case"end":return t.stop()}}),t)})))(n,t,i,r)},t.next=3,Cl(n.localStore,i,!0);case 3:return o=t.sent,a=new sh(i,o.Ks),l=a.Ic(o.documents),c=qa.createSynthesizedTargetChangeForCurrentChange(r,s&&"Offline"!==n.onlineState),h=a.applyChanges(l,n.isPrimaryClient,c),Nh(n,r,h.Pc),f=new oh(i,r,a),t.abrupt("return",(n.Cc.set(i,f),n.Nc.has(r)?n.Nc.get(r).push(i):n.Nc.set(r,[i]),h.snapshot));case 11:case"end":return t.stop()}}),t)}))),fh.apply(this,arguments)}function dh(t,e){return gh.apply(this,arguments)}function gh(){return(gh=u(e(_).mark((function t(n,i){var r,s,o;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=rs(n),s=r.Cc.get(i),!((o=r.Nc.get(s.targetId)).length>1)){t.next=3;break}return t.abrupt("return",(r.Nc.set(s.targetId,o.filter((function(t){return!Bo(t,i)}))),void r.Cc.delete(i)));case 3:if(!r.isPrimaryClient){t.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(s.targetId),t.t0=r.sharedClientState.isActiveQueryTarget(s.targetId),t.t0){t.next=9;break}return t.next=9,Sl(r.localStore,s.targetId,!1).then((function(){r.sharedClientState.clearQueryState(s.targetId),oc(r.remoteStore,s.targetId),Ah(r,s.targetId)})).catch(ul);case 9:t.next=14;break;case 11:return Ah(r,s.targetId),t.next=14,Sl(r.localStore,s.targetId,!0);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function vh(t,e,n){return ph.apply(this,arguments)}function ph(){return(ph=u(e(_).mark((function t(n,i,r){var s,o,a;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=Uh(n),t.prev=1,t.next=4,function(t,e){var n,i=rs(t),r=ws.now(),s=e.reduce((function(t,e){return t.add(e.key)}),za());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return i.Us.Es(t,s).next((function(s){n=s;var o=[],a=!0,u=!1,l=void 0;try{for(var c,h=e[Symbol.iterator]();!(a=(c=h.next()).done);a=!0){var f=c.value,d=ga(f,n.get(f.key));null!=d&&o.push(new ya(f.key,d,ao(d.value.mapValue),la.exists(!0)))}}catch(t){u=!0,l=t}finally{try{a||null==h.return||h.return()}finally{if(u)throw l}}return i.gs.addMutationBatch(t,r,o,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(s.localStore,i);case 4:return o=t.sent,s.sharedClientState.addPendingMutation(o.batchId),e=s,u=o.batchId,l=r,c=void 0,(c=e.$c[e.currentUser.toKey()])||(c=new Da(ys)),c=c.insert(u,l),e.$c[e.currentUser.toKey()]=c,t.next=9,Lh(s,o.changes);case 9:return t.next=11,Tc(s.remoteStore);case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),a=jc(t.t0,"Failed to persist write"),r.reject(a);case 17:case"end":return t.stop()}var e,u,l,c}),t,null,[[1,13]])})))).apply(this,arguments)}function mh(t,e){return yh.apply(this,arguments)}function yh(){return(yh=u(e(_).mark((function t(n,i){var r,s;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=rs(n),t.prev=1,t.next=4,kl(r.localStore,i);case 4:return s=t.sent,i.targetChanges.forEach((function(t,e){var n=r.Oc.get(e);n&&(is(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?n.Sc=!0:t.modifiedDocuments.size>0?is(n.Sc):t.removedDocuments.size>0&&(is(n.Sc),n.Sc=!1))})),t.next=8,Lh(r,s,i);case 8:t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(1),t.next=14,ul(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))).apply(this,arguments)}function bh(t,e,n){var i=rs(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){var r=[];i.Cc.forEach((function(t,n){var i=n.view.tc(e);i.snapshot&&r.push(i.snapshot)})),function(t,e){var n=rs(t);n.onlineState=e;var i=!1;n.queries.forEach((function(t,n){var r=!0,s=!1,o=void 0;try{for(var a,u=n.listeners[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){a.value.tc(e)&&(i=!0)}}catch(t){s=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(s)throw o}}})),i&&eh(n)}(i.eventManager,e),r.length&&i.Dc.To(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function wh(t,e,n){return kh.apply(this,arguments)}function kh(){return(kh=u(e(_).mark((function t(n,i,r){var s,o,a,u,l,c;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((s=rs(n)).sharedClientState.updateQueryState(i,"rejected",r),o=s.Oc.get(i),!(a=o&&o.key)){t.next=14;break}return u=(u=new Da(qs.comparator)).insert(a,uo.newNoDocument(a,ks.min())),l=za().add(a),c=new ja(ks.min(),new Map,new Oa(ys),u,l),t.next=9,mh(s,c);case 9:s.kc=s.kc.remove(a),s.Oc.delete(i),Oh(s),t.next=16;break;case 14:return t.next=16,Sl(s.localStore,i,!1).then((function(){return Ah(s,i,r)})).catch(ul);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Th(t,e){return Ih.apply(this,arguments)}function Ih(){return(Ih=u(e(_).mark((function t(n,i){var r,s,o;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=rs(n),s=i.batch.batchId,t.prev=1,t.next=4,bl(r.localStore,i);case 4:return o=t.sent,Ch(r,s,null),xh(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),t.next=10,Lh(r,o);case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(1),t.next=16,ul(t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}function Eh(t,e,n){return Sh.apply(this,arguments)}function Sh(){return(Sh=u(e(_).mark((function t(n,i,r){var s,o;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=rs(n),t.prev=1,t.next=4,function(t,e){var n=rs(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var i;return n.gs.lookupMutationBatch(t,e).next((function(e){return is(null!==e),i=e.keys(),n.gs.removeMutationBatch(t,e)})).next((function(){return n.gs.performConsistencyCheck(t)})).next((function(){return n.Us.Es(t,i)}))}))}(s.localStore,i);case 4:return o=t.sent,Ch(s,i,r),xh(s,i),s.sharedClientState.updateMutationState(i,"rejected",r),t.next=10,Lh(s,o);case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(1),t.next=16,ul(t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}function xh(t,e){(t.Fc.get(e)||[]).forEach((function(t){t.resolve()})),t.Fc.delete(e)}function Ch(t,e,n){var i=rs(t),r=i.$c[i.currentUser.toKey()];if(r){var s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.$c[i.currentUser.toKey()]=r}}function Ah(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.sharedClientState.removeLocalQueryTarget(e);var i=!0,r=!1,s=void 0;try{for(var o,a=t.Nc.get(e)[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var u=o.value;t.Cc.delete(u),n&&t.Dc.qc(u,n)}}catch(t){r=!0,s=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw s}}t.Nc.delete(e),t.isPrimaryClient&&t.Mc.si(e).forEach((function(e){t.Mc.containsKey(e)||Dh(t,e)}))}function Dh(t,e){t.xc.delete(e.path.canonicalString());var n=t.kc.get(e);null!==n&&(oc(t.remoteStore,n),t.kc=t.kc.remove(e),t.Oc.delete(n),Oh(t))}function Nh(t,e,n){var i=!0,r=!1,s=void 0;try{for(var o,a=n[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var u=o.value;u instanceof ih?(t.Mc.addReference(u.key,e),_h(t,u)):u instanceof rh?(Jr("SyncEngine","Document no longer in limbo: "+u.key),t.Mc.removeReference(u.key,e),t.Mc.containsKey(u.key)||Dh(t,u.key)):ns()}}catch(t){r=!0,s=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw s}}}function _h(t,e){var n=e.key,i=n.path.canonicalString();t.kc.get(n)||t.xc.has(i)||(Jr("SyncEngine","New document in limbo: "+n),t.xc.add(i),Oh(t))}function Oh(t){for(;t.xc.size>0&&t.kc.size<t.maxConcurrentLimboResolutions;){var e=t.xc.values().next().value;t.xc.delete(e);var n=new qs(xs.fromString(e)),i=t.Bc.next();t.Oc.set(i,new ah(n)),t.kc=t.kc.insert(n,i),sc(t.remoteStore,new tl(Uo(Oo(n.path)),i,2,vs.A))}}function Lh(t,e,n){return Mh.apply(this,arguments)}function Mh(){return(Mh=u(e(_).mark((function t(n,i,r){var s,o,a,l;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=rs(n),o=[],a=[],l=[],t.t0=s.Cc.isEmpty(),t.t0){t.next=9;break}return s.Cc.forEach((function(t,e){l.push(s.Uc(e,i,r).then((function(t){if(t){s.isPrimaryClient&&s.sharedClientState.updateQueryState(e.targetId,t.fromCache?"not-current":"current"),o.push(t);var n=dl.Ss(e.targetId,t);a.push(n)}})))})),t.next=6,Promise.all(l);case 6:return s.Dc.To(o),t.next=9,u(e(_).mark((function t(n,i){var r,s,o,a,u,l,c,h,f,d,g;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=rs(n),t.prev=1,t.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Yu.forEach(i,(function(e){return Yu.forEach(e.vs,(function(n){return r.persistence.referenceDelegate.addReference(t,e.targetId,n)})).next((function(){return Yu.forEach(e.Vs,(function(n){return r.persistence.referenceDelegate.removeReference(t,e.targetId,n)}))}))}))}));case 4:t.next=11;break;case 6:if(t.prev=6,t.t0=t.catch(1),$u(t.t0)){t.next=10;break}throw t.t0;case 10:Jr("LocalStore","Failed to update sequence numbers: "+t.t0);case 11:for(s=!0,o=!1,a=void 0,t.prev=12,u=i[Symbol.iterator]();!(s=(l=u.next()).done);s=!0)c=l.value,h=c.targetId,c.fromCache||(f=r.Ms.get(h),d=f.snapshotVersion,g=f.withLastLimboFreeSnapshotVersion(d),r.Ms=r.Ms.insert(h,g));t.next=20;break;case 16:t.prev=16,t.t1=t.catch(12),o=!0,a=t.t1;case 20:t.prev=20,t.prev=21,s||null==u.return||u.return();case 23:if(t.prev=23,!o){t.next=26;break}throw a;case 26:return t.finish(23);case 27:return t.finish(20);case 28:case"end":return t.stop()}}),t,null,[[1,6],[12,16,20,28],[21,,23,27]])})))(s.localStore,a);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Rh(t,e){return Ph.apply(this,arguments)}function Ph(){return(Ph=u(e(_).mark((function t(n,i){var r,s;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=rs(n)).currentUser.isEqual(i)){t.next=11;break}return Jr("SyncEngine","User change. New user:",i.toKey()),t.next=5,ml(r.localStore,i);case 5:return s=t.sent,r.currentUser=i,(e=r).Fc.forEach((function(t){t.forEach((function(t){t.reject(new os(ss.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Fc.clear(),r.sharedClientState.handleUserChange(i,s.removedBatchIds,s.addedBatchIds),t.next=11,Lh(r,s.qs);case 11:case"end":return t.stop()}var e}),t)})))).apply(this,arguments)}function Vh(t,e){var n=rs(t),i=n.Oc.get(e);if(i&&i.Sc)return za().add(i.key);var r=za(),s=n.Nc.get(e);if(!s)return r;var o=!0,a=!1,u=void 0;try{for(var l,c=s[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var h=l.value,f=n.Cc.get(h);r=r.unionWith(f.view.yc)}}catch(t){a=!0,u=t}finally{try{o||null==c.return||c.return()}finally{if(a)throw u}}return r}function Fh(t){var e=rs(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=mh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wh.bind(null,e),e.Dc.To=Zc.bind(null,e.eventManager),e.Dc.qc=th.bind(null,e.eventManager),e}function Uh(t){var e=rs(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Th.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Eh.bind(null,e),e}var zh=function(){"use strict";function t(){l(this,t),this.synchronizeTabs=!1}return v(t,[{key:"initialize",value:function(t){return u(e(_).mark((function n(){return e(_).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.O=Xl(t.databaseInfo.databaseId),this.sharedClientState=this.Gc(t),this.persistence=this.jc(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.Qc(t),this.localStore=this.Wc(t);case 7:case"end":return e.stop()}}),n,this)})).bind(this))()}},{key:"Qc",value:function(t){return null}},{key:"Wc",value:function(t){return pl(this.persistence,new gl,t.initialUser,this.O)}},{key:"jc",value:function(t){return new Pl(Fl.bi,this.O)}},{key:"Gc",value:function(t){return new zl}},{key:"terminate",value:function(){return u(e(_).mark((function t(){return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),t.next=3,this.sharedClientState.shutdown();case 3:return t.next=5,this.persistence.shutdown();case 5:case"end":return t.stop()}}),t,this)})).bind(this))()}}]),t}(),Bh=function(){"use strict";function t(){l(this,t)}return v(t,[{key:"initialize",value:function(t,n){var i=this;return u(e(_).mark((function r(){return e(_).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return bh(i.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Rh.bind(null,this.syncEngine),e.next=12,Fc(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),r,this)})).bind(this))()}},{key:"createEventManager",value:function(t){return new Wc}},{key:"createDatastore",value:function(t){var e,n,i,r=Xl(t.databaseInfo.databaseId),s=(e=t.databaseInfo,new Hl(e));return n=t.authCredentials,i=t.appCheckCredentials,new Jl(n,i,s,r)}},{key:"createRemoteStore",value:function(t){var e,n,i,r,s,o=this;return e=this.localStore,n=this.datastore,i=t.asyncQueue,r=function(t){return bh(o.syncEngine,t,0)},s=Gl.Vt()?new Gl:new Bl,new tc(e,n,i,r,s)}},{key:"createSyncEngine",value:function(t,e){return n=this.localStore,i=this.remoteStore,r=this.eventManager,s=this.sharedClientState,o=t.initialUser,a=t.maxConcurrentLimboResolutions,u=e,l=new uh(n,i,r,s,o,a),u&&(l.Lc=!0),l;var n,i,r,s,o,a,u,l}},{key:"terminate",value:function(){return u(e(_).mark((function t(n){var i;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=rs(n),Jr("RemoteStore","RemoteStore shutting down."),i.Ko.add(5),t.next=5,ic(i);case 5:i.jo.shutdown(),i.Qo.set("Unknown");case 7:case"end":return t.stop()}}),t)})))(this.remoteStore)}}]),t}();var Gh=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e){l(this,t),this.observer=e,this.muted=!1}return v(t,[{key:"next",value:function(t){this.observer.next&&this.Hc(this.observer.next,t)}},{key:"error",value:function(t){this.observer.error?this.Hc(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}},{key:"Jc",value:function(){this.muted=!0}},{key:"Hc",value:function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)}}]),t}(),jh=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(n,i,r,s){var o=this;l(this,t);var a,c=this;this.authCredentials=n,this.appCheckCredentials=i,this.asyncQueue=r,this.databaseInfo=s,this.user=Wr.UNAUTHENTICATED,this.clientId=ms.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,(a=u(e(_).mark((function t(n){return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Jr("FirestoreClient","Received user=",n.uid),t.next=3,c.authCredentialListener(n);case 3:c.user=n;case 4:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})),this.appCheckCredentials.start(r,(function(t){return Jr("FirestoreClient","Received new app check token=",t),o.appCheckCredentialListener(t,o.user)}))}return v(t,[{key:"getConfiguration",value:function(){return u(e(_).mark((function t(){return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return t.stop()}}),t,this)})).bind(this))()}},{key:"setCredentialChangeListener",value:function(t){this.authCredentialListener=t}},{key:"setAppCheckTokenChangeListener",value:function(t){this.appCheckCredentialListener=t}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new os(ss.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var t=this;this.asyncQueue.enterRestrictedMode();var n,i=new as;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((n=u(e(_).mark((function n(){var r;return e(_).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,e.t0=t.onlineComponents,!e.t0){e.next=5;break}return e.next=5,t.onlineComponents.terminate();case 5:if(e.t1=t.offlineComponents,!e.t1){e.next=9;break}return e.next=9,t.offlineComponents.terminate();case 9:t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),i.resolve(),e.next=18;break;case 14:e.prev=14,e.t2=e.catch(0),r=jc(e.t2,"Failed to shutdown persistence"),i.reject(r);case 18:case"end":return e.stop()}}),n,null,[[0,14]])}))),function(){return n.apply(this,arguments)})),i.promise}}]),t}();function qh(t,e){return Hh.apply(this,arguments)}function Hh(){return(Hh=u(e(_).mark((function t(n,i){var r,s;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.asyncQueue.verifyOperationInProgress(),Jr("FirestoreClient","Initializing OfflineComponentProvider"),t.next=3,n.getConfiguration();case 3:return r=t.sent,t.next=6,i.initialize(r);case 6:s=r.initialUser,n.setCredentialChangeListener(u(e(_).mark((function t(n){return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=s.isEqual(n),t.t0){t.next=5;break}return t.next=4,ml(i.localStore,n);case 4:s=n;case 5:case"end":return t.stop()}}),t)})))),i.persistence.setDatabaseDeletedListener((function(){return n.terminate()})),n.offlineComponents=i;case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Kh(t,e){return Xh.apply(this,arguments)}function Xh(){return(Xh=u(e(_).mark((function t(n,i){var r,s;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.asyncQueue.verifyOperationInProgress(),t.next=3,Wh(n);case 3:return r=t.sent,Jr("FirestoreClient","Initializing OnlineComponentProvider"),t.next=7,n.getConfiguration();case 7:return s=t.sent,t.next=10,i.initialize(r,s);case 10:n.setCredentialChangeListener((function(t){return Pc(i.remoteStore,t)})),n.setAppCheckTokenChangeListener((function(t,e){return Pc(i.remoteStore,e)})),n.onlineComponents=i;case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Wh(t){return Yh.apply(this,arguments)}function Yh(){return(Yh=u(e(_).mark((function t(n){return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n.offlineComponents,t.t0){t.next=5;break}return Jr("FirestoreClient","Using default OfflineComponentProvider"),t.next=5,qh(n,new zh);case 5:return t.abrupt("return",(t.t0||t.sent,n.offlineComponents));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function $h(t){return Qh.apply(this,arguments)}function Qh(){return(Qh=u(e(_).mark((function t(n){return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n.onlineComponents,t.t0){t.next=5;break}return Jr("FirestoreClient","Using default OnlineComponentProvider"),t.next=5,Kh(n,new Bh);case 5:return t.abrupt("return",(t.t0||t.sent,n.onlineComponents));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Jh(t){return $h(t).then((function(t){return t.syncEngine}))}function Zh(t){return tf.apply(this,arguments)}function tf(){return(tf=u(e(_).mark((function t(n){var i,r;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$h(n);case 2:return i=t.sent,r=i.eventManager,t.abrupt("return",(r.onListen=lh.bind(null,i.syncEngine),r.onUnlisten=dh.bind(null,i.syncEngine),r));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ef(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new as;return t.asyncQueue.enqueueAndForget(u(e(_).mark((function s(){return e(_).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=function(t,e,n,i,r){var s=new Gh({next:function(n){e.enqueueAndForget((function(){return Qc(t,o)})),n.fromCache&&"server"===i.source?r.reject(new os(ss.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:function(t){return r.reject(t)}}),o=new nh(n,s,{includeMetadataChanges:!0,uc:!0});return Yc(t,o)},e.next=3,Zh(t);case 3:return e.t1=e.sent,e.t2=t.asyncQueue,e.t3=n,e.t4=i,e.t5=r,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3,e.t4,e.t5));case 9:case"end":return e.stop()}}),s)})))),r.promise}var nf=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(t,e,n){if(!n)throw new os(ss.INVALID_ARGUMENT,"Function ".concat(t,"() cannot be called with an empty ").concat(e,"."))}function sf(t){if(!qs.isDocumentKey(t))throw new os(ss.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(t," has ").concat(t.length,"."))}function of(t){if(qs.isDocumentKey(t))throw new os(ss.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(t," has ").concat(t.length,"."))}function af(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t="".concat(t.substring(0,20),"...")),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=(n=t).constructor?n.constructor.name:null;return e?"a custom ".concat(e," object"):"an object"}var n;return"function"==typeof t?"a function":ns()}function uf(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new os(ss.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=af(t);throw new os(ss.INVALID_ARGUMENT,"Expected type '".concat(e.name,"', but it was: ").concat(n))}return t}function lf(t,e){if(e<=0)throw new os(ss.INVALID_ARGUMENT,"Function ".concat(t,"() requires a positive number, but it was: ").concat(e,"."))}var cf=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e){var n;if(l(this,t),void 0===e.host){if(void 0!==e.ssl)throw new os(ss.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new os(ss.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function(t,e,n,i){if(!0===e&&!0===i)throw new os(ss.INVALID_ARGUMENT,"".concat(t," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return v(t,[{key:"isEqual",value:function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}]),t}(),hf=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e,n,i){l(this,t),this._authCredentials=n,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cf({}),this._settingsFrozen=!1,e instanceof zs?this._databaseId=e:(this._app=e,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new os(ss.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zs(t.options.projectId)}(e))}return v(t,[{key:"app",get:function(){if(!this._app)throw new os(ss.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(t){if(this._settingsFrozen)throw new os(ss.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cf(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new ls;switch(t.type){case"gapi":var e=t.client;return is(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new fs(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new os(ss.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return t=this,(e=nf.get(t))&&(Jr("ComponentProvider","Removing Datastore"),nf.delete(t),e.terminate()),Promise.resolve();var t,e}}]),t}();var ff=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e,n,i){l(this,t),this.converter=n,this._key=i,this.type="document",this.firestore=e}return v(t,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new gf(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(e){return new t(this.firestore,e,this._key)}}]),t}(),df=function(){"use strict";function t(e,n,i){l(this,t),this.converter=n,this._query=i,this.type="query",this.firestore=e}return v(t,[{key:"withConverter",value:function(e){return new t(this.firestore,e,this._query)}}]),t}(),gf=function(t){"use strict";I(n,t);var e=N(n);function n(t,i,r){var s;return l(this,n),(s=e.call(this,t,i,Oo(r)))._path=r,s.type="collection",S(s)}return v(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var t=this._path.popLast();return t.isEmpty()?null:new ff(this.firestore,null,new qs(t))}},{key:"withConverter",value:function(t){return new n(this.firestore,t,this._path)}}]),n}(df);function vf(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(t=G(t),rf("collection","path",e),t instanceof hf){var s,o=(s=xs).fromString.apply(s,[e].concat(A(i)));return of(o),new gf(t,null,o)}var a;if(!(t instanceof ff||t instanceof gf))throw new os(ss.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var u=t._path.child((a=xs).fromString.apply(a,[e].concat(A(i))));return of(u),new gf(t.firestore,null,u)}var pf=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(){var e=this;l(this,t),this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new Wl(this,"async_queue_retry"),this.yu=function(){var t=Kl();t&&Jr("AsyncQueue","Visibility state changed to "+t.visibilityState),e.ro.Yr()};var n=Kl();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.yu)}return v(t,[{key:"isShuttingDown",get:function(){return this.fu}},{key:"enqueueAndForget",value:function(t){this.enqueue(t)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(t){this.pu(),this.Iu(t)}},{key:"enterRestrictedMode",value:function(t){if(!this.fu){this.fu=!0,this.mu=t||!1;var e=Kl();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.yu)}}},{key:"enqueue",value:function(t){var e=this;if(this.pu(),this.fu)return new Promise((function(){}));var n=new as;return this.Iu((function(){return e.fu&&e.mu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(t){var e=this;this.enqueueAndForget((function(){return e.lu.push(t),e.Eu()}))}},{key:"Eu",value:function(){var t=this;return u(e(_).mark((function n(){return e(_).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.lu.length){e.next=14;break}return e.prev=1,e.next=4,this.lu[0]();case 4:this.lu.shift(),this.ro.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),$u(e.t0)){e.next=12;break}throw e.t0;case 12:Jr("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.lu.length>0&&this.ro.Hr((function(){return t.Eu()}));case 14:case"end":return e.stop()}}),n,this,[[1,8]])})).bind(this))()}},{key:"Iu",value:function(t){var e=this,n=this.hu.then((function(){return e.wu=!0,t().catch((function(t){var n,i;throw e._u=t,e.wu=!1,Zr("INTERNAL UNHANDLED ERROR: ",(i=(n=t).message||"",n.stack&&(i=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),i)),t})).then((function(t){return e.wu=!1,t}))}));return this.hu=n,n}},{key:"enqueueAfterDelay",value:function(t,e,n){var i=this;this.pu(),this.gu.indexOf(t)>-1&&(e=0);var r=Gc.createAndSchedule(this,t,e,n,(function(t){return i.Tu(t)}));return this.du.push(r),r}},{key:"pu",value:function(){this._u&&ns()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Au",value:function(){return u(e(_).mark((function t(){var n;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case 1:return n=this.hu,t.next=4,n;case 4:if(n!==this.hu){t.next=1;break}case 5:case"end":return t.stop()}}),t,this)})).bind(this))()}},{key:"Ru",value:function(t){var e=!0,n=!1,i=void 0;try{for(var r,s=this.du[Symbol.iterator]();!(e=(r=s.next()).done);e=!0){if(r.value.timerId===t)return!0}}catch(t){n=!0,i=t}finally{try{e||null==s.return||s.return()}finally{if(n)throw i}}return!1}},{key:"Pu",value:function(t){var e=this;return this.Au().then((function(){e.du.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));var n=!0,i=!1,r=void 0;try{for(var s,o=e.du[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var a=s.value;if(a.skipDelay(),"all"!==t&&a.timerId===t)break}}catch(t){i=!0,r=t}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return e.Au()}))}},{key:"bu",value:function(t){this.gu.push(t)}},{key:"Tu",value:function(t){var e=this.du.indexOf(t);this.du.splice(e,1)}}]),t}();var mf=function(t){"use strict";I(n,t);var e=N(n);function n(t,i,r){var s;return l(this,n),(s=e.call(this,t,i,r)).type="firestore",s._queue=new pf,s._persistenceKey="name"in t?t.name:"[DEFAULT]",S(s)}return v(n,[{key:"_terminate",value:function(){return this._firestoreClient||bf(this),this._firestoreClient.terminate()}}]),n}(hf);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(t){return t._firestoreClient||bf(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function bf(t){var e,n,i,r,s,o=t._freezeSettings(),a=(n=t._databaseId,i=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",r=t._persistenceKey,new Us(n,i,r,(s=o).host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,s.useFetchStreams));t._firestoreClient=new jh(t._authCredentials,t._appCheckCredentials,t._queue,a)}var wf=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];l(this,t);for(var r=0;r<n.length;++r)if(0===n[r].length)throw new os(ss.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new As(n)}return v(t,[{key:"isEqual",value:function(t){return this._internalPath.isEqual(t._internalPath)}}]),t}();var kf=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e){l(this,t),this._byteString=e}return v(t,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(t){return this._byteString.isEqual(t._byteString)}}],[{key:"fromBase64String",value:function(e){try{return new t(_s.fromBase64String(e))}catch(t){throw new os(ss.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(e){return new t(_s.fromUint8Array(e))}}]),t}(),Tf=function t(e){"use strict";l(this,t),this._methodName=e},If=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e,n){if(l(this,t),!isFinite(e)||e<-90||e>90)throw new os(ss.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new os(ss.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}return v(t,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(t){return this._lat===t._lat&&this._long===t._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(t){return ys(this._lat,t._lat)||ys(this._long,t._long)}}]),t}(),Ef=/^__.*__$/,Sf=function(){"use strict";function t(e,n,i){l(this,t),this.data=e,this.fieldMask=n,this.fieldTransforms=i}return v(t,[{key:"toMutation",value:function(t,e){return null!==this.fieldMask?new ya(t,this.data,this.fieldMask,e,this.fieldTransforms):new ma(t,this.data,e,this.fieldTransforms)}}]),t}();function xf(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ns()}}var Cf=function(){"use strict";function t(e,n,i,r,s,o){l(this,t),this.settings=e,this.databaseId=n,this.O=i,this.ignoreUndefinedProperties=r,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}return v(t,[{key:"path",get:function(){return this.settings.path}},{key:"Vu",get:function(){return this.settings.Vu}},{key:"Su",value:function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Du",value:function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Su({path:n,Cu:!1});return i.Nu(t),i}},{key:"xu",value:function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Su({path:n,Cu:!1});return i.vu(),i}},{key:"ku",value:function(t){return this.Su({path:void 0,Cu:!0})}},{key:"Ou",value:function(t){return Uf(t,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}},{key:"contains",value:function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))}},{key:"vu",value:function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Nu(this.path.get(t))}},{key:"Nu",value:function(t){if(0===t.length)throw this.Ou("Document fields must not be empty");if(xf(this.Vu)&&Ef.test(t))throw this.Ou('Document fields cannot begin and end with "__"')}}]),t}(),Af=function(){"use strict";function t(e,n,i){l(this,t),this.databaseId=e,this.ignoreUndefinedProperties=n,this.O=i||Xl(e)}return v(t,[{key:"Fu",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Cf({Vu:t,methodName:e,$u:n,path:As.emptyPath(),Cu:!1,Mu:i},this.databaseId,this.O,this.ignoreUndefinedProperties)}}]),t}();function Df(t){var e=t._freezeSettings(),n=Xl(t._databaseId);return new Af(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Nf(t,e,n,i,r){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=t.Fu(s.merge||s.mergeFields?2:0,e,n,r);Rf("Data must be an object, but it was:",o,i);var a,u,l=Lf(i,o);if(s.merge)a=new Ds(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){var c=[],h=!0,f=!1,d=void 0;try{for(var g,v=s.mergeFields[Symbol.iterator]();!(h=(g=v.next()).done);h=!0){var p=g.value,m=Pf(e,p,n);if(!o.contains(m))throw new os(ss.INVALID_ARGUMENT,"Field '".concat(m,"' is specified in your field mask but missing from your input data."));zf(c,m)||c.push(m)}}catch(t){f=!0,d=t}finally{try{h||null==v.return||v.return()}finally{if(f)throw d}}a=new Ds(c),u=o.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,u=o.fieldTransforms;return new Sf(new oo(l),a,u)}function _f(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Of(n,t.Fu(i?4:3,e))}function Of(t,e){if(Mf(t=G(t)))return Rf("Unsupported field value:",e,t),Lf(t,e);if(t instanceof Tf)return function(t,e){if(!xf(e.Vu))throw e.Ou("".concat(t._methodName,"() can only be used with update() and set()"));if(!e.path)throw e.Ou("".concat(t._methodName,"() is not currently supported inside arrays"));var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Cu&&4!==e.Vu)throw e.Ou("Nested arrays are not supported");return function(t,e){var n=[],i=0,r=!0,s=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=Of(a.value,e.ku(i));null==l&&(l={nullValue:"NULL_VALUE"}),n.push(l),i++}}catch(t){s=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(s)throw o}}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=G(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Yo(e.O,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=ws.fromDate(t);return{timestampValue:eu(e.O,n)}}if(t instanceof ws){var i=new ws(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:eu(e.O,i)}}if(t instanceof If)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof kf)return{bytesValue:nu(e.O,t._byteString)};if(t instanceof ff){var r=e.databaseId,s=t.firestore._databaseId;if(!s.isEqual(r))throw e.Ou("Document reference is for database ".concat(s.projectId,"/").concat(s.database," but should be for database ").concat(r.projectId,"/").concat(r.database));return{referenceValue:su(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Ou("Unsupported field value: ".concat(af(t)))}(t,e)}function Lf(t,e){var n={};return Es(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Is(t,(function(t,i){var r=Of(i,e.Du(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}function Mf(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ws||t instanceof If||t instanceof kf||t instanceof ff||t instanceof Tf)}function Rf(t,e,n){if(!Mf(n)||("object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))){var i=af(n);throw"an object"===i?e.Ou(t+" a custom object"):e.Ou(t+" "+i)}var r}function Pf(t,e,n){if((e=G(e))instanceof wf)return e._internalPath;if("string"==typeof e)return Ff(t,e);throw Uf("Field path arguments must be of type string or ",t,!1,void 0,n)}var Vf=new RegExp("[~\\*/\\[\\]]");function Ff(t,e,n){if(e.search(Vf)>=0)throw Uf("Invalid field path (".concat(e,"). Paths must not contain '~', '*', '/', '[', or ']'"),t,!1,void 0,n);try{return f(wf,A(e.split(".")))._internalPath}catch(i){throw Uf("Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),t,!1,void 0,n)}}function Uf(t,e,n,i,r){var s=i&&!i.isEmpty(),o=void 0!==r,a="Function ".concat(e,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";var u="";return(s||o)&&(u+=" (found",s&&(u+=" in field ".concat(i)),o&&(u+=" in document ".concat(r)),u+=")"),new os(ss.INVALID_ARGUMENT,a+t+u)}function zf(t,e){return t.some((function(t){return t.isEqual(e)}))}var Bf=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e,n,i,r,s){l(this,t),this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}return v(t,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new ff(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var t=new Gf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(t){if(this._document){var e=this._document.data.field(jf("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}]),t}(),Gf=function(t){"use strict";I(n,t);var e=N(n);function n(){return l(this,n),e.apply(this,arguments)}return v(n,[{key:"data",value:function(){return w(y(n.prototype),"data",this).call(this)}}]),n}(Bf);function jf(t,e){return"string"==typeof e?Ff(t,e):e instanceof wf?e._internalPath:e._delegate._internalPath}var qf=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(e,n){l(this,t),this.hasPendingWrites=e,this.fromCache=n}return v(t,[{key:"isEqual",value:function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}]),t}(),Hf=function(t){"use strict";I(n,t);var e=N(n);function n(t,i,r,s,o,a){var u;return l(this,n),(u=e.call(this,t,i,r,s,a))._firestore=t,u._firestoreImpl=t,u.metadata=o,S(u)}return v(n,[{key:"exists",value:function(){return w(y(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var e=new Kf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(jf("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}]),n}(Bf),Kf=function(t){"use strict";I(n,t);var e=N(n);function n(){return l(this,n),e.apply(this,arguments)}return v(n,[{key:"data",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return w(y(n.prototype),"data",this).call(this,t)}}]),n}(Hf),Xf=function(){"use strict";function t(e,n,i,r){l(this,t),this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new qf(r.hasPendingWrites,r.fromCache),this.query=i}return v(t,[{key:"docs",get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(t,e){var n=this;this._snapshot.docs.forEach((function(i){t.call(e,new Kf(n._firestore,n._userDataWriter,i.key,i,new qf(n._snapshot.mutatedKeys.has(i.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new os(ss.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new Kf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new qf(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var i=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Kf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new qf(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),r=-1,s=-1;return 0!==e.type&&(r=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(s=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:Wf(e.type),doc:n,oldIndex:r,newIndex:s}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),t}();function Wf(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ns()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Yf(t){if(Mo(t)&&0===t.explicitOrderBy.length)throw new os(ss.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var $f=function t(){"use strict";l(this,t)};function Qf(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=!0,s=!1,o=void 0;try{for(var a,u=n[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=a.value;t=l._apply(t)}}catch(t){s=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(s)throw o}}return t}var Jf=function(t){"use strict";I(n,t);var e=N(n);function n(t,i){var r;return l(this,n),(r=e.call(this)).Uu=t,r.Gu=i,r.type="orderBy",S(r)}return v(n,[{key:"_apply",value:function(t){var e,n,i,r=function(t,e,n){if(null!==t.startAt)throw new os(ss.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new os(ss.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var i=new xo(e,n);return function(t,e){if(null===Ro(t)){var n=Po(t);null!==n&&sd(t,n,e.field)}}(t,i),i}(t._query,this.Uu,this.Gu);return new df(t.firestore,t.converter,(e=t._query,n=r,i=e.explicitOrderBy.concat([n]),new No(e.path,e.collectionGroup,i,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)))}}]),n}($f);function Zf(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=e,i=jf("orderBy",t);return new Jf(i,n)}var td=function(t){"use strict";I(n,t);var e=N(n);function n(t,i,r){var s;return l(this,n),(s=e.call(this)).type=t,s.ju=i,s.Qu=r,S(s)}return v(n,[{key:"_apply",value:function(t){return new df(t.firestore,t.converter,zo(t._query,this.ju,this.Qu))}}]),n}($f);function ed(t){return lf("limit",t),new td("limit",t,"F")}var nd=function(t){"use strict";I(n,t);var e=N(n);function n(t,i,r){var s;return l(this,n),(s=e.call(this)).type=t,s.Wu=i,s.zu=r,S(s)}return v(n,[{key:"_apply",value:function(t){var e,n,i=rd(t,this.type,this.Wu,this.zu);return new df(t.firestore,t.converter,(e=t._query,n=i,new No(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,n,e.endAt)))}}]),n}($f);function id(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new nd("startAfter",e,!1)}function rd(t,e,n,i){if(n[0]=G(n[0]),n[0]instanceof Bf)return function(t,e,n,i,r){if(!i)throw new os(ss.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var s=[],o=!0,a=!1,u=void 0;try{for(var l,c=Fo(t)[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var h=l.value;if(h.field.isKeyField())s.push(Zs(e,i.key));else{var f=i.data.field(h.field);if(Ps(f))throw new os(ss.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===f){var d=h.field.canonicalString();throw new os(ss.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(d,"' (used as the orderBy) does not exist."))}s.push(f)}}}catch(t){a=!0,u=t}finally{try{o||null==c.return||c.return()}finally{if(a)throw u}}return new So(s,r)}(t._query,t.firestore._databaseId,e,n[0]._document,i);var r=Df(t.firestore);return function(t,e,n,i,r,s){var o=t.explicitOrderBy;if(r.length>o.length)throw new os(ss.INVALID_ARGUMENT,"Too many arguments provided to ".concat(i,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var a=[],u=0;u<r.length;u++){var l=r[u];if(o[u].field.isKeyField()){if("string"!=typeof l)throw new os(ss.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(i,"(), but got a ").concat(void 0===l?"undefined":E(l)));if(!Vo(t)&&-1!==l.indexOf("/"))throw new os(ss.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(i,"() must be a plain document ID, but '").concat(l,"' contains a slash."));var c=t.path.child(xs.fromString(l));if(!qs.isDocumentKey(c))throw new os(ss.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(i,"() must result in a valid document path, but '").concat(c,"' is not because it contains an odd number of segments."));var h=new qs(c);a.push(Zs(e,h))}else{var f=_f(n,i,l);a.push(f)}}return new So(a,s)}(t._query,t.firestore._databaseId,r,e,n,i)}function sd(t,e,n){if(!n.isEqual(e))throw new os(ss.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(e.toString(),"' and so you must also use '").concat(e.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var od=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){"use strict";function t(){l(this,t)}return v(t,[{key:"convertValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ks(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ms(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Rs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw ns()}}},{key:"convertObject",value:function(t,e){var n=this,i={};return Is(t.fields,(function(t,r){i[t]=n.convertValue(r,e)})),i}},{key:"convertGeoPoint",value:function(t){return new If(Ms(t.latitude),Ms(t.longitude))}},{key:"convertArray",value:function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))}},{key:"convertServerTimestamp",value:function(t,e){switch(e){case"previous":var n=Vs(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Fs(t));default:return null}}},{key:"convertTimestamp",value:function(t){var e=Ls(t);return new ws(e.seconds,e.nanos)}},{key:"convertDocumentKey",value:function(t,e){var n=xs.fromString(t);is(Eu(n));var i=new zs(n.get(1),n.get(3)),r=new qs(n.popFirst(5));return i.isEqual(e)||Zr("Document ".concat(r," contains a document reference within a different database (").concat(i.projectId,"/").concat(i.database,") which is not supported. It will be treated as a reference in the current database (").concat(e.projectId,"/").concat(e.database,") instead.")),r}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var ud=function(t){"use strict";I(n,t);var e=N(n);function n(t){var i;return l(this,n),(i=e.call(this)).firestore=t,S(i)}return v(n,[{key:"convertBytes",value:function(t){return new kf(t)}},{key:"convertReference",value:function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new ff(this.firestore,null,e)}}]),n}(od);function ld(t){t=uf(t,df);var e=uf(t.firestore,mf),n=yf(e),i=new ud(e);return Yf(t._query),ef(n,t._query).then((function(n){return new Xf(e,i,t,n)}))}function cd(t,e){var n=uf(t.firestore,mf),i=function(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(t=G(t),1===arguments.length&&(e=ms.R()),rf("doc","path",e),t instanceof hf){var s,o=(s=xs).fromString.apply(s,[e].concat(A(i)));return sf(o),new ff(t,null,new qs(o))}var a;if(!(t instanceof ff||t instanceof gf))throw new os(ss.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var u=t._path.child((a=xs).fromString.apply(a,[e].concat(A(i))));return sf(u),new ff(t.firestore,t instanceof gf?t.converter:null,new qs(u))}(t),r=ad(t.converter,e);return hd(n,[Nf(Df(t.firestore),"addDoc",i._key,r,null!==t.converter,{}).toMutation(i._key,la.exists(!1))]).then((function(){return i}))}function hd(t,n){return i=yf(t),r=n,s=new as,i.asyncQueue.enqueueAndForget(u(e(_).mark((function t(){return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=vh,t.next=3,Jh(i);case 3:return t.t1=t.sent,t.t2=r,t.t3=s,t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t3));case 7:case"end":return t.stop()}}),t)})))),s.promise;var i,r,s}!function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Yr="9.6.7",ht(new j("firestore",(function(t,n){var i=n.options,r=t.getProvider("app").getImmediate(),s=new mf(r,new cs(t.getProvider("auth-internal")),new gs(t.getProvider("app-check-internal")));return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s}),"PUBLIC")),yt(Xr,"3.4.5",t),yt(Xr,"3.4.5","esm2017")}();
/*!
 * lightgallery | 2.4.0 | January 29th 2022
 * http://www.lightgalleryjs.com/
 * Copyright (c) 2020 Sachin Neravath;
 * @license GPLv3
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var fd=function(){return fd=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},fd.apply(this,arguments)};var dd="lgAfterAppendSlide",gd="lgInit",vd="lgHasVideo",pd="lgContainerResize",md="lgUpdateSlides",yd="lgAfterAppendSubHtml",bd="lgBeforeOpen",wd="lgAfterOpen",kd="lgSlideItemLoad",Td="lgBeforeSlide",Id="lgAfterSlide",Ed="lgPosterClick",Sd="lgDragStart",xd="lgDragMove",Cd="lgDragEnd",Ad="lgBeforeNextSlide",Dd="lgBeforePrevSlide",Nd="lgBeforeClose",_d="lgAfterClose",Od={mode:"lg-slide",easing:"ease",speed:400,licenseKey:"0000-0000-000-0000",height:"100%",width:"100%",addClass:"",startClass:"lg-start-zoom",backdropDuration:300,container:"",startAnimationDuration:400,zoomFromOrigin:!0,hideBarsDelay:0,showBarsAfter:1e4,slideDelay:0,supportLegacyBrowser:!0,allowMediaOverlap:!1,videoMaxSize:"1280-720",loadYouTubePoster:!0,defaultCaptionHeight:0,ariaLabelledby:"",ariaDescribedby:"",closable:!0,swipeToClose:!0,closeOnTap:!0,showCloseIcon:!0,showMaximizeIcon:!1,loop:!0,escKey:!0,keyPress:!0,controls:!0,slideEndAnimation:!0,hideControlOnEnd:!1,mousewheel:!1,getCaptionFromTitleOrAlt:!0,appendSubHtmlTo:".lg-sub-html",subHtmlSelectorRelative:!1,preload:2,numberOfSlideItemsInDom:10,selector:"",selectWithin:"",nextHtml:"",prevHtml:"",index:0,iframeWidth:"100%",iframeHeight:"100%",iframeMaxWidth:"100%",iframeMaxHeight:"100%",download:!0,counter:!0,appendCounterTo:".lg-toolbar",swipeThreshold:50,enableSwipe:!0,enableDrag:!0,dynamic:!1,dynamicEl:[],extraProps:[],exThumbImage:"",isMobile:void 0,mobileSettings:{controls:!1,showCloseIcon:!1,download:!1},plugins:[],strings:{closeGallery:"Close gallery",toggleMaximize:"Toggle maximize",previousSlide:"Previous slide",nextSlide:"Next slide",download:"Download",playVideo:"Play video"}};var Ld=function(){function t(t){return this.cssVenderPrefixes=["TransitionDuration","TransitionTimingFunction","Transform","Transition"],this.selector=this._getSelector(t),this.firstElement=this._getFirstEl(),this}return t.generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))},t.prototype._getSelector=function(t,e){return void 0===e&&(e=document),"string"!=typeof t?t:(e=e||document,"#"===t.substring(0,1)?e.querySelector(t):e.querySelectorAll(t))},t.prototype._each=function(t){return this.selector?(void 0!==this.selector.length?[].forEach.call(this.selector,t):t(this.selector,0),this):this},t.prototype._setCssVendorPrefix=function(t,e,n){var i=e.replace(/-([a-z])/gi,(function(t,e){return e.toUpperCase()}));-1!==this.cssVenderPrefixes.indexOf(i)?(t.style[i.charAt(0).toLowerCase()+i.slice(1)]=n,t.style["webkit"+i]=n,t.style["moz"+i]=n,t.style["ms"+i]=n,t.style["o"+i]=n):t.style[i]=n},t.prototype._getFirstEl=function(){return this.selector&&void 0!==this.selector.length?this.selector[0]:this.selector},t.prototype.isEventMatched=function(t,e){var n=e.split(".");return t.split(".").filter((function(t){return t})).every((function(t){return-1!==n.indexOf(t)}))},t.prototype.attr=function(t,e){return void 0===e?this.firstElement?this.firstElement.getAttribute(t):"":(this._each((function(n){n.setAttribute(t,e)})),this)},t.prototype.find=function(t){return Md(this._getSelector(t,this.selector))},t.prototype.first=function(){return this.selector&&void 0!==this.selector.length?Md(this.selector[0]):Md(this.selector)},t.prototype.eq=function(t){return Md(this.selector[t])},t.prototype.parent=function(){return Md(this.selector.parentElement)},t.prototype.get=function(){return this._getFirstEl()},t.prototype.removeAttr=function(t){var e=t.split(" ");return this._each((function(t){e.forEach((function(e){return t.removeAttribute(e)}))})),this},t.prototype.wrap=function(t){if(!this.firstElement)return this;var e=document.createElement("div");return e.className=t,this.firstElement.parentNode.insertBefore(e,this.firstElement),this.firstElement.parentNode.removeChild(this.firstElement),e.appendChild(this.firstElement),this},t.prototype.addClass=function(t){return void 0===t&&(t=""),this._each((function(e){t.split(" ").forEach((function(t){t&&e.classList.add(t)}))})),this},t.prototype.removeClass=function(t){return this._each((function(e){t.split(" ").forEach((function(t){t&&e.classList.remove(t)}))})),this},t.prototype.hasClass=function(t){return!!this.firstElement&&this.firstElement.classList.contains(t)},t.prototype.hasAttribute=function(t){return!!this.firstElement&&this.firstElement.hasAttribute(t)},t.prototype.toggleClass=function(t){return this.firstElement?(this.hasClass(t)?this.removeClass(t):this.addClass(t),this):this},t.prototype.css=function(t,e){var n=this;return this._each((function(i){n._setCssVendorPrefix(i,t,e)})),this},t.prototype.on=function(e,n){var i=this;return this.selector?(e.split(" ").forEach((function(e){Array.isArray(t.eventListeners[e])||(t.eventListeners[e]=[]),t.eventListeners[e].push(n),i.selector.addEventListener(e.split(".")[0],n)})),this):this},t.prototype.once=function(t,e){var n=this;return this.on(t,(function(){n.off(t),e(t)})),this},t.prototype.off=function(e){var n=this;return this.selector?(Object.keys(t.eventListeners).forEach((function(i){n.isEventMatched(e,i)&&(t.eventListeners[i].forEach((function(t){n.selector.removeEventListener(i.split(".")[0],t)})),t.eventListeners[i]=[])})),this):this},t.prototype.trigger=function(t,e){if(!this.firstElement)return this;var n=new CustomEvent(t.split(".")[0],{detail:e||null});return this.firstElement.dispatchEvent(n),this},t.prototype.load=function(t){var e=this;return fetch(t).then((function(t){return t.text()})).then((function(t){e.selector.innerHTML=t})),this},t.prototype.html=function(t){return void 0===t?this.firstElement?this.firstElement.innerHTML:"":(this._each((function(e){e.innerHTML=t})),this)},t.prototype.append=function(t){return this._each((function(e){"string"==typeof t?e.insertAdjacentHTML("beforeend",t):e.appendChild(t)})),this},t.prototype.prepend=function(t){return this._each((function(e){e.insertAdjacentHTML("afterbegin",t)})),this},t.prototype.remove=function(){return this._each((function(t){t.parentNode.removeChild(t)})),this},t.prototype.empty=function(){return this._each((function(t){t.innerHTML=""})),this},t.prototype.scrollTop=function(t){return void 0!==t?(document.body.scrollTop=t,document.documentElement.scrollTop=t,this):window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},t.prototype.scrollLeft=function(t){return void 0!==t?(document.body.scrollLeft=t,document.documentElement.scrollLeft=t,this):window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},t.prototype.offset=function(){if(!this.firstElement)return{left:0,top:0};var t=this.firstElement.getBoundingClientRect(),e=Md("body").style().marginLeft;return{left:t.left-parseFloat(e)+this.scrollLeft(),top:t.top+this.scrollTop()}},t.prototype.style=function(){return this.firstElement?this.firstElement.currentStyle||window.getComputedStyle(this.firstElement):{}},t.prototype.width=function(){var t=this.style();return this.firstElement.clientWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)},t.prototype.height=function(){var t=this.style();return this.firstElement.clientHeight-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom)},t.eventListeners={},t}();function Md(t){return function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:null};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}}(),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),new Ld(t)}var Rd=["src","sources","subHtml","subHtmlUrl","html","video","poster","slideName","responsive","srcset","sizes","iframe","downloadUrl","download","width","facebookShareUrl","tweetText","iframeTitle","twitterShareUrl","pinterestShareUrl","pinterestText","fbHtml","disqusIdentifier","disqusUrl"];function Pd(t){return"href"===t?"src":t=(t=(t=t.replace("data-","")).charAt(0).toLowerCase()+t.slice(1)).replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))}var Vd=function(t,e,n,i){void 0===n&&(n=0);var r=Md(t).attr("data-lg-size")||i;if(r){var s=r.split(",");if(s[1])for(var o=window.innerWidth,a=0;a<s.length;a++){var u=s[a];if(parseInt(u.split("-")[2],10)>o){r=u;break}a===s.length-1&&(r=u)}var l=r.split("-"),c=parseInt(l[0],10),h=parseInt(l[1],10),f=e.width(),d=e.height()-n,g=Math.min(f,c),v=Math.min(d,h),p=Math.min(g/c,v/h);return{width:c*p,height:h*p}}},Fd=function(t,e,n,i,r){if(r){var s=Md(t).find("img").first();if(s.get()){var o=e.get().getBoundingClientRect(),a=o.width,u=e.height()-(n+i),l=s.width(),c=s.height(),h=s.style(),f=(a-l)/2-s.offset().left+(parseFloat(h.paddingLeft)||0)+(parseFloat(h.borderLeft)||0)+Md(window).scrollLeft()+o.left,d=(u-c)/2-s.offset().top+(parseFloat(h.paddingTop)||0)+(parseFloat(h.borderTop)||0)+Md(window).scrollTop()+n;return"translate3d("+(f*=-1)+"px, "+(d*=-1)+"px, 0) scale3d("+l/r.width+", "+c/r.height+", 1)"}}},Ud=function(t,e,n,i,r,s){return'<div class="lg-video-cont lg-has-iframe" style="width:'+t+"; max-width:"+n+"; height: "+e+"; max-height:"+i+'">\n                    <iframe class="lg-object" frameborder="0" '+(s?'title="'+s+'"':"")+' src="'+r+'"  allowfullscreen="true"></iframe>\n                </div>'},zd=function(t,e,n,i,r,s){var o="<img "+n+" "+(i?'srcset="'+i+'"':"")+"  "+(r?'sizes="'+r+'"':"")+' class="lg-object lg-image" data-index="'+t+'" src="'+e+'" />',a="";s&&(a=("string"==typeof s?JSON.parse(s):s).map((function(t){var e="";return Object.keys(t).forEach((function(n){e+=" "+n+'="'+t[n]+'"'})),"<source "+e+"></source>"})));return""+a+o},Bd=function(t){for(var e=[],n=[],i="",r=0;r<t.length;r++){var s=t[r].split(" ");""===s[0]&&s.splice(0,1),n.push(s[0]),e.push(s[1])}for(var o=window.innerWidth,a=0;a<e.length;a++)if(parseInt(e[a],10)>o){i=n[a];break}return i},Gd=function(t){return!!t&&(!!t.complete&&0!==t.naturalWidth)},jd=function(t,e,n,i,r){return'<div class="lg-video-cont '+(r&&r.youtube?"lg-has-youtube":r&&r.vimeo?"lg-has-vimeo":"lg-has-html5")+'" style="'+n+'">\n                <div class="lg-video-play-button">\n                <svg\n                    viewBox="0 0 20 20"\n                    preserveAspectRatio="xMidYMid"\n                    focusable="false"\n                    aria-labelledby="'+i+'"\n                    role="img"\n                    class="lg-video-play-icon"\n                >\n                    <title>'+i+'</title>\n                    <polygon class="lg-video-play-icon-inner" points="1,0 20,10 1,20"></polygon>\n                </svg>\n                <svg class="lg-video-play-icon-bg" viewBox="0 0 50 50" focusable="false">\n                    <circle cx="50%" cy="50%" r="20"></circle></svg>\n                <svg class="lg-video-play-icon-circle" viewBox="0 0 50 50" focusable="false">\n                    <circle cx="50%" cy="50%" r="20"></circle>\n                </svg>\n            </div>\n            '+(e||"")+'\n            <img class="lg-object lg-video-poster" src="'+t+'" />\n        </div>'},qd=function(t,e,n,i){var r=[],s=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,r++)i[r]=s[o];return i}(Rd,e);return[].forEach.call(t,(function(t){for(var e={},o=0;o<t.attributes.length;o++){var a=t.attributes[o];if(a.specified){var u=Pd(a.name),l="";s.indexOf(u)>-1&&(l=u),l&&(e[l]=a.value)}}var c=Md(t),h=c.find("img").first().attr("alt"),f=c.attr("title"),d=i?c.attr(i):c.find("img").first().attr("src");e.thumb=d,n&&!e.subHtml&&(e.subHtml=f||h||""),e.alt=h||f||"",r.push(e)})),r},Hd=function(){return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)},Kd=function(t,e,n){if(!t)return e?{html5:!0}:void console.error("lightGallery :- data-src is not provided on slide item "+(n+1)+". Please make sure the selector property is properly configured. More info - https://www.lightgalleryjs.com/demos/html-markup/");var i=t.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com|be-nocookie\.com)\/(?:watch\?v=|embed\/)?([a-z0-9\-\_\%]+)([\&|?][\S]*)*/i),r=t.match(/\/\/(?:www\.)?(?:player\.)?vimeo.com\/(?:video\/)?([0-9a-z\-_]+)(.*)?/i),s=t.match(/https?:\/\/(.+)?(wistia\.com|wi\.st)\/(medias|embed)\/([0-9a-z\-_]+)(.*)/);return i?{youtube:i}:r?{vimeo:r}:s?{wistia:s}:void 0},Xd=0,Wd=function(){function t(t,e){if(this.lgOpened=!1,this.index=0,this.plugins=[],this.lGalleryOn=!1,this.lgBusy=!1,this.currentItemsInDom=[],this.prevScrollTop=0,this.isDummyImageRemoved=!1,this.dragOrSwipeEnabled=!1,this.mediaContainerPosition={top:0,bottom:0},!t)return this;if(Xd++,this.lgId=Xd,this.el=t,this.LGel=Md(t),this.generateSettings(e),this.buildModules(),this.settings.dynamic&&void 0!==this.settings.dynamicEl&&!Array.isArray(this.settings.dynamicEl))throw"When using dynamic mode, you must also define dynamicEl as an Array.";return this.galleryItems=this.getItems(),this.normalizeSettings(),this.init(),this.validateLicense(),this}return t.prototype.generateSettings=function(t){if(this.settings=fd(fd({},Od),t),this.settings.isMobile&&"function"==typeof this.settings.isMobile?this.settings.isMobile():Hd()){var e=fd(fd({},this.settings.mobileSettings),this.settings.mobileSettings);this.settings=fd(fd({},this.settings),e)}},t.prototype.normalizeSettings=function(){this.settings.slideEndAnimation&&(this.settings.hideControlOnEnd=!1),this.settings.closable||(this.settings.swipeToClose=!1),this.zoomFromOrigin=this.settings.zoomFromOrigin,this.settings.dynamic&&(this.zoomFromOrigin=!1),this.settings.container||(this.settings.container=document.body),this.settings.preload=Math.min(this.settings.preload,this.galleryItems.length)},t.prototype.init=function(){var t=this;this.addSlideVideoInfo(this.galleryItems),this.buildStructure(),this.LGel.trigger(gd,{instance:this}),this.settings.keyPress&&this.keyPress(),setTimeout((function(){t.enableDrag(),t.enableSwipe(),t.triggerPosterClick()}),50),this.arrow(),this.settings.mousewheel&&this.mousewheel(),this.settings.dynamic||this.openGalleryOnItemClick()},t.prototype.openGalleryOnItemClick=function(){for(var t=this,e=function(e){var i=n.items[e],r=Md(i),s=Ld.generateUUID();r.attr("data-lg-id",s).on("click.lgcustom-item-"+s,(function(n){n.preventDefault();var r=t.settings.index||e;t.openGallery(r,i)}))},n=this,i=0;i<this.items.length;i++)e(i)},t.prototype.buildModules=function(){var t=this;this.settings.plugins.forEach((function(e){t.plugins.push(new e(t,Md))}))},t.prototype.validateLicense=function(){this.settings.licenseKey?"0000-0000-000-0000"===this.settings.licenseKey&&console.warn("lightGallery: "+this.settings.licenseKey+" license key is not valid for production use"):console.error("Please provide a valid license key")},t.prototype.getSlideItem=function(t){return Md(this.getSlideItemId(t))},t.prototype.getSlideItemId=function(t){return"#lg-item-"+this.lgId+"-"+t},t.prototype.getIdName=function(t){return t+"-"+this.lgId},t.prototype.getElementById=function(t){return Md("#"+this.getIdName(t))},t.prototype.manageSingleSlideClassName=function(){this.galleryItems.length<2?this.outer.addClass("lg-single-item"):this.outer.removeClass("lg-single-item")},t.prototype.buildStructure=function(){var t=this;if(!(this.$container&&this.$container.get())){var e="",n="";this.settings.controls&&(e='<button type="button" id="'+this.getIdName("lg-prev")+'" aria-label="'+this.settings.strings.previousSlide+'" class="lg-prev lg-icon"> '+this.settings.prevHtml+' </button>\n                <button type="button" id="'+this.getIdName("lg-next")+'" aria-label="'+this.settings.strings.nextSlide+'" class="lg-next lg-icon"> '+this.settings.nextHtml+" </button>"),".lg-item"!==this.settings.appendSubHtmlTo&&(n='<div class="lg-sub-html" role="status" aria-live="polite"></div>');var i="";this.settings.allowMediaOverlap&&(i+="lg-media-overlap ");var r=this.settings.ariaLabelledby?'aria-labelledby="'+this.settings.ariaLabelledby+'"':"",s=this.settings.ariaDescribedby?'aria-describedby="'+this.settings.ariaDescribedby+'"':"",o="lg-container "+this.settings.addClass+" "+(document.body!==this.settings.container?"lg-inline":""),a=this.settings.closable&&this.settings.showCloseIcon?'<button type="button" aria-label="'+this.settings.strings.closeGallery+'" id="'+this.getIdName("lg-close")+'" class="lg-close lg-icon"></button>':"",u=this.settings.showMaximizeIcon?'<button type="button" aria-label="'+this.settings.strings.toggleMaximize+'" id="'+this.getIdName("lg-maximize")+'" class="lg-maximize lg-icon"></button>':"",l='\n        <div class="'+o+'" id="'+this.getIdName("lg-container")+'" tabindex="-1" aria-modal="true" '+r+" "+s+' role="dialog"\n        >\n            <div id="'+this.getIdName("lg-backdrop")+'" class="lg-backdrop"></div>\n\n            <div id="'+this.getIdName("lg-outer")+'" class="lg-outer lg-use-css3 lg-css3 lg-hide-items '+i+' ">\n\n              <div id="'+this.getIdName("lg-content")+'" class="lg-content">\n                <div id="'+this.getIdName("lg-inner")+'" class="lg-inner">\n                </div>\n                '+e+'\n              </div>\n                <div id="'+this.getIdName("lg-toolbar")+'" class="lg-toolbar lg-group">\n                    '+u+"\n                    "+a+"\n                    </div>\n                    "+(".lg-outer"===this.settings.appendSubHtmlTo?n:"")+'\n                <div id="'+this.getIdName("lg-components")+'" class="lg-components">\n                    '+(".lg-sub-html"===this.settings.appendSubHtmlTo?n:"")+"\n                </div>\n            </div>\n        </div>\n        ";Md(this.settings.container).append(l),document.body!==this.settings.container&&Md(this.settings.container).css("position","relative"),this.outer=this.getElementById("lg-outer"),this.$lgComponents=this.getElementById("lg-components"),this.$backdrop=this.getElementById("lg-backdrop"),this.$container=this.getElementById("lg-container"),this.$inner=this.getElementById("lg-inner"),this.$content=this.getElementById("lg-content"),this.$toolbar=this.getElementById("lg-toolbar"),this.$backdrop.css("transition-duration",this.settings.backdropDuration+"ms");var c=this.settings.mode+" ";this.manageSingleSlideClassName(),this.settings.enableDrag&&(c+="lg-grab "),this.outer.addClass(c),this.$inner.css("transition-timing-function",this.settings.easing),this.$inner.css("transition-duration",this.settings.speed+"ms"),this.settings.download&&this.$toolbar.append('<a id="'+this.getIdName("lg-download")+'" target="_blank" rel="noopener" aria-label="'+this.settings.strings.download+'" download class="lg-download lg-icon"></a>'),this.counter(),Md(window).on("resize.lg.global"+this.lgId+" orientationchange.lg.global"+this.lgId,(function(){t.refreshOnResize()})),this.hideBars(),this.manageCloseGallery(),this.toggleMaximize(),this.initModules()}},t.prototype.refreshOnResize=function(){if(this.lgOpened){var t=this.galleryItems[this.index].__slideVideoInfo;this.mediaContainerPosition=this.getMediaContainerPosition();var e=this.mediaContainerPosition,n=e.top,i=e.bottom;if(this.currentImageSize=Vd(this.items[this.index],this.outer,n+i,t&&this.settings.videoMaxSize),t&&this.resizeVideoSlide(this.index,this.currentImageSize),this.zoomFromOrigin&&!this.isDummyImageRemoved){var r=this.getDummyImgStyles(this.currentImageSize);this.outer.find(".lg-current .lg-dummy-img").first().attr("style",r)}this.LGel.trigger(pd)}},t.prototype.resizeVideoSlide=function(t,e){var n=this.getVideoContStyle(e);this.getSlideItem(t).find(".lg-video-cont").attr("style",n)},t.prototype.updateSlides=function(t,e){if(this.index>t.length-1&&(this.index=t.length-1),1===t.length&&(this.index=0),t.length){var n=this.galleryItems[e].src;this.galleryItems=t,this.updateControls(),this.$inner.empty(),this.currentItemsInDom=[];var i=0;this.galleryItems.some((function(t,e){return t.src===n&&(i=e,!0)})),this.currentItemsInDom=this.organizeSlideItems(i,-1),this.loadContent(i,!0),this.getSlideItem(i).addClass("lg-current"),this.index=i,this.updateCurrentCounter(i),this.LGel.trigger(md)}else this.closeGallery()},t.prototype.getItems=function(){if(this.items=[],this.settings.dynamic)return this.settings.dynamicEl||[];if("this"===this.settings.selector)this.items.push(this.el);else if(this.settings.selector)if("string"==typeof this.settings.selector)if(this.settings.selectWithin){var t=Md(this.settings.selectWithin);this.items=t.find(this.settings.selector).get()}else this.items=this.el.querySelectorAll(this.settings.selector);else this.items=this.settings.selector;else this.items=this.el.children;return qd(this.items,this.settings.extraProps,this.settings.getCaptionFromTitleOrAlt,this.settings.exThumbImage)},t.prototype.openGallery=function(t,e){var n=this;if(void 0===t&&(t=this.settings.index),!this.lgOpened){this.lgOpened=!0,this.outer.get().focus(),this.outer.removeClass("lg-hide-items"),this.$container.addClass("lg-show");var i=this.getItemsToBeInsertedToDom(t,t);this.currentItemsInDom=i;var r="";i.forEach((function(t){r=r+'<div id="'+t+'" class="lg-item"></div>'})),this.$inner.append(r),this.addHtml(t);var s="";this.mediaContainerPosition=this.getMediaContainerPosition();var o=this.mediaContainerPosition,a=o.top,u=o.bottom;this.settings.allowMediaOverlap||this.setMediaContainerPosition(a,u);var l=this.galleryItems[t].__slideVideoInfo;this.zoomFromOrigin&&e&&(this.currentImageSize=Vd(e,this.outer,a+u,l&&this.settings.videoMaxSize),s=Fd(e,this.outer,a,u,this.currentImageSize)),this.zoomFromOrigin&&s||(this.outer.addClass(this.settings.startClass),this.getSlideItem(t).removeClass("lg-complete"));var c=this.settings.zoomFromOrigin?100:this.settings.backdropDuration;setTimeout((function(){n.outer.addClass("lg-components-open")}),c),this.index=t,this.LGel.trigger(bd),this.getSlideItem(t).addClass("lg-current"),this.lGalleryOn=!1,this.prevScrollTop=Md(window).scrollTop(),setTimeout((function(){if(n.zoomFromOrigin&&s){var e=n.getSlideItem(t);e.css("transform",s),setTimeout((function(){e.addClass("lg-start-progress lg-start-end-progress").css("transition-duration",n.settings.startAnimationDuration+"ms"),n.outer.addClass("lg-zoom-from-image")})),setTimeout((function(){e.css("transform","translate3d(0, 0, 0)")}),100)}setTimeout((function(){n.$backdrop.addClass("in"),n.$container.addClass("lg-show-in")}),10),n.zoomFromOrigin&&s||setTimeout((function(){n.outer.addClass("lg-visible")}),n.settings.backdropDuration),n.slide(t,!1,!1,!1),n.LGel.trigger(wd)})),document.body===this.settings.container&&Md("html").addClass("lg-on")}},t.prototype.getMediaContainerPosition=function(){if(this.settings.allowMediaOverlap)return{top:0,bottom:0};var t=this.$toolbar.get().clientHeight||0,e=this.outer.find(".lg-components .lg-sub-html").get(),n=this.settings.defaultCaptionHeight||e&&e.clientHeight||0,i=this.outer.find(".lg-thumb-outer").get();return{top:t,bottom:(i?i.clientHeight:0)+n}},t.prototype.setMediaContainerPosition=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.$content.css("top",t+"px").css("bottom",e+"px")},t.prototype.hideBars=function(){var t=this;setTimeout((function(){t.outer.removeClass("lg-hide-items"),t.settings.hideBarsDelay>0&&(t.outer.on("mousemove.lg click.lg touchstart.lg",(function(){t.outer.removeClass("lg-hide-items"),clearTimeout(t.hideBarTimeout),t.hideBarTimeout=setTimeout((function(){t.outer.addClass("lg-hide-items")}),t.settings.hideBarsDelay)})),t.outer.trigger("mousemove.lg"))}),this.settings.showBarsAfter)},t.prototype.initPictureFill=function(t){if(this.settings.supportLegacyBrowser)try{picturefill({elements:[t.get()]})}catch(t){console.warn("lightGallery :- If you want srcset or picture tag to be supported for older browser please include picturefil javascript library in your document.")}},t.prototype.counter=function(){if(this.settings.counter){var t='<div class="lg-counter" role="status" aria-live="polite">\n                <span id="'+this.getIdName("lg-counter-current")+'" class="lg-counter-current">'+(this.index+1)+' </span> /\n                <span id="'+this.getIdName("lg-counter-all")+'" class="lg-counter-all">'+this.galleryItems.length+" </span></div>";this.outer.find(this.settings.appendCounterTo).append(t)}},t.prototype.addHtml=function(t){var e,n;if(this.galleryItems[t].subHtmlUrl?n=this.galleryItems[t].subHtmlUrl:e=this.galleryItems[t].subHtml,!n)if(e){var i=e.substring(0,1);"."!==i&&"#"!==i||(e=this.settings.subHtmlSelectorRelative&&!this.settings.dynamic?Md(this.items).eq(t).find(e).first().html():Md(e).first().html())}else e="";if(".lg-item"!==this.settings.appendSubHtmlTo)n?this.outer.find(".lg-sub-html").load(n):this.outer.find(".lg-sub-html").html(e);else{var r=Md(this.getSlideItemId(t));n?r.load(n):r.append('<div class="lg-sub-html">'+e+"</div>")}null!=e&&(""===e?this.outer.find(this.settings.appendSubHtmlTo).addClass("lg-empty-html"):this.outer.find(this.settings.appendSubHtmlTo).removeClass("lg-empty-html")),this.LGel.trigger(yd,{index:t})},t.prototype.preload=function(t){for(var e=1;e<=this.settings.preload&&!(e>=this.galleryItems.length-t);e++)this.loadContent(t+e,!1);for(var n=1;n<=this.settings.preload&&!(t-n<0);n++)this.loadContent(t-n,!1)},t.prototype.getDummyImgStyles=function(t){return t?"width:"+t.width+"px;\n                margin-left: -"+t.width/2+"px;\n                margin-top: -"+t.height/2+"px;\n                height:"+t.height+"px":""},t.prototype.getVideoContStyle=function(t){return t?"width:"+t.width+"px;\n                height:"+t.height+"px":""},t.prototype.getDummyImageContent=function(t,e,n){var i;if(this.settings.dynamic||(i=Md(this.items).eq(e)),i){var r=void 0;if(!(r=this.settings.exThumbImage?i.attr(this.settings.exThumbImage):i.find("img").first().attr("src")))return"";var s="<img "+n+' style="'+this.getDummyImgStyles(this.currentImageSize)+'" class="lg-dummy-img" src="'+r+'" />';return t.addClass("lg-first-slide"),this.outer.addClass("lg-first-slide-loading"),s}return""},t.prototype.setImgMarkup=function(t,e,n){var i=this.galleryItems[n],r=i.alt,s=i.srcset,o=i.sizes,a=i.sources,u=r?'alt="'+r+'"':"",l='<picture class="lg-img-wrap"> '+(this.isFirstSlideWithZoomAnimation()?this.getDummyImageContent(e,n,u):zd(n,t,u,s,o,a))+"</picture>";e.prepend(l)},t.prototype.onSlideObjectLoad=function(t,e,n,i){var r=t.find(".lg-object").first();Gd(r.get())||e?n():(r.on("load.lg error.lg",(function(){n&&n()})),r.on("error.lg",(function(){i&&i()})))},t.prototype.onLgObjectLoad=function(t,e,n,i,r,s){var o=this;this.onSlideObjectLoad(t,s,(function(){o.triggerSlideItemLoad(t,e,n,i,r)}),(function(){t.addClass("lg-complete lg-complete_"),t.html('<span class="lg-error-msg">Oops... Failed to load content...</span>')}))},t.prototype.triggerSlideItemLoad=function(t,e,n,i,r){var s=this,o=this.galleryItems[e],a=r&&"video"===this.getSlideType(o)&&!o.poster?i:0;setTimeout((function(){t.addClass("lg-complete lg-complete_"),s.LGel.trigger(kd,{index:e,delay:n||0,isFirstSlide:r})}),a)},t.prototype.isFirstSlideWithZoomAnimation=function(){return!(this.lGalleryOn||!this.zoomFromOrigin||!this.currentImageSize)},t.prototype.addSlideVideoInfo=function(t){var e=this;t.forEach((function(t,n){t.__slideVideoInfo=Kd(t.src,!!t.video,n),t.__slideVideoInfo&&e.settings.loadYouTubePoster&&!t.poster&&t.__slideVideoInfo.youtube&&(t.poster="//img.youtube.com/vi/"+t.__slideVideoInfo.youtube[1]+"/maxresdefault.jpg")}))},t.prototype.loadContent=function(t,e){var n=this,i=this.galleryItems[t],r=Md(this.getSlideItemId(t)),s=i.poster,o=i.srcset,a=i.sizes,u=i.sources,l=i.src,c=i.video,h=c&&"string"==typeof c?JSON.parse(c):c;if(i.responsive){var f=i.responsive.split(",");l=Bd(f)||l}var d=i.__slideVideoInfo,g="",v=!!i.iframe,p=!this.lGalleryOn,m=0;if(p&&(m=this.zoomFromOrigin&&this.currentImageSize?this.settings.startAnimationDuration+10:this.settings.backdropDuration+10),!r.hasClass("lg-loaded")){if(d){var y=this.mediaContainerPosition,b=y.top,w=y.bottom,k=Vd(this.items[t],this.outer,b+w,d&&this.settings.videoMaxSize);g=this.getVideoContStyle(k)}if(v){var T=Ud(this.settings.iframeWidth,this.settings.iframeHeight,this.settings.iframeMaxWidth,this.settings.iframeMaxHeight,l,i.iframeTitle);r.prepend(T)}else if(s){var I="";p&&this.zoomFromOrigin&&this.currentImageSize&&(I=this.getDummyImageContent(r,t,""));T=jd(s,I||"",g,this.settings.strings.playVideo,d);r.prepend(T)}else if(d){T='<div class="lg-video-cont " style="'+g+'"></div>';r.prepend(T)}else if(this.setImgMarkup(l,r,t),o||u){var E=r.find(".lg-object");this.initPictureFill(E)}(s||d)&&this.LGel.trigger(vd,{index:t,src:l,html5Video:h,hasPoster:!!s}),this.LGel.trigger(dd,{index:t}),this.lGalleryOn&&".lg-item"===this.settings.appendSubHtmlTo&&this.addHtml(t)}var S=0;m&&!Md(document.body).hasClass("lg-from-hash")&&(S=m),this.isFirstSlideWithZoomAnimation()&&(setTimeout((function(){r.removeClass("lg-start-end-progress lg-start-progress").removeAttr("style")}),this.settings.startAnimationDuration+100),r.hasClass("lg-loaded")||setTimeout((function(){if("image"===n.getSlideType(i)&&(r.find(".lg-img-wrap").append(zd(t,l,"",o,a,i.sources)),o||u)){var e=r.find(".lg-object");n.initPictureFill(e)}("image"===n.getSlideType(i)||"video"===n.getSlideType(i)&&s)&&(n.onLgObjectLoad(r,t,m,S,!0,!1),n.onSlideObjectLoad(r,!(!d||!d.html5||s),(function(){n.loadContentOnFirstSlideLoad(t,r,S)}),(function(){n.loadContentOnFirstSlideLoad(t,r,S)})))}),this.settings.startAnimationDuration+100)),r.addClass("lg-loaded"),this.isFirstSlideWithZoomAnimation()&&("video"!==this.getSlideType(i)||s)||this.onLgObjectLoad(r,t,m,S,p,!(!d||!d.html5||s)),this.zoomFromOrigin&&this.currentImageSize||!r.hasClass("lg-complete_")||this.lGalleryOn||setTimeout((function(){r.addClass("lg-complete")}),this.settings.backdropDuration),this.lGalleryOn=!0,!0===e&&(r.hasClass("lg-complete_")?this.preload(t):r.find(".lg-object").first().on("load.lg error.lg",(function(){n.preload(t)})))},t.prototype.loadContentOnFirstSlideLoad=function(t,e,n){var i=this;setTimeout((function(){e.find(".lg-dummy-img").remove(),e.removeClass("lg-first-slide"),i.outer.removeClass("lg-first-slide-loading"),i.isDummyImageRemoved=!0,i.preload(t)}),n+300)},t.prototype.getItemsToBeInsertedToDom=function(t,e,n){var i=this;void 0===n&&(n=0);var r=[],s=Math.max(n,3);s=Math.min(s,this.galleryItems.length);var o="lg-item-"+this.lgId+"-"+e;if(this.galleryItems.length<=3)return this.galleryItems.forEach((function(t,e){r.push("lg-item-"+i.lgId+"-"+e)})),r;if(t<(this.galleryItems.length-1)/2){for(var a=t;a>t-s/2&&a>=0;a--)r.push("lg-item-"+this.lgId+"-"+a);var u=r.length;for(a=0;a<s-u;a++)r.push("lg-item-"+this.lgId+"-"+(t+a+1))}else{for(a=t;a<=this.galleryItems.length-1&&a<t+s/2;a++)r.push("lg-item-"+this.lgId+"-"+a);for(u=r.length,a=0;a<s-u;a++)r.push("lg-item-"+this.lgId+"-"+(t-a-1))}return this.settings.loop&&(t===this.galleryItems.length-1?r.push("lg-item-"+this.lgId+"-0"):0===t&&r.push("lg-item-"+this.lgId+"-"+(this.galleryItems.length-1))),-1===r.indexOf(o)&&r.push("lg-item-"+this.lgId+"-"+e),r},t.prototype.organizeSlideItems=function(t,e){var n=this,i=this.getItemsToBeInsertedToDom(t,e,this.settings.numberOfSlideItemsInDom);return i.forEach((function(t){-1===n.currentItemsInDom.indexOf(t)&&n.$inner.append('<div id="'+t+'" class="lg-item"></div>')})),this.currentItemsInDom.forEach((function(t){-1===i.indexOf(t)&&Md("#"+t).remove()})),i},t.prototype.getPreviousSlideIndex=function(){var t=0;try{var e=this.outer.find(".lg-current").first().attr("id");t=parseInt(e.split("-")[3])||0}catch(e){t=0}return t},t.prototype.setDownloadValue=function(t){if(this.settings.download){var e=this.galleryItems[t];if(!1===e.downloadUrl||"false"===e.downloadUrl)this.outer.addClass("lg-hide-download");else{var n=this.getElementById("lg-download");this.outer.removeClass("lg-hide-download"),n.attr("href",e.downloadUrl||e.src),e.download&&n.attr("download",e.download)}}},t.prototype.makeSlideAnimation=function(t,e,n){var i=this;this.lGalleryOn&&n.addClass("lg-slide-progress"),setTimeout((function(){i.outer.addClass("lg-no-trans"),i.outer.find(".lg-item").removeClass("lg-prev-slide lg-next-slide"),"prev"===t?(e.addClass("lg-prev-slide"),n.addClass("lg-next-slide")):(e.addClass("lg-next-slide"),n.addClass("lg-prev-slide")),setTimeout((function(){i.outer.find(".lg-item").removeClass("lg-current"),e.addClass("lg-current"),i.outer.removeClass("lg-no-trans")}),50)}),this.lGalleryOn?this.settings.slideDelay:0)},t.prototype.slide=function(t,e,n,i){var r=this,s=this.getPreviousSlideIndex();if(this.currentItemsInDom=this.organizeSlideItems(t,s),!this.lGalleryOn||s!==t){var o=this.galleryItems.length;if(!this.lgBusy){this.settings.counter&&this.updateCurrentCounter(t);var a=this.getSlideItem(t),u=this.getSlideItem(s),l=this.galleryItems[t],c=l.__slideVideoInfo;if(this.outer.attr("data-lg-slide-type",this.getSlideType(l)),this.setDownloadValue(t),c){var h=this.mediaContainerPosition,f=h.top,d=h.bottom,g=Vd(this.items[t],this.outer,f+d,c&&this.settings.videoMaxSize);this.resizeVideoSlide(t,g)}if(this.LGel.trigger(Td,{prevIndex:s,index:t,fromTouch:!!e,fromThumb:!!n}),this.lgBusy=!0,clearTimeout(this.hideBarTimeout),this.arrowDisable(t),i||(t<s?i="prev":t>s&&(i="next")),e){this.outer.find(".lg-item").removeClass("lg-prev-slide lg-current lg-next-slide");var v=void 0,p=void 0;o>2?(v=t-1,p=t+1,(0===t&&s===o-1||t===o-1&&0===s)&&(p=0,v=o-1)):(v=0,p=1),"prev"===i?this.getSlideItem(p).addClass("lg-next-slide"):this.getSlideItem(v).addClass("lg-prev-slide"),a.addClass("lg-current")}else this.makeSlideAnimation(i,a,u);this.lGalleryOn?setTimeout((function(){r.loadContent(t,!0),".lg-item"!==r.settings.appendSubHtmlTo&&r.addHtml(t)}),this.settings.speed+50+(e?0:this.settings.slideDelay)):this.loadContent(t,!0),setTimeout((function(){r.lgBusy=!1,u.removeClass("lg-slide-progress"),r.LGel.trigger(Id,{prevIndex:s,index:t,fromTouch:e,fromThumb:n})}),(this.lGalleryOn?this.settings.speed+100:100)+(e?0:this.settings.slideDelay))}this.index=t}},t.prototype.updateCurrentCounter=function(t){this.getElementById("lg-counter-current").html(t+1+"")},t.prototype.updateCounterTotal=function(){this.getElementById("lg-counter-all").html(this.galleryItems.length+"")},t.prototype.getSlideType=function(t){return t.__slideVideoInfo?"video":t.iframe?"iframe":"image"},t.prototype.touchMove=function(t,e,n){var i=e.pageX-t.pageX,r=e.pageY-t.pageY,s=!1;if(this.swipeDirection?s=!0:Math.abs(i)>15?(this.swipeDirection="horizontal",s=!0):Math.abs(r)>15&&(this.swipeDirection="vertical",s=!0),s){var o=this.getSlideItem(this.index);if("horizontal"===this.swipeDirection){null==n||n.preventDefault(),this.outer.addClass("lg-dragging"),this.setTranslate(o,i,0);var a=o.get().offsetWidth,u=15*a/100-Math.abs(10*i/100);this.setTranslate(this.outer.find(".lg-prev-slide").first(),-a+i-u,0),this.setTranslate(this.outer.find(".lg-next-slide").first(),a+i+u,0)}else if("vertical"===this.swipeDirection&&this.settings.swipeToClose){null==n||n.preventDefault(),this.$container.addClass("lg-dragging-vertical");var l=1-Math.abs(r)/window.innerHeight;this.$backdrop.css("opacity",l);var c=1-Math.abs(r)/(2*window.innerWidth);this.setTranslate(o,0,r,c,c),Math.abs(r)>100&&this.outer.addClass("lg-hide-items").removeClass("lg-components-open")}}},t.prototype.touchEnd=function(t,e,n){var i,r=this;"lg-slide"!==this.settings.mode&&this.outer.addClass("lg-slide"),setTimeout((function(){r.$container.removeClass("lg-dragging-vertical"),r.outer.removeClass("lg-dragging lg-hide-items").addClass("lg-components-open");var s=!0;if("horizontal"===r.swipeDirection){i=t.pageX-e.pageX;var o=Math.abs(t.pageX-e.pageX);i<0&&o>r.settings.swipeThreshold?(r.goToNextSlide(!0),s=!1):i>0&&o>r.settings.swipeThreshold&&(r.goToPrevSlide(!0),s=!1)}else if("vertical"===r.swipeDirection){if(i=Math.abs(t.pageY-e.pageY),r.settings.closable&&r.settings.swipeToClose&&i>100)return void r.closeGallery();r.$backdrop.css("opacity",1)}if(r.outer.find(".lg-item").removeAttr("style"),s&&Math.abs(t.pageX-e.pageX)<5){var a=Md(n.target);r.isPosterElement(a)&&r.LGel.trigger(Ed)}r.swipeDirection=void 0})),setTimeout((function(){r.outer.hasClass("lg-dragging")||"lg-slide"===r.settings.mode||r.outer.removeClass("lg-slide")}),this.settings.speed+100)},t.prototype.enableSwipe=function(){var t=this,e={},n={},i=!1,r=!1;this.settings.enableSwipe&&(this.$inner.on("touchstart.lg",(function(n){t.dragOrSwipeEnabled=!0;var i=t.getSlideItem(t.index);!Md(n.target).hasClass("lg-item")&&!i.get().contains(n.target)||t.outer.hasClass("lg-zoomed")||t.lgBusy||1!==n.targetTouches.length||(r=!0,t.touchAction="swipe",t.manageSwipeClass(),e={pageX:n.targetTouches[0].pageX,pageY:n.targetTouches[0].pageY})})),this.$inner.on("touchmove.lg",(function(s){r&&"swipe"===t.touchAction&&1===s.targetTouches.length&&(n={pageX:s.targetTouches[0].pageX,pageY:s.targetTouches[0].pageY},t.touchMove(e,n,s),i=!0)})),this.$inner.on("touchend.lg",(function(s){if("swipe"===t.touchAction){if(i)i=!1,t.touchEnd(n,e,s);else if(r){var o=Md(s.target);t.isPosterElement(o)&&t.LGel.trigger(Ed)}t.touchAction=void 0,r=!1}})))},t.prototype.enableDrag=function(){var t=this,e={},n={},i=!1,r=!1;this.settings.enableDrag&&(this.outer.on("mousedown.lg",(function(n){t.dragOrSwipeEnabled=!0;var r=t.getSlideItem(t.index);(Md(n.target).hasClass("lg-item")||r.get().contains(n.target))&&(t.outer.hasClass("lg-zoomed")||t.lgBusy||(n.preventDefault(),t.lgBusy||(t.manageSwipeClass(),e={pageX:n.pageX,pageY:n.pageY},i=!0,t.outer.get().scrollLeft+=1,t.outer.get().scrollLeft-=1,t.outer.removeClass("lg-grab").addClass("lg-grabbing"),t.LGel.trigger(Sd))))})),Md(window).on("mousemove.lg.global"+this.lgId,(function(s){i&&t.lgOpened&&(r=!0,n={pageX:s.pageX,pageY:s.pageY},t.touchMove(e,n),t.LGel.trigger(xd))})),Md(window).on("mouseup.lg.global"+this.lgId,(function(s){if(t.lgOpened){var o=Md(s.target);r?(r=!1,t.touchEnd(n,e,s),t.LGel.trigger(Cd)):t.isPosterElement(o)&&t.LGel.trigger(Ed),i&&(i=!1,t.outer.removeClass("lg-grabbing").addClass("lg-grab"))}})))},t.prototype.triggerPosterClick=function(){var t=this;this.$inner.on("click.lg",(function(e){!t.dragOrSwipeEnabled&&t.isPosterElement(Md(e.target))&&t.LGel.trigger(Ed)}))},t.prototype.manageSwipeClass=function(){var t=this.index+1,e=this.index-1;this.settings.loop&&this.galleryItems.length>2&&(0===this.index?e=this.galleryItems.length-1:this.index===this.galleryItems.length-1&&(t=0)),this.outer.find(".lg-item").removeClass("lg-next-slide lg-prev-slide"),e>-1&&this.getSlideItem(e).addClass("lg-prev-slide"),this.getSlideItem(t).addClass("lg-next-slide")},t.prototype.goToNextSlide=function(t){var e=this,n=this.settings.loop;t&&this.galleryItems.length<3&&(n=!1),this.lgBusy||(this.index+1<this.galleryItems.length?(this.index++,this.LGel.trigger(Ad,{index:this.index}),this.slide(this.index,!!t,!1,"next")):n?(this.index=0,this.LGel.trigger(Ad,{index:this.index}),this.slide(this.index,!!t,!1,"next")):this.settings.slideEndAnimation&&!t&&(this.outer.addClass("lg-right-end"),setTimeout((function(){e.outer.removeClass("lg-right-end")}),400)))},t.prototype.goToPrevSlide=function(t){var e=this,n=this.settings.loop;t&&this.galleryItems.length<3&&(n=!1),this.lgBusy||(this.index>0?(this.index--,this.LGel.trigger(Dd,{index:this.index,fromTouch:t}),this.slide(this.index,!!t,!1,"prev")):n?(this.index=this.galleryItems.length-1,this.LGel.trigger(Dd,{index:this.index,fromTouch:t}),this.slide(this.index,!!t,!1,"prev")):this.settings.slideEndAnimation&&!t&&(this.outer.addClass("lg-left-end"),setTimeout((function(){e.outer.removeClass("lg-left-end")}),400)))},t.prototype.keyPress=function(){var t=this;Md(window).on("keydown.lg.global"+this.lgId,(function(e){t.lgOpened&&!0===t.settings.escKey&&27===e.keyCode&&(e.preventDefault(),t.settings.allowMediaOverlap&&t.outer.hasClass("lg-can-toggle")&&t.outer.hasClass("lg-components-open")?t.outer.removeClass("lg-components-open"):t.closeGallery()),t.lgOpened&&t.galleryItems.length>1&&(37===e.keyCode&&(e.preventDefault(),t.goToPrevSlide()),39===e.keyCode&&(e.preventDefault(),t.goToNextSlide()))}))},t.prototype.arrow=function(){var t=this;this.getElementById("lg-prev").on("click.lg",(function(){t.goToPrevSlide()})),this.getElementById("lg-next").on("click.lg",(function(){t.goToNextSlide()}))},t.prototype.arrowDisable=function(t){if(!this.settings.loop&&this.settings.hideControlOnEnd){var e=this.getElementById("lg-prev"),n=this.getElementById("lg-next");t+1===this.galleryItems.length?n.attr("disabled","disabled").addClass("disabled"):n.removeAttr("disabled").removeClass("disabled"),0===t?e.attr("disabled","disabled").addClass("disabled"):e.removeAttr("disabled").removeClass("disabled")}},t.prototype.setTranslate=function(t,e,n,i,r){void 0===i&&(i=1),void 0===r&&(r=1),t.css("transform","translate3d("+e+"px, "+n+"px, 0px) scale3d("+i+", "+r+", 1)")},t.prototype.mousewheel=function(){var t=this,e=0;this.outer.on("wheel.lg",(function(n){if(n.deltaY&&!(t.galleryItems.length<2)){n.preventDefault();var i=(new Date).getTime();i-e<1e3||(e=i,n.deltaY>0?t.goToNextSlide():n.deltaY<0&&t.goToPrevSlide())}}))},t.prototype.isSlideElement=function(t){return t.hasClass("lg-outer")||t.hasClass("lg-item")||t.hasClass("lg-img-wrap")},t.prototype.isPosterElement=function(t){var e=this.getSlideItem(this.index).find(".lg-video-play-button").get();return t.hasClass("lg-video-poster")||t.hasClass("lg-video-play-button")||e&&e.contains(t.get())},t.prototype.toggleMaximize=function(){var t=this;this.getElementById("lg-maximize").on("click.lg",(function(){t.$container.toggleClass("lg-inline"),t.refreshOnResize()}))},t.prototype.invalidateItems=function(){for(var t=0;t<this.items.length;t++){var e=Md(this.items[t]);e.off("click.lgcustom-item-"+e.attr("data-lg-id"))}},t.prototype.manageCloseGallery=function(){var t=this;if(this.settings.closable){var e=!1;this.getElementById("lg-close").on("click.lg",(function(){t.closeGallery()})),this.settings.closeOnTap&&(this.outer.on("mousedown.lg",(function(n){var i=Md(n.target);e=!!t.isSlideElement(i)})),this.outer.on("mousemove.lg",(function(){e=!1})),this.outer.on("mouseup.lg",(function(n){var i=Md(n.target);t.isSlideElement(i)&&e&&(t.outer.hasClass("lg-dragging")||t.closeGallery())})))}},t.prototype.closeGallery=function(t){var e=this;if(!this.lgOpened||!this.settings.closable&&!t)return 0;this.LGel.trigger(Nd),Md(window).scrollTop(this.prevScrollTop);var n,i=this.items[this.index];if(this.zoomFromOrigin&&i){var r=this.mediaContainerPosition,s=r.top,o=r.bottom,a=this.galleryItems[this.index],u=a.__slideVideoInfo,l=a.poster,c=Vd(i,this.outer,s+o,u&&l&&this.settings.videoMaxSize);n=Fd(i,this.outer,s,o,c)}this.zoomFromOrigin&&n?(this.outer.addClass("lg-closing lg-zoom-from-image"),this.getSlideItem(this.index).addClass("lg-start-end-progress").css("transition-duration",this.settings.startAnimationDuration+"ms").css("transform",n)):(this.outer.addClass("lg-hide-items"),this.outer.removeClass("lg-zoom-from-image")),this.destroyModules(),this.lGalleryOn=!1,this.isDummyImageRemoved=!1,this.zoomFromOrigin=this.settings.zoomFromOrigin,clearTimeout(this.hideBarTimeout),this.hideBarTimeout=!1,Md("html").removeClass("lg-on"),this.outer.removeClass("lg-visible lg-components-open"),this.$backdrop.removeClass("in").css("opacity",0);var h=this.zoomFromOrigin&&n?Math.max(this.settings.startAnimationDuration,this.settings.backdropDuration):this.settings.backdropDuration;return this.$container.removeClass("lg-show-in"),setTimeout((function(){e.zoomFromOrigin&&n&&e.outer.removeClass("lg-zoom-from-image"),e.$container.removeClass("lg-show"),e.$backdrop.removeAttr("style").css("transition-duration",e.settings.backdropDuration+"ms"),e.outer.removeClass("lg-closing "+e.settings.startClass),e.getSlideItem(e.index).removeClass("lg-start-end-progress"),e.$inner.empty(),e.lgOpened&&e.LGel.trigger(_d,{instance:e}),e.outer.get()&&e.outer.get().blur(),e.lgOpened=!1}),h+100),h+100},t.prototype.initModules=function(){this.plugins.forEach((function(t){try{t.init()}catch(t){console.warn("lightGallery:- make sure lightGallery module is properly initiated")}}))},t.prototype.destroyModules=function(t){this.plugins.forEach((function(e){try{t?e.destroy():e.closeGallery&&e.closeGallery()}catch(t){console.warn("lightGallery:- make sure lightGallery module is properly destroyed")}}))},t.prototype.refresh=function(t){this.settings.dynamic||this.invalidateItems(),this.galleryItems=t||this.getItems(),this.updateControls(),this.openGalleryOnItemClick(),this.LGel.trigger(md)},t.prototype.updateControls=function(){this.addSlideVideoInfo(this.galleryItems),this.updateCounterTotal(),this.manageSingleSlideClassName()},t.prototype.destroy=function(){var t=this,e=this.closeGallery(!0);return setTimeout((function(){t.destroyModules(!0),t.settings.dynamic||t.invalidateItems(),Md(window).off(".lg.global"+t.lgId),t.LGel.off(".lg"),t.$container.remove()}),e),e},t}();var Yd,$d=function(t,e){return new Wd(t,e)},Qd=function(){return Qd=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Qd.apply(this,arguments)},Jd={thumbnail:!0,animateThumb:!0,currentPagerPosition:"middle",alignThumbnails:"middle",thumbWidth:100,thumbHeight:"80px",thumbMargin:5,appendThumbnailsTo:".lg-components",toggleThumb:!1,enableThumbDrag:!0,enableThumbSwipe:!0,thumbnailSwipeThreshold:10,loadYouTubeThumbnail:!0,youTubeThumbSize:1,thumbnailPluginStrings:{toggleThumbnails:"Toggle thumbnails"}},Zd="lgContainerResize",tg="lgUpdateSlides",eg="lgBeforeOpen",ng="lgBeforeSlide",ig=function(){function t(t,e){return this.thumbOuterWidth=0,this.thumbTotalWidth=0,this.translateX=0,this.thumbClickable=!1,this.core=t,this.$LG=e,this}return t.prototype.init=function(){this.settings=Qd(Qd({},Jd),this.core.settings),this.thumbOuterWidth=0,this.thumbTotalWidth=this.core.galleryItems.length*(this.settings.thumbWidth+this.settings.thumbMargin),this.translateX=0,this.setAnimateThumbStyles(),this.core.settings.allowMediaOverlap||(this.settings.toggleThumb=!1),this.settings.thumbnail&&(this.build(),this.settings.animateThumb?(this.settings.enableThumbDrag&&this.enableThumbDrag(),this.settings.enableThumbSwipe&&this.enableThumbSwipe(),this.thumbClickable=!1):this.thumbClickable=!0,this.toggleThumbBar(),this.thumbKeyPress())},t.prototype.build=function(){var t=this;this.setThumbMarkup(),this.manageActiveClassOnSlideChange(),this.$lgThumb.first().on("click.lg touchend.lg",(function(e){var n=t.$LG(e.target);n.hasAttribute("data-lg-item-id")&&setTimeout((function(){if(t.thumbClickable&&!t.core.lgBusy){var e=parseInt(n.attr("data-lg-item-id"));t.core.slide(e,!1,!0,!1)}}),50)})),this.core.LGel.on(ng+".thumb",(function(e){var n=e.detail.index;t.animateThumb(n)})),this.core.LGel.on(eg+".thumb",(function(){t.thumbOuterWidth=t.core.outer.get().offsetWidth})),this.core.LGel.on(tg+".thumb",(function(){t.rebuildThumbnails()})),this.core.LGel.on(Zd+".thumb",(function(){t.core.lgOpened&&setTimeout((function(){t.thumbOuterWidth=t.core.outer.get().offsetWidth,t.animateThumb(t.core.index),t.thumbOuterWidth=t.core.outer.get().offsetWidth}),50)}))},t.prototype.setThumbMarkup=function(){var t="lg-thumb-outer ";this.settings.alignThumbnails&&(t+="lg-thumb-align-"+this.settings.alignThumbnails);var e='<div class="'+t+'">\n        <div class="lg-thumb lg-group">\n        </div>\n        </div>';this.core.outer.addClass("lg-has-thumb"),".lg-components"===this.settings.appendThumbnailsTo?this.core.$lgComponents.append(e):this.core.outer.append(e),this.$thumbOuter=this.core.outer.find(".lg-thumb-outer").first(),this.$lgThumb=this.core.outer.find(".lg-thumb").first(),this.settings.animateThumb&&this.core.outer.find(".lg-thumb").css("transition-duration",this.core.settings.speed+"ms").css("width",this.thumbTotalWidth+"px").css("position","relative"),this.setThumbItemHtml(this.core.galleryItems)},t.prototype.enableThumbDrag=function(){var t=this,e={cords:{startX:0,endX:0},isMoved:!1,newTranslateX:0,startTime:new Date,endTime:new Date,touchMoveTime:0},n=!1;this.$thumbOuter.addClass("lg-grab"),this.core.outer.find(".lg-thumb").first().on("mousedown.lg.thumb",(function(i){t.thumbTotalWidth>t.thumbOuterWidth&&(i.preventDefault(),e.cords.startX=i.pageX,e.startTime=new Date,t.thumbClickable=!1,n=!0,t.core.outer.get().scrollLeft+=1,t.core.outer.get().scrollLeft-=1,t.$thumbOuter.removeClass("lg-grab").addClass("lg-grabbing"))})),this.$LG(window).on("mousemove.lg.thumb.global"+this.core.lgId,(function(i){t.core.lgOpened&&n&&(e.cords.endX=i.pageX,e=t.onThumbTouchMove(e))})),this.$LG(window).on("mouseup.lg.thumb.global"+this.core.lgId,(function(){t.core.lgOpened&&(e.isMoved?e=t.onThumbTouchEnd(e):t.thumbClickable=!0,n&&(n=!1,t.$thumbOuter.removeClass("lg-grabbing").addClass("lg-grab")))}))},t.prototype.enableThumbSwipe=function(){var t=this,e={cords:{startX:0,endX:0},isMoved:!1,newTranslateX:0,startTime:new Date,endTime:new Date,touchMoveTime:0};this.$lgThumb.on("touchstart.lg",(function(n){t.thumbTotalWidth>t.thumbOuterWidth&&(n.preventDefault(),e.cords.startX=n.targetTouches[0].pageX,t.thumbClickable=!1,e.startTime=new Date)})),this.$lgThumb.on("touchmove.lg",(function(n){t.thumbTotalWidth>t.thumbOuterWidth&&(n.preventDefault(),e.cords.endX=n.targetTouches[0].pageX,e=t.onThumbTouchMove(e))})),this.$lgThumb.on("touchend.lg",(function(){e.isMoved?e=t.onThumbTouchEnd(e):t.thumbClickable=!0}))},t.prototype.rebuildThumbnails=function(){var t=this;this.$thumbOuter.addClass("lg-rebuilding-thumbnails"),setTimeout((function(){t.thumbTotalWidth=t.core.galleryItems.length*(t.settings.thumbWidth+t.settings.thumbMargin),t.$lgThumb.css("width",t.thumbTotalWidth+"px"),t.$lgThumb.empty(),t.setThumbItemHtml(t.core.galleryItems),t.animateThumb(t.core.index)}),50),setTimeout((function(){t.$thumbOuter.removeClass("lg-rebuilding-thumbnails")}),200)},t.prototype.setTranslate=function(t){this.$lgThumb.css("transform","translate3d(-"+t+"px, 0px, 0px)")},t.prototype.getPossibleTransformX=function(t){return t>this.thumbTotalWidth-this.thumbOuterWidth&&(t=this.thumbTotalWidth-this.thumbOuterWidth),t<0&&(t=0),t},t.prototype.animateThumb=function(t){if(this.$lgThumb.css("transition-duration",this.core.settings.speed+"ms"),this.settings.animateThumb){var e=0;switch(this.settings.currentPagerPosition){case"left":e=0;break;case"middle":e=this.thumbOuterWidth/2-this.settings.thumbWidth/2;break;case"right":e=this.thumbOuterWidth-this.settings.thumbWidth}this.translateX=(this.settings.thumbWidth+this.settings.thumbMargin)*t-1-e,this.translateX>this.thumbTotalWidth-this.thumbOuterWidth&&(this.translateX=this.thumbTotalWidth-this.thumbOuterWidth),this.translateX<0&&(this.translateX=0),this.setTranslate(this.translateX)}},t.prototype.onThumbTouchMove=function(t){return t.newTranslateX=this.translateX,t.isMoved=!0,t.touchMoveTime=(new Date).valueOf(),t.newTranslateX-=t.cords.endX-t.cords.startX,t.newTranslateX=this.getPossibleTransformX(t.newTranslateX),this.setTranslate(t.newTranslateX),this.$thumbOuter.addClass("lg-dragging"),t},t.prototype.onThumbTouchEnd=function(t){t.isMoved=!1,t.endTime=new Date,this.$thumbOuter.removeClass("lg-dragging");var e=t.endTime.valueOf()-t.startTime.valueOf(),n=t.cords.endX-t.cords.startX,i=Math.abs(n)/e;return i>.15&&t.endTime.valueOf()-t.touchMoveTime<30?((i+=1)>2&&(i+=1),i+=i*(Math.abs(n)/this.thumbOuterWidth),this.$lgThumb.css("transition-duration",Math.min(i-1,2)+"settings"),n*=i,this.translateX=this.getPossibleTransformX(this.translateX-n),this.setTranslate(this.translateX)):this.translateX=t.newTranslateX,Math.abs(t.cords.endX-t.cords.startX)<this.settings.thumbnailSwipeThreshold&&(this.thumbClickable=!0),t},t.prototype.getThumbHtml=function(t,e){var n,i=this.core.galleryItems[e].__slideVideoInfo||{};return n=i.youtube&&this.settings.loadYouTubeThumbnail?"//img.youtube.com/vi/"+i.youtube[1]+"/"+this.settings.youTubeThumbSize+".jpg":t,'<div data-lg-item-id="'+e+'" class="lg-thumb-item '+(e===this.core.index?" active":"")+'" \n        style="width:'+this.settings.thumbWidth+"px; height: "+this.settings.thumbHeight+";\n            margin-right: "+this.settings.thumbMargin+'px;">\n            <img data-lg-item-id="'+e+'" src="'+n+'" />\n        </div>'},t.prototype.getThumbItemHtml=function(t){for(var e="",n=0;n<t.length;n++)e+=this.getThumbHtml(t[n].thumb,n);return e},t.prototype.setThumbItemHtml=function(t){var e=this.getThumbItemHtml(t);this.$lgThumb.html(e)},t.prototype.setAnimateThumbStyles=function(){this.settings.animateThumb&&this.core.outer.addClass("lg-animate-thumb")},t.prototype.manageActiveClassOnSlideChange=function(){var t=this;this.core.LGel.on(ng+".thumb",(function(e){var n=t.core.outer.find(".lg-thumb-item"),i=e.detail.index;n.removeClass("active"),n.eq(i).addClass("active")}))},t.prototype.toggleThumbBar=function(){var t=this;this.settings.toggleThumb&&(this.core.outer.addClass("lg-can-toggle"),this.core.$toolbar.append('<button type="button" aria-label="'+this.settings.thumbnailPluginStrings.toggleThumbnails+'" class="lg-toggle-thumb lg-icon"></button>'),this.core.outer.find(".lg-toggle-thumb").first().on("click.lg",(function(){t.core.outer.toggleClass("lg-components-open")})))},t.prototype.thumbKeyPress=function(){var t=this;this.$LG(window).on("keydown.lg.thumb.global"+this.core.lgId,(function(e){t.core.lgOpened&&t.settings.toggleThumb&&(38===e.keyCode?(e.preventDefault(),t.core.outer.addClass("lg-components-open")):40===e.keyCode&&(e.preventDefault(),t.core.outer.removeClass("lg-components-open")))}))},t.prototype.destroy=function(){this.settings.thumbnail&&(this.$LG(window).off(".lg.thumb.global"+this.core.lgId),this.core.LGel.off(".lg.thumb"),this.core.LGel.off(".thumb"),this.$thumbOuter.remove(),this.core.outer.removeClass("lg-has-thumb"))},t}(),rg=function(){return rg=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},rg.apply(this,arguments)},sg={scale:1,zoom:!0,actualSize:!0,showZoomInOutIcons:!1,actualSizeIcons:{zoomIn:"lg-zoom-in",zoomOut:"lg-zoom-out"},enableZoomAfter:300,zoomPluginStrings:{zoomIn:"Zoom in",zoomOut:"Zoom out",viewActualSize:"View actual size"}},og="lgContainerResize",ag="lgBeforeOpen",ug="lgAfterOpen",lg="lgSlideItemLoad",cg="lgAfterSlide",hg="lgRotateLeft",fg="lgRotateRight",dg="lgFlipHorizontal",gg="lgFlipVertical",vg=function(){function t(t,e){return this.core=t,this.$LG=e,this.settings=rg(rg({},sg),this.core.settings),this}return t.prototype.buildTemplates=function(){var t=this.settings.showZoomInOutIcons?'<button id="'+this.core.getIdName("lg-zoom-in")+'" type="button" aria-label="'+this.settings.zoomPluginStrings.zoomIn+'" class="lg-zoom-in lg-icon"></button><button id="'+this.core.getIdName("lg-zoom-out")+'" type="button" aria-label="'+this.settings.zoomPluginStrings.zoomIn+'" class="lg-zoom-out lg-icon"></button>':"";this.settings.actualSize&&(t+='<button id="'+this.core.getIdName("lg-actual-size")+'" type="button" aria-label="'+this.settings.zoomPluginStrings.viewActualSize+'" class="'+this.settings.actualSizeIcons.zoomIn+' lg-icon"></button>'),this.core.outer.addClass("lg-use-transition-for-zoom"),this.core.$toolbar.first().append(t)},t.prototype.enableZoom=function(t){var e=this,n=this.settings.enableZoomAfter+t.detail.delay;this.$LG("body").first().hasClass("lg-from-hash")&&t.detail.delay?n=0:this.$LG("body").first().removeClass("lg-from-hash"),this.zoomableTimeout=setTimeout((function(){e.isImageSlide()&&(e.core.getSlideItem(t.detail.index).addClass("lg-zoomable"),t.detail.index===e.core.index&&e.setZoomEssentials())}),n+30)},t.prototype.enableZoomOnSlideItemLoad=function(){this.core.LGel.on(lg+".zoom",this.enableZoom.bind(this))},t.prototype.getModifier=function(t,e,n){var i=t;t=Math.abs(t);var r=this.getCurrentTransform(n);if(!r)return 1;var s=1;if("X"===e){var o=Math.sign(parseFloat(r[0]));0===t||180===t?s=1:90===t&&(s=-90===i&&1===o||90===i&&-1===o?-1:1),s*=o}else{var a=Math.sign(parseFloat(r[3]));if(0===t||180===t)s=1;else if(90===t){var u=parseFloat(r[1]),l=parseFloat(r[2]);s=Math.sign(u*l*i*a)}s*=a}return s},t.prototype.getImageSize=function(t,e,n){return 90===Math.abs(e)&&(n="x"===n?"y":"x"),t[{y:"offsetHeight",x:"offsetWidth"}[n]]},t.prototype.getDragCords=function(t,e){return 90===e?{x:t.pageY,y:t.pageX}:{x:t.pageX,y:t.pageY}},t.prototype.getSwipeCords=function(t,e){var n=t.targetTouches[0].pageX,i=t.targetTouches[0].pageY;return 90===e?{x:i,y:n}:{x:n,y:i}},t.prototype.getDragAllowedAxises=function(t,e){e=e||this.scale||1;var n=this.imageYSize*e>this.containerRect.height,i=this.imageXSize*e>this.containerRect.width;return 90===t?{allowX:n,allowY:i}:{allowX:i,allowY:n}},t.prototype.getCurrentTransform=function(t){if(t){var e=window.getComputedStyle(t,null),n=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("-moz-transform")||e.getPropertyValue("-ms-transform")||e.getPropertyValue("-o-transform")||e.getPropertyValue("transform")||"none";return"none"!==n?n.split("(")[1].split(")")[0].split(","):void 0}},t.prototype.getCurrentRotation=function(t){if(!t)return 0;var e=this.getCurrentTransform(t);return e?Math.round(Math.atan2(parseFloat(e[1]),parseFloat(e[0]))*(180/Math.PI)):0},t.prototype.setZoomEssentials=function(){var t=this.core.getSlideItem(this.core.index).find(".lg-image").first(),e=this.core.getSlideItem(this.core.index).find(".lg-img-rotate").first().get();this.rotateValue=this.getCurrentRotation(e),this.imageYSize=this.getImageSize(t.get(),this.rotateValue,"y"),this.imageXSize=this.getImageSize(t.get(),this.rotateValue,"x"),this.containerRect=this.core.outer.get().getBoundingClientRect(),this.modifierX=this.getModifier(this.rotateValue,"X",e),this.modifierY=this.getModifier(this.rotateValue,"Y",e)},t.prototype.zoomImage=function(t){var e,n,i=(this.containerRect.width-this.imageXSize)/2+this.containerRect.left,r=this.core.mediaContainerPosition,s=r.top,o=r.bottom,a=Math.abs(s-o)/2,u=(this.containerRect.height-this.imageYSize-a*this.modifierX)/2+this.scrollTop+this.containerRect.top;1===t&&(this.positionChanged=!1);var l=this.getDragAllowedAxises(Math.abs(this.rotateValue),t),c=l.allowY,h=l.allowX;this.positionChanged&&(e=this.left/(this.scale-1),n=this.top/(this.scale-1),this.pageX=Math.abs(e)+i,this.pageY=Math.abs(n)+u,this.positionChanged=!1);var f=this.getPossibleSwipeDragCords(this.rotateValue,t),d=(t-1)*(i-this.pageX),g=(t-1)*(u-this.pageY);h?this.isBeyondPossibleLeft(d,f.minX)?d=f.minX:this.isBeyondPossibleRight(d,f.maxX)&&(d=f.maxX):t>1&&(d<f.minX?d=f.minX:d>f.maxX&&(d=f.maxX)),c?this.isBeyondPossibleTop(g,f.minY)?g=f.minY:this.isBeyondPossibleBottom(g,f.maxY)&&(g=f.maxY):t>1&&(g<f.minY?g=f.minY:g>f.maxY&&(g=f.maxY)),this.setZoomStyles({x:d,y:g,scale:t})},t.prototype.setZoomStyles=function(t){var e=this.core.getSlideItem(this.core.index).find(".lg-image").first(),n=this.core.outer.find(".lg-current .lg-dummy-img").first(),i=e.parent();this.scale=t.scale,e.css("transform","scale3d("+t.scale+", "+t.scale+", 1)"),n.css("transform","scale3d("+t.scale+", "+t.scale+", 1)");var r="translate3d("+t.x+"px, "+t.y+"px, 0)";i.css("transform",r),this.left=t.x,this.top=t.y},t.prototype.setActualSize=function(t,e){var n=this;if(this.isImageSlide()&&!this.core.outer.hasClass("lg-first-slide-loading")){var i=this.getCurrentImageActualSizeScale();this.core.outer.hasClass("lg-zoomed")?this.scale=1:this.scale=this.getScale(i),this.setPageCords(e),this.beginZoom(this.scale),this.zoomImage(this.scale),setTimeout((function(){n.core.outer.removeClass("lg-grabbing").addClass("lg-grab")}),10)}},t.prototype.getNaturalWidth=function(t){var e=this.core.getSlideItem(t).find(".lg-image").first(),n=this.core.galleryItems[t].width;return n?parseFloat(n):e.get().naturalWidth},t.prototype.getActualSizeScale=function(t,e){return t>e?t/e||2:1},t.prototype.getCurrentImageActualSizeScale=function(){var t=this.core.getSlideItem(this.core.index).find(".lg-image").first().get().offsetWidth,e=this.getNaturalWidth(this.core.index)||t;return this.getActualSizeScale(e,t)},t.prototype.getPageCords=function(t){var e={};if(t)e.x=t.pageX||t.targetTouches[0].pageX,e.y=t.pageY||t.targetTouches[0].pageY;else{var n=this.core.outer.get().getBoundingClientRect();e.x=n.width/2+n.left,e.y=n.height/2+this.scrollTop+n.top}return e},t.prototype.setPageCords=function(t){var e=this.getPageCords(t);this.pageX=e.x,this.pageY=e.y},t.prototype.beginZoom=function(t){(this.core.outer.removeClass("lg-zoom-drag-transition lg-zoom-dragging"),t>1)?(this.core.outer.addClass("lg-zoomed"),this.core.getElementById("lg-actual-size").removeClass(this.settings.actualSizeIcons.zoomIn).addClass(this.settings.actualSizeIcons.zoomOut)):this.resetZoom();return t>1},t.prototype.getScale=function(t){var e=this.getCurrentImageActualSizeScale();return t<1?t=1:t>e&&(t=e),t},t.prototype.init=function(){var t=this;if(this.settings.zoom){this.buildTemplates(),this.enableZoomOnSlideItemLoad();var e=null;this.core.outer.on("dblclick.lg",(function(e){t.$LG(e.target).hasClass("lg-image")&&t.setActualSize(t.core.index,e)})),this.core.outer.on("touchstart.lg",(function(n){var i=t.$LG(n.target);1===n.targetTouches.length&&i.hasClass("lg-image")&&(e?(clearTimeout(e),e=null,n.preventDefault(),t.setActualSize(t.core.index,n)):e=setTimeout((function(){e=null}),300))})),this.core.LGel.on(og+".zoom "+fg+".zoom "+hg+".zoom "+dg+".zoom "+gg+".zoom",(function(){t.core.lgOpened&&t.isImageSlide()&&(t.setPageCords(),t.setZoomEssentials(),t.zoomImage(t.scale))})),this.$LG(window).on("scroll.lg.zoom.global"+this.core.lgId,(function(){t.core.lgOpened&&(t.scrollTop=t.$LG(window).scrollTop())})),this.core.getElementById("lg-zoom-out").on("click.lg",(function(){t.core.outer.find(".lg-current .lg-image").get()&&(t.scale-=t.settings.scale,t.scale=t.getScale(t.scale),t.beginZoom(t.scale),t.zoomImage(t.scale))})),this.core.getElementById("lg-zoom-in").on("click.lg",(function(){t.zoomIn()})),this.core.getElementById("lg-actual-size").on("click.lg",(function(){t.setActualSize(t.core.index)})),this.core.LGel.on(ag+".zoom",(function(){t.core.outer.find(".lg-item").removeClass("lg-zoomable")})),this.core.LGel.on(ug+".zoom",(function(){t.scrollTop=t.$LG(window).scrollTop(),t.pageX=t.core.outer.width()/2,t.pageY=t.core.outer.height()/2+t.scrollTop,t.scale=1})),this.core.LGel.on(cg+".zoom",(function(e){var n=e.detail.prevIndex;t.scale=1,t.positionChanged=!1,t.resetZoom(n),t.isImageSlide()&&t.setZoomEssentials()})),this.zoomDrag(),this.pinchZoom(),this.zoomSwipe(),this.zoomableTimeout=!1,this.positionChanged=!1}},t.prototype.zoomIn=function(t){this.isImageSlide()&&(t?this.scale=t:this.scale+=this.settings.scale,this.scale=this.getScale(this.scale),this.beginZoom(this.scale),this.zoomImage(this.scale))},t.prototype.resetZoom=function(t){this.core.outer.removeClass("lg-zoomed lg-zoom-drag-transition");var e=this.core.getElementById("lg-actual-size"),n=this.core.getSlideItem(void 0!==t?t:this.core.index);e.removeClass(this.settings.actualSizeIcons.zoomOut).addClass(this.settings.actualSizeIcons.zoomIn),n.find(".lg-img-wrap").first().removeAttr("style"),n.find(".lg-image").first().removeAttr("style"),this.scale=1,this.left=0,this.top=0,this.setPageCords()},t.prototype.getTouchDistance=function(t){return Math.sqrt((t.targetTouches[0].pageX-t.targetTouches[1].pageX)*(t.targetTouches[0].pageX-t.targetTouches[1].pageX)+(t.targetTouches[0].pageY-t.targetTouches[1].pageY)*(t.targetTouches[0].pageY-t.targetTouches[1].pageY))},t.prototype.pinchZoom=function(){var t=this,e=0,n=!1,i=1,r=this.core.getSlideItem(this.core.index);this.core.$inner.on("touchstart.lg",(function(n){r=t.core.getSlideItem(t.core.index),t.isImageSlide()&&(2!==n.targetTouches.length||t.core.outer.hasClass("lg-first-slide-loading")||!t.$LG(n.target).hasClass("lg-item")&&!r.get().contains(n.target)||(i=t.scale||1,t.core.outer.removeClass("lg-zoom-drag-transition lg-zoom-dragging"),t.core.touchAction="pinch",e=t.getTouchDistance(n)))})),this.core.$inner.on("touchmove.lg",(function(s){if(2===s.targetTouches.length&&"pinch"===t.core.touchAction&&(t.$LG(s.target).hasClass("lg-item")||r.get().contains(s.target))){s.preventDefault();var o=t.getTouchDistance(s),a=e-o;!n&&Math.abs(a)>5&&(n=!0),n&&(t.scale=Math.max(1,i+.008*-a),t.zoomImage(t.scale))}})),this.core.$inner.on("touchend.lg",(function(i){"pinch"===t.core.touchAction&&(t.$LG(i.target).hasClass("lg-item")||r.get().contains(i.target))&&(n=!1,e=0,t.scale<=1?t.resetZoom():(t.scale=t.getScale(t.scale),t.zoomImage(t.scale),t.core.outer.addClass("lg-zoomed")),t.core.touchAction=void 0)}))},t.prototype.touchendZoom=function(t,e,n,i,r,s){var o=e.x-t.x,a=e.y-t.y,u=Math.abs(o)/r+1,l=Math.abs(a)/r+1;u>2&&(u+=1),l>2&&(l+=1),o*=u,a*=l;var c=this.core.getSlideItem(this.core.index).find(".lg-img-wrap").first(),h={};h.x=this.left+o*this.modifierX,h.y=this.top+a*this.modifierY;var f=this.getPossibleSwipeDragCords(s);(Math.abs(o)>15||Math.abs(a)>15)&&(i&&(this.isBeyondPossibleTop(h.y,f.minY)?h.y=f.minY:this.isBeyondPossibleBottom(h.y,f.maxY)&&(h.y=f.maxY)),n&&(this.isBeyondPossibleLeft(h.x,f.minX)?h.x=f.minX:this.isBeyondPossibleRight(h.x,f.maxX)&&(h.x=f.maxX)),i?this.top=h.y:h.y=this.top,n?this.left=h.x:h.x=this.left,this.setZoomSwipeStyles(c,h),this.positionChanged=!0)},t.prototype.getZoomSwipeCords=function(t,e,n,i,r){var s={};if(i){if(s.y=this.top+(e.y-t.y)*this.modifierY,this.isBeyondPossibleTop(s.y,r.minY)){var o=r.minY-s.y;s.y=r.minY-o/6}else if(this.isBeyondPossibleBottom(s.y,r.maxY)){var a=s.y-r.maxY;s.y=r.maxY+a/6}}else s.y=this.top;if(n){if(s.x=this.left+(e.x-t.x)*this.modifierX,this.isBeyondPossibleLeft(s.x,r.minX)){var u=r.minX-s.x;s.x=r.minX-u/6}else if(this.isBeyondPossibleRight(s.x,r.maxX)){var l=s.x-r.maxX;s.x=r.maxX+l/6}}else s.x=this.left;return s},t.prototype.isBeyondPossibleLeft=function(t,e){return t>=e},t.prototype.isBeyondPossibleRight=function(t,e){return t<=e},t.prototype.isBeyondPossibleTop=function(t,e){return t>=e},t.prototype.isBeyondPossibleBottom=function(t,e){return t<=e},t.prototype.isImageSlide=function(){var t=this.core.galleryItems[this.core.index];return"image"===this.core.getSlideType(t)},t.prototype.getPossibleSwipeDragCords=function(t,e){var n=e||this.scale||1,i=Math.abs(n),r=this.core.mediaContainerPosition,s=r.top,o=r.bottom,a=Math.abs(s-o)/2,u=(this.imageYSize-this.containerRect.height)/2+a*this.modifierX,l=this.containerRect.height-this.imageYSize*i+u,c=(this.imageXSize-this.containerRect.width)/2,h=this.containerRect.width-this.imageXSize*i+c,f={minY:u,maxY:l,minX:c,maxX:h};return 90===Math.abs(t)&&(f={minY:c,maxY:h,minX:u,maxX:l}),f},t.prototype.setZoomSwipeStyles=function(t,e){t.css("transform","translate3d("+e.x+"px, "+e.y+"px, 0)")},t.prototype.zoomSwipe=function(){var t,e,n=this,i={},r={},s=!1,o=!1,a=!1,u=new Date,l=(new Date,this.core.getSlideItem(this.core.index));this.core.$inner.on("touchstart.lg",(function(r){if(n.isImageSlide()&&(l=n.core.getSlideItem(n.core.index),(n.$LG(r.target).hasClass("lg-item")||l.get().contains(r.target))&&1===r.targetTouches.length&&n.core.outer.hasClass("lg-zoomed"))){r.preventDefault(),u=new Date,n.core.touchAction="zoomSwipe",e=n.core.getSlideItem(n.core.index).find(".lg-img-wrap").first();var s=n.getDragAllowedAxises(Math.abs(n.rotateValue));a=s.allowY,((o=s.allowX)||a)&&(i=n.getSwipeCords(r,Math.abs(n.rotateValue))),t=n.getPossibleSwipeDragCords(n.rotateValue),n.core.outer.addClass("lg-zoom-dragging lg-zoom-drag-transition")}})),this.core.$inner.on("touchmove.lg",(function(u){if(1===u.targetTouches.length&&"zoomSwipe"===n.core.touchAction&&(n.$LG(u.target).hasClass("lg-item")||l.get().contains(u.target))){u.preventDefault(),n.core.touchAction="zoomSwipe",r=n.getSwipeCords(u,Math.abs(n.rotateValue));var c=n.getZoomSwipeCords(i,r,o,a,t);(Math.abs(r.x-i.x)>15||Math.abs(r.y-i.y)>15)&&(s=!0,n.setZoomSwipeStyles(e,c))}})),this.core.$inner.on("touchend.lg",(function(t){if("zoomSwipe"===n.core.touchAction&&(n.$LG(t.target).hasClass("lg-item")||l.get().contains(t.target))){if(n.core.touchAction=void 0,n.core.outer.removeClass("lg-zoom-dragging"),!s)return;s=!1;var e=(new Date).valueOf()-u.valueOf();n.touchendZoom(i,r,o,a,e,n.rotateValue)}}))},t.prototype.zoomDrag=function(){var t,e,n,i,r=this,s={},o={},a=!1,u=!1,l=!1,c=!1;this.core.outer.on("mousedown.lg.zoom",(function(e){if(r.isImageSlide()){var o=r.core.getSlideItem(r.core.index);if(r.$LG(e.target).hasClass("lg-item")||o.get().contains(e.target)){t=new Date,i=r.core.getSlideItem(r.core.index).find(".lg-img-wrap").first();var u=r.getDragAllowedAxises(Math.abs(r.rotateValue));c=u.allowY,l=u.allowX,r.core.outer.hasClass("lg-zoomed")&&r.$LG(e.target).hasClass("lg-object")&&(l||c)&&(e.preventDefault(),s=r.getDragCords(e,Math.abs(r.rotateValue)),n=r.getPossibleSwipeDragCords(r.rotateValue),a=!0,r.core.outer.get().scrollLeft+=1,r.core.outer.get().scrollLeft-=1,r.core.outer.removeClass("lg-grab").addClass("lg-grabbing lg-zoom-drag-transition lg-zoom-dragging"))}}})),this.$LG(window).on("mousemove.lg.zoom.global"+this.core.lgId,(function(t){if(a){u=!0,o=r.getDragCords(t,Math.abs(r.rotateValue));var e=r.getZoomSwipeCords(s,o,l,c,n);r.setZoomSwipeStyles(i,e)}})),this.$LG(window).on("mouseup.lg.zoom.global"+this.core.lgId,(function(n){if(a){if(e=new Date,a=!1,r.core.outer.removeClass("lg-zoom-dragging"),u&&(s.x!==o.x||s.y!==o.y)){o=r.getDragCords(n,Math.abs(r.rotateValue));var i=e.valueOf()-t.valueOf();r.touchendZoom(s,o,l,c,i,r.rotateValue)}u=!1}r.core.outer.removeClass("lg-grabbing").addClass("lg-grab")}))},t.prototype.closeGallery=function(){this.resetZoom()},t.prototype.destroy=function(){this.$LG(window).off(".lg.zoom.global"+this.core.lgId),this.core.LGel.off(".lg.zoom"),this.core.LGel.off(".zoom"),clearTimeout(this.zoomableTimeout),this.zoomableTimeout=!1},t}();
/*!
 * lightgallery | 2.4.0 | January 29th 2022
 * http://www.lightgalleryjs.com/
 * Copyright (c) 2020 Sachin Neravath;
 * @license GPLv3
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */Yd=s("aNJCr").getBundleURL("1k32y")+s("iE7OH").resolve("iOk8V");var pg=null,mg=null,yg=null;function bg(){pg=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!=typeof e){e={name:e}}var n=Object.assign({name:ot,automaticDataCollectionEnabled:!1},e),i=n.name;if("string"!=typeof i||!i)throw vt.create("bad-app-name",{appName:String(i)});var r=ut.get(i);if(r){if(z(t,r.options)&&z(n,r.config))return r;throw vt.create("duplicate-app",{appName:i})}var s=new X(i),o=!0,a=!1,u=void 0;try{for(var l,c=lt.values()[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var h=l.value;s.addComponent(h)}}catch(t){a=!0,u=t}finally{try{o||null==c.return||c.return()}finally{if(a)throw u}}var f=new pt(t,n,s);return ut.set(i,f),f}({apiKey:"AIzaSyDPdyCQAzKA_OrM8qS7Oz1372NKn1R6oaI",authDomain:"suckzoo-log.firebaseapp.com",projectId:"suckzoo-log"}),mg=function(){return ft(arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt(),"firestore").getImmediate()}(pg)}function wg(t){return String(t).replace(/[&<>"'`=\/]/g,(function(t){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"}[t]}))}function kg(t,e,n){var i="Invalid date";i=n.timestamp instanceof Date?new Date(n.timestamp).toLocaleString("ko-KR"):new Date(1e3*n.timestamp.seconds).toLocaleString("ko-KR"),t.insertAdjacentHTML(e,'<div class="comment-entry">\n            <div class="row">\n                <span class="name">'.concat(wg(n.username),'</span>\n                <span class="date">').concat(i,'</span>\n            </div>\n            <p class="message">\n                ').concat(wg(n.comment),"\n            </p>\n        </div>"))}function Tg(){return Ig.apply(this,arguments)}function Ig(){return(Ig=u(e(_).mark((function t(){var n,i,r,s;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=vf(mg,"visitor-comments"),i=yg?Qf(n,Zf("timestamp","desc"),id(yg),ed(5)):Qf(n,Zf("timestamp","desc"),ed(5)),r=document.getElementById("comments"),t.next=6,ld(i);case 6:(s=t.sent).docs.length?yg=s.docs[s.docs.length-1]:document.getElementById("pull-comments").innerHTML="마지막 댓글입니다.",s.docs.map((function(t){return t.data()})).forEach((function(t){return kg(r,"beforeend",t)}));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Eg(){return(Eg=u(e(_).mark((function t(){var n,i,r;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=document.getElementById("username").value,i=document.getElementById("comment").value,!(n.length<1||n.length>10)){t.next=5;break}return alert("사용자 이름은 1~10자로 입력해주세요."),t.abrupt("return");case 5:if(n.replace(/\n/g," "),!(i.length<1||i.length>100)){t.next=9;break}return alert("댓글은 1~100자로 입력해주세요."),t.abrupt("return");case 9:return i.replace(/\n/g," "),r={username:n,comment:i,timestamp:new Date},t.next=13,cd(vf(mg,"visitor-comments"),r);case 13:alert("댓글이 작성되었습니다."),kg(document.getElementById("comments"),"afterbegin",r);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Sg(){document.getElementById("btn-kakao-talk").addEventListener("click",(function(){Kakao.Link.sendDefault({objectType:"location",address:"서울 구로구 경인로 624 신도림라마다호텔 5층 세인트그레이스홀",addressTitle:"신도림라마다호텔",content:{title:"석주, 유라 결혼식에 초대합니다!",description:"5/22(일) AM 11:30분 신도림라마다호텔",imageUrl:Yd,link:{mobileWebUrl:"https://suckzoo.github.io/wedding-invitation",webUrl:"https://suckzoo.github.io/wedding-invitation"}},buttons:[{title:"웹으로 보기",link:{mobileWebUrl:"https://suckzoo.github.io/wedding-invitation",webUrl:"https://suckzoo.github.io/wedding-invitation"}}]})})),document.getElementById("push-comment").addEventListener("click",(function(){!function(){Eg.apply(this,arguments)}()})),document.getElementById("pull-comments").addEventListener("click",(function(){Tg()}))}function xg(t){var e=t.getFullYear(),n=t.getMonth(),i=t.getDate(),r=new Date(e,n,1),s=new Date(e,n+1,0).getDate(),o=document.getElementById("calendar-contents"),a=document.createElement("time");a.setAttribute("datetime","".concat(e,"-").concat(n+1)),o.appendChild(a);var u=document.createElement("time"),l=function(t){var e=new Date(t);e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var n=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)}(r);u.setAttribute("datetime","".concat(e,"-W").concat(l)),a.appendChild(u),u.className="row";for(var c=0;c<r.getDay();c++){var h=document.createElement("time");h.innerHTML="&nbsp;",u.appendChild(h)}for(var f=r.getDay(),d=1;d<=s;){var g=document.createElement("time");if(g.setAttribute("datetime","".concat(e,"-").concat(n+1,"-").concat(d)),g.innerHTML=d.toString(),d===i&&(g.className="active"),u.appendChild(g),f++,++d>s)for(var v=0;v<7-f;v++){var p=document.createElement("time");p.innerHTML="&nbsp;",u.appendChild(p)}7===f&&d<=s&&(l++,(u=document.createElement("time")).setAttribute("datetime","".concat(e,"-W").concat(l)),a.appendChild(u),u.className="row",f=0)}}function Cg(){for(var t=document.querySelectorAll("section"),e=0;e<t.length;e++){var n=window.innerHeight;t[e].getBoundingClientRect().top<n&&t[e].classList.add("fade-in")}}function Ag(t){return Dg.apply(this,arguments)}function Dg(){return(Dg=u(e(_).mark((function t(n){var i;return e(_).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={groom:"80170104228385",groomMom:"74380101130457",bride:"110459794448",brideMom:"110459794448"},t.next=3,navigator.clipboard.writeText(i[n]);case 3:alert("계좌번호가 복사되었습니다.");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){Cg(),window.addEventListener("scroll",Cg),window.copyBankAccount=Ag;var t=new Date("2022-05-22T00:00:00+0900");!function(t){var e=document.getElementById("dday"),n=t.getTime()-(new Date).getTime(),i=Math.floor(n/864e5)+1;e.innerHTML=i>0?"D-".concat(i):"D+".concat(i)}(t),xg(t),$d(document.getElementById("lightgallery"),{plugins:[vg,ig],speed:500}),Kakao.init("2fa62d1fda5b89bbb99e8dc88e13c50d"),console.log("kakao initialized: ".concat(Kakao.isInitialized())),(new kakao.maps.services.Geocoder).addressSearch("서울 구로구 경인로 624",(function(t,e){if(e===kakao.maps.services.Status.OK){var n=new kakao.maps.LatLng(t[0].y,t[0].x),i=document.getElementById("map"),r={center:n,level:4,marker:{position:n,text:"신도림라마다호텔"}};new kakao.maps.StaticMap(i,r)}})),bg(),Sg(),Tg()}()}();
//# sourceMappingURL=index.02136328.js.map
